/*! For license information please see hutch.js.LICENSE.txt */
(()=>{var e,t,n,r,o={841:(e,t,n)=>{"use strict";var r=n(294),o=n(935);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},w=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.init(t,n)}return l(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||b,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,v(v({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}()),E=function(){function e(){i(this,e),this.observers={}}return l(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function S(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function C(e){return null==e?"":""+e}function _(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var a="string"!=typeof t?[].concat(t):t.split(".");a.length>1;){if(o())return{};var i=r(a.shift());!e[i]&&n&&(e[i]=new n),e=Object.prototype.hasOwnProperty.call(e,i)?e[i]:{}}return o()?{}:{obj:e,k:r(a.shift())}}function A(e,t,n){var r=_(e,t,Object);r.obj[r.k]=n}function k(e,t){var n=_(e,t),r=n.obj,o=n.k;if(r)return r[o]}function O(e,t,n){var r=k(e,n);return void 0!==r?r:k(t,n)}function P(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):P(e[r],t[r],n):e[r]=t[r]);return e}function N(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function I(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return T[e]})):e}var R="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,D=[" ",",","?","!",";"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),o=e,a=0;a<r.length;++a){if(!o)return;if("string"==typeof o[r[a]]&&a+1<r.length)return;if(void 0===o[r[a]]){for(var i=2,s=r.slice(a,a+i).join(n),c=o[s];void 0===c&&r.length>a+i;)i++,c=o[s=r.slice(a,a+i).join(n)];if(void 0===c)return;if(null===c)return null;if(t.endsWith(s)){if("string"==typeof c)return c;if(s&&"string"==typeof c[s])return c[s]}var l=r.slice(a+i).join(n);return l?L(c,l,n):void 0}o=o[r[a]]}return o}}var B=function(e){d(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h(t);if(n){var o=h(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return p(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return i(this,o),t=r.call(this),R&&E.call(u(t)),t.data=e||{},t.options=n,void 0===t.options.keySeparator&&(t.options.keySeparator="."),void 0===t.options.ignoreJSONStructure&&(t.options.ignoreJSONStructure=!0),t}return l(o,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,i=[e,t];n&&"string"!=typeof n&&(i=i.concat(n)),n&&"string"==typeof n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=e.split("."));var s=k(this.data,i);return s||!a||"string"!=typeof n?s:L(this.data&&this.data[e]&&this.data[e][t],n,o)}},{key:"addResource",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var i=[e,t];n&&(i=i.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(r=t,t=(i=e.split("."))[1]),this.addNamespaces(t),A(this.data,i,r),o.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"!=typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},i=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(i=e.split("."))[1]),this.addNamespaces(t);var s=k(this.data,i)||{};r?P(s,n,o):s=M(M({},s),n),A(this.data,i,s),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?M(M({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),o}(E),j={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,n,r,o))})),t}};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H={},V=function(e){d(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h(t);if(n){var o=h(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return p(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),t=r.call(this),R&&E.call(u(t)),function(e,t,n){["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((function(e){t[e]&&(n[e]=t[e])}))}(0,e,u(t)),t.options=n,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=w.create("translator"),t}return l(o,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS||[],a=n&&e.indexOf(n)>-1,i=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=D.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===r.length)return!0;var o=new RegExp("(".concat(r.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),a=!o.test(e);if(!a){var i=e.indexOf(n);i>0&&!o.test(e.substring(0,i))&&(a=!0)}return a}(e,n,r));if(a&&!i){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:o};var c=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(c[0])>-1)&&(o=c.shift()),e=c.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(e,t,n){var r=this;if("object"!==a(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,c=this.extractFromKey(e[e.length-1],t),l=c.key,u=c.namespaces,f=u[u.length-1],d=t.lng||this.language,p=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(p){var h=t.nsSeparator||this.options.nsSeparator;return i?(m.res="".concat(f).concat(h).concat(l),m):"".concat(f).concat(h).concat(l)}return i?(m.res=l,m):l}var m=this.resolve(e,t),y=m&&m.res,g=m&&m.usedKey||l,v=m&&m.exactUsedKey||l,b=Object.prototype.toString.apply(y),w=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject;if(E&&y&&"string"!=typeof y&&"boolean"!=typeof y&&"number"!=typeof y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(b)<0&&("string"!=typeof w||"[object Array]"!==b)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,y,U(U({},t),{},{ns:u})):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");return i?(m.res=S,m):S}if(s){var C="[object Array]"===b,_=C?[]:{},A=C?v:g;for(var k in y)if(Object.prototype.hasOwnProperty.call(y,k)){var O="".concat(A).concat(s).concat(k);_[k]=this.translate(O,U(U({},t),{joinArrays:!1,ns:u})),_[k]===O&&(_[k]=y[k])}y=_}}else if(E&&"string"==typeof w&&"[object Array]"===b)(y=y.join(w))&&(y=this.extendTranslation(y,e,t,n));else{var P=!1,N=!1,T=void 0!==t.count&&"string"!=typeof t.count,I=o.hasDefaultValue(t),R=T?this.pluralResolver.getSuffix(d,t.count,t):"",D=t["defaultValue".concat(R)]||t.defaultValue;!this.isValidLookup(y)&&I&&(P=!0,y=D),this.isValidLookup(y)||(N=!0,y=l);var x=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:y,M=I&&D!==y&&this.options.updateMissing;if(N||P||M){if(this.logger.log(M?"updateKey":"missingKey",d,f,l,M?D:y),s){var L=this.resolve(l,U(U({},t),{},{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var B=[],j=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&j&&j[0])for(var F=0;F<j.length;F++)B.push(j[F]);else"all"===this.options.saveMissingTo?B=this.languageUtils.toResolveHierarchy(t.lng||this.language):B.push(t.lng||this.language);var H=function(e,n,o){var a=I&&o!==y?o:x;r.options.missingKeyHandler?r.options.missingKeyHandler(e,f,n,a,M,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,f,n,a,M,t),r.emit("missingKey",e,f,n,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?B.forEach((function(e){r.pluralResolver.getSuffixes(e,t).forEach((function(n){H([e],l+n,t["defaultValue".concat(n)]||D)}))})):H(B,l,D))}y=this.extendTranslation(y,e,t,m,n),N&&y===l&&this.options.appendNamespaceToMissingKey&&(y="".concat(f,":").concat(l)),(N||P)&&this.options.parseMissingKeyHandler&&(y="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(f,":").concat(l):l,P?y:void 0):this.options.parseMissingKeyHandler(y))}return i?(m.res=y,m):y}},{key:"extendTranslation",value:function(e,t,n,r,o){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,U(U({},this.options.interpolation.defaultVariables),n),r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(U(U({},n),{interpolation:U(U({},this.options.interpolation),n.interpolation)}));var i,s="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var c=e.match(this.interpolator.nestingRegexp);i=c&&c.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=U(U({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),s){var u=e.match(this.interpolator.nestingRegexp);i<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return o&&o[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):a.translate.apply(a,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,d="string"==typeof f?[f]:f;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=j.handle(d,e,t,this.options&&this.options.postProcessPassResolved?U({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,o,a,i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!i.isValidLookup(t)){var c=i.extractFromKey(e,s),l=c.key;n=l;var u=c.namespaces;i.options.fallbackNS&&(u=u.concat(i.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,d=f&&!s.ordinal&&0===s.count&&i.pluralResolver.shouldUseIntlApi(),p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:i.languageUtils.toResolveHierarchy(s.lng||i.language,s.fallbackLng);u.forEach((function(e){i.isValidLookup(t)||(a=e,!H["".concat(h[0],"-").concat(e)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(a)&&(H["".concat(h[0],"-").concat(e)]=!0,i.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!i.isValidLookup(t)){o=n;var a,c=[l];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(c,l,n,e,s);else{var u;f&&(u=i.pluralResolver.getSuffix(n,s.count,s));var h="".concat(i.options.pluralSeparator,"zero");if(f&&(c.push(l+u),d&&c.push(l+h)),p){var m="".concat(l).concat(i.options.contextSeparator).concat(s.context);c.push(m),f&&(c.push(m+u),d&&c.push(m+h))}}for(;a=c.pop();)i.isValidLookup(t)||(r=a,t=i.getResource(n,e,a,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:a}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}]),o}(E);function K(e){return e.charAt(0).toUpperCase()+e.slice(1)}var W=function(){function e(t){i(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=w.create("languageUtils")}return l(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=K(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=K(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=K(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],a=function(e){e&&(n.isSupportedCode(e)?o.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),r.forEach((function(e){o.indexOf(e)<0&&a(n.formatLanguageCode(e))})),o}}]),e}(),z=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],G={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},X=["v1","v2","v3"],J={zero:0,one:1,two:2,few:3,many:4,other:5},q=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.languageUtils=t,this.options=r,this.logger=w.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(n={},z.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:G[e.fc]}}))})),n)}return l(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return J[e]-J[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),o=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?a():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!X.includes(this.options.compatibilityJSON)}}]),e}();function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.logger=w.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return l(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:I,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?N(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?N(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?N(t.nestingPrefix):t.nestingPrefixEscaped||N("$t("),this.nestingSuffix=t.nestingSuffix?N(t.nestingSuffix):t.nestingSuffixEscaped||N(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var o,a,i,s=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(s.formatSeparator)<0){var o=O(t,c,e);return s.alwaysFormat?s.format(o,void 0,n,Q(Q(Q({},r),t),{},{interpolationkey:e})):o}var a=e.split(s.formatSeparator),i=a.shift().trim(),l=a.join(s.formatSeparator).trim();return s.format(O(t,c,i),l,n,Q(Q(Q({},r),t),{},{interpolationkey:i}))};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return l(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?l(s.escape(e)):l(e)}}].forEach((function(t){for(i=0;o=t.regex.exec(e);){var n=o[1].trim();if(void 0===(a=u(n)))if("function"==typeof f){var c=f(e,o,r);a="string"==typeof c?c:""}else if(r&&r.hasOwnProperty(n))a="";else{if(d){a=o[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),a=""}else"string"==typeof a||s.useRawValueToEscape||(a=C(a));var l=t.safeValue(a);if(e=e.replace(o[0],l),d?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,++i>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Q({},a);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0];var a=(o=this.interpolate(o,i)).match(/'/g),s=o.match(/"/g);(a&&a.length%2==0&&!s||s.length%2!=0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i=Q(Q({},t),i))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete i.defaultValue,e}for(i.applyPostProcessor=!1,delete i.defaultValue;n=this.nestingRegexp.exec(e);){var c=[],l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=u.shift(),c=u,l=!0}if((r=t(s.call(this,n[1].trim(),i),i))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=C(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=c.reduce((function(e,t){return o.format(e,t,a.lng,Q(Q({},a),{},{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e){var t={};return function(n,r,o){var a=r+JSON.stringify(o),i=t[a];return i||(i=e(r,o),t[a]=i),i(n)}}var re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.logger=w.create("formatter"),this.options=t,this.formats={number:ne((function(e,t){var n=new Intl.NumberFormat(e,t);return function(e){return n.format(e)}})),currency:ne((function(e,t){var n=new Intl.NumberFormat(e,te(te({},t),{},{style:"currency"}));return function(e){return n.format(e)}})),datetime:ne((function(e,t){var n=new Intl.DateTimeFormat(e,te({},t));return function(e){return n.format(e)}})),relativetime:ne((function(e,t){var n=new Intl.RelativeTimeFormat(e,te({},t));return function(e){return n.format(e,t.range||"day")}})),list:ne((function(e,t){var n=new Intl.ListFormat(e,te({},t));return function(e){return n.format(e)}}))},this.init(t)}return l(e,[{key:"init",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=ne(t)}},{key:"format",value:function(e,t,n,r){var o=this,a=t.split(this.formatSeparator).reduce((function(e,t){var a=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var o=r[1].substring(0,r[1].length-1);"currency"===t&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):"relativetime"===t&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach((function(e){if(e){var t=function(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split(":")),r=t[0],o=t.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[r.trim()]||(n[r.trim()]=o),"false"===o&&(n[r.trim()]=!1),"true"===o&&(n[r.trim()]=!0),isNaN(o)||(n[r.trim()]=parseInt(o,10))}}))}return{formatName:t,formatOptions:n}}(t),i=a.formatName,s=a.formatOptions;if(o.formats[i]){var c=e;try{var l=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},u=l.locale||l.lng||r.locale||r.lng||n;c=o.formats[i](e,u,te(te(te({},s),r),l))}catch(e){o.logger.warn(e)}return c}return o.logger.warn("there was no format function for ".concat(i)),e}),e);return a}}]),e}();function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(e){d(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h(t);if(n){var o=h(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return p(this,e)});function o(e,t,n){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i(this,o),a=r.call(this),R&&E.call(u(a)),a.backend=e,a.store=t,a.services=n,a.languageUtils=n.languageUtils,a.options=s,a.logger=w.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=s.maxParallelReads||10,a.readingCalls=0,a.maxRetries=s.maxRetries>=0?s.maxRetries:5,a.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(n,s.backend,s),a}return l(o,[{key:"queueLoad",value:function(e,t,n,r){var o=this,a={},i={},s={},c={};return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?void 0===i[s]&&(i[s]=!0):(o.state[s]=1,r=!1,void 0===i[s]&&(i[s]=!0),void 0===a[s]&&(a[s]=!0),void 0===c[t]&&(c[t]=!0)))})),r||(s[e]=!0)})),(Object.keys(a).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(i),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),o=r[0],a=r[1];t&&this.emit("failedLoading",o,a,t),n&&this.store.addResourceBundle(o,a,n),this.state[e]=t?-1:2;var i={};this.queue.forEach((function(n){!function(e,t,n,r){var o=_(e,t,Object),a=o.obj,i=o.k;a[i]=a[i]||[],a[i].push(n)}(n.loaded,[o],a),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(e){i[e]||(i[e]={});var t=n.loaded[e];t.length&&t.forEach((function(t){void 0===i[e][t]&&(i[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",i),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;return e.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:o,wait:a,callback:i}):(this.readingCalls++,this.backend[n](e,t,(function(s,c){if(r.readingCalls--,r.waitingReads.length>0){var l=r.waitingReads.shift();r.read(l.lng,l.ns,l.fcName,l.tried,l.wait,l.callback)}s&&c&&o<r.maxRetries?setTimeout((function(){r.read.call(r,e,t,n,o+1,2*a,i)}),a):i(s,c)}))):i(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var a=this.queueLoad(e,t,r,o);if(!a.toLoad.length)return a.pending.length||o(),null;a.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),o=r[0],a=r[1];this.read(o,a,"read",void 0,void 0,(function(r,i){r&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(o," failed"),r),!r&&i&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(o),i),t.loaded(e,r,i)}))}},{key:"saveMissing",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,ae(ae({},a),{},{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),o}(E);function se(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(){}var fe=function(e){d(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h(t);if(n){var o=h(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return p(this,e)});function o(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(i(this,o),e=r.call(this),R&&E.call(u(e)),e.options=se(n),e.services={},e.logger=w,e.modules={external:[]},t=u(e),Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach((function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))})),a&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,a),p(e,u(e));setTimeout((function(){e.init(n,a)}),0)}return e}return l(o,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var r={debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===a(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===a(e[2])||"object"===a(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}};function o(e){return e?"function"==typeof e?new e:e:null}if(this.options=le(le(le({},r),this.options),se(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=le(le({},r.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var i;this.modules.logger?w.init(o(this.modules.logger),this.options):w.init(null,this.options),this.modules.formatter?i=this.modules.formatter:"undefined"!=typeof Intl&&(i=re);var s=new W(this.options);this.store=new B(this.options.resources,this.options);var c=this.services;c.logger=w,c.resourceStore=this.store,c.languageUtils=s,c.pluralResolver=new q(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!i||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(c.formatter=o(i),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new Z(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new ie(o(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(c.languageDetector=o(this.modules.languageDetector),c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=o(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new V(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=ue),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=S(),f=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var o=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};r?a(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return a(e)})),this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),n(e)}))}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=S();return e||(e=this.languages),t||(t=this.options.ns),n||(n=ue),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&j.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=S();this.emit("languageChanging",e);var o=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},a=function(a){e||a||!n.services.languageDetector||(a=[]);var i="string"==typeof a?a:n.services.languageUtils.getBestMatchFromCodes(a);i&&(n.language||o(i),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,(function(e){!function(e,a){a?(o(a),n.translator.changeLanguage(a),n.isLanguageChangingTo=void 0,n.emit("languageChanged",a),n.logger.log("languageChanged",a)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,o=function e(t,o){var i;if("object"!==a(o)){for(var s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];i=r.options.overloadTranslationOptionHandler([t,o].concat(c))}else i=le({},o);i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,i.keyPrefix=i.keyPrefix||n||e.keyPrefix;var u=r.options.keySeparator||".",f=i.keyPrefix?"".concat(i.keyPrefix).concat(u).concat(t):t;return r.t(f,i)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.resolvedLanguage||this.languages[0],o=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var i=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,i);if(void 0!==s)return s}return!(!this.hasResourceBundle(r,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!i(r,e)||o&&!i(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=S();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=S();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],o=e.filter((function(e){return r.indexOf(e)<0}));return o.length?(this.options.preload=r.concat(o),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,r=le(le(le({},this.options),t),{isClone:!0}),a=new o(r);return void 0===t.debug&&void 0===t.prefix||(a.logger=a.logger.clone(t)),["store","services","language"].forEach((function(t){a[t]=e[t]})),a.services=le({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new V(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))})),a.init(r,n),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),o}(E);m(fe,"createInstance",(function(){return new fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}));var de=fe.createInstance();de.createInstance=fe.createInstance,de.createInstance,de.init,de.loadResources,de.reloadResources,de.use,de.changeLanguage,de.getFixedT,de.t,de.exists,de.setDefaultNamespace,de.hasLoadedNamespace,de.loadNamespaces,de.loadLanguages;const pe=de;function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}var me=[],ye=me.forEach,ge=me.slice;function ve(e){return ye.call(ge.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}function be(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":he(XMLHttpRequest))}var we,Ee,Se,Ce=n(154),_e=n.t(Ce,2);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}"function"==typeof fetch&&(we="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),be()&&("undefined"!=typeof global&&global.XMLHttpRequest?Ee=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(Ee=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?Se=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(Se=window.ActiveXObject)),we||!_e||Ee||Se||(we=Ce||_e),"function"!=typeof we&&(we=void 0);var ke=function(e,t){if(t&&"object"===Ae(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},Oe=function(e,t,n){we(e,t).then((function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then((function(t){n(null,{status:e.status,data:t})})).catch(n)})).catch(n)},Pe=!1;const Ne=function(e,t,n,r){return"function"==typeof n&&(r=n,n=void 0),r=r||function(){},we?function(e,t,n,r){e.queryStringParams&&(t=ke(t,e.queryStringParams));var o=ve({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);n&&(o["Content-Type"]="application/json");var a="function"==typeof e.requestOptions?e.requestOptions(n):e.requestOptions,i=ve({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:o},Pe?{}:a);try{Oe(t,i,r)}catch(e){if(!a||0===Object.keys(a).length||!e.message||e.message.indexOf("not implemented")<0)return r(e);try{Object.keys(a).forEach((function(e){delete i[e]})),Oe(t,i,r),Pe=!0}catch(e){r(e)}}}(e,t,n,r):be()||"function"==typeof ActiveXObject?function(e,t,n,r){n&&"object"===Ae(n)&&(n=ke("",n).slice(1)),e.queryStringParams&&(t=ke(t,e.queryStringParams));try{var o;(o=Ee?new Ee:new Se("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",t,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,n&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var a=e.customHeaders;if(a="function"==typeof a?a():a)for(var i in a)o.setRequestHeader(i,a[i]);o.onreadystatechange=function(){o.readyState>3&&r(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(n)}catch(e){console&&console.log(e)}}(e,t,n,r):void r(new Error("No fetch and no xhr implementation found!"))};function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ie=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}var t,n;return t=e,n=[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=ve(n,this.options||{},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n||"")},request:Ne,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.allOptions=r,this.services&&this.options.reloadInterval&&setInterval((function(){return t.reload()}),this.options.reloadInterval)}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,r,o){var a,i=this,s=this.options.loadPath;"function"==typeof this.options.loadPath&&(s=this.options.loadPath(e,n)),(s=function(e){return!!e&&"function"==typeof e.then}(a=s)?a:Promise.resolve(a)).then((function(a){if(!a)return o(null,{});var s=i.services.interpolator.interpolate(a,{lng:e.join("+"),ns:n.join("+")});i.loadUrl(s,o,t,r)}))}},{key:"loadUrl",value:function(e,t,n,r){var o=this;this.options.request(this.options,e,void 0,(function(a,i){if(i&&(i.status>=500&&i.status<600||!i.status))return t("failed loading "+e+"; status code: "+i.status,!0);if(i&&i.status>=400&&i.status<500)return t("failed loading "+e+"; status code: "+i.status,!1);if(!i&&a&&a.message&&a.message.indexOf("Failed to fetch")>-1)return t("failed loading "+e+": "+a.message,!0);if(a)return t(a,!1);var s,c;try{s="string"==typeof i.data?o.options.parse(i.data,n,r):i.data}catch(t){c="failed parsing "+e+" to json"}if(c)return t(c,!1);t(null,s)}))}},{key:"create",value:function(e,t,n,r,o){var a=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var i=this.options.parsePayload(t,n,r),s=0,c=[],l=[];e.forEach((function(n){var r=a.options.addPath;"function"==typeof a.options.addPath&&(r=a.options.addPath(n,t));var u=a.services.interpolator.interpolate(r,{lng:n,ns:t});a.options.request(a.options,u,i,(function(t,n){s+=1,c.push(t),l.push(n),s===e.length&&o&&o(c,l)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,r=t.languageUtils,o=t.logger,a=n.language;if(!a||"cimode"!==a.toLowerCase()){var i=[],s=function(e){r.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};s(a),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return s(e)})),i.forEach((function(t){e.allOptions.ns.forEach((function(e){n.read(t,e,"read",null,null,(function(r,a){r&&o.warn("loading namespace ".concat(e," for language ").concat(t," failed"),r),!r&&a&&o.log("loaded namespace ".concat(e," for language ").concat(t),a),n.loaded("".concat(t,"|").concat(e),r,a)}))}))}))}}}],n&&Te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Ie.type="backend";const Re=Ie;var De=[],xe=De.forEach,Me=De.slice,Le=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Be={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+60*n*1e3)),r&&(o.domain=r),document.cookie=function(e,t,n){var r=n||{};r.path=r.path||"/";var o=encodeURIComponent(t),a="".concat(e,"=").concat(o);if(r.maxAge>0){var i=r.maxAge-0;if(Number.isNaN(i))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(i))}if(r.domain){if(!Le.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(r.domain)}if(r.path){if(!Le.test(r.path))throw new TypeError("option path is invalid");a+="; Path=".concat(r.path)}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}(e,encodeURIComponent(t),o)}(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},je={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1).split("&"),o=0;o<r.length;o++){var a=r[o].indexOf("=");a>0&&r[o].substring(0,a)===e.lookupQuerystring&&(t=r[o].substring(a+1))}}return t}},Fe=null,Ue=function(){if(null!==Fe)return Fe;try{Fe="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){Fe=!1}return Fe},He={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&Ue()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&Ue()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Ve=null,Ke=function(){if(null!==Ve)return Ve;try{Ve="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){Ve=!1}return Ve},We={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&Ke()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&Ke()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},ze={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Ge={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},Xe={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},Je={name:"subdomain",lookup:function(e){var t="number"==typeof e.lookupFromSubdomainIndex?e.lookupFromSubdomainIndex+1:1,n="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}},qe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return l(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return xe.call(Me.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Be),this.addDetector(je),this.addDetector(He),this.addDetector(We),this.addDetector(ze),this.addDetector(Ge),this.addDetector(Xe),this.addDetector(Je)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}]),e}();qe.type="languageDetector";const Ye=crypto,Qe=e=>e instanceof CryptoKey,Ze=async(e,t)=>{const n=`SHA-${e.slice(-3)}`;return new Uint8Array(await Ye.subtle.digest(n,t))},$e=new TextEncoder,et=new TextDecoder,tt=2**32;function nt(...e){const t=e.reduce(((e,{length:t})=>e+t),0),n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(e,r),r+=e.length})),n}function rt(e,t,n){if(t<0||t>=tt)throw new RangeError(`value must be >= 0 and <= ${tt-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],n)}function ot(e){const t=Math.floor(e/tt),n=e%tt,r=new Uint8Array(8);return rt(r,t,0),rt(r,n,4),r}function at(e){const t=new Uint8Array(4);return rt(t,e),t}function it(e){return nt(at(e.length),e)}const st=e=>(e=>{let t=e;"string"==typeof t&&(t=$e.encode(t));const n=[];for(let e=0;e<t.length;e+=32768)n.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(n.join(""))})(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ct=e=>{let t=e;t instanceof Uint8Array&&(t=et.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n})(t)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};class lt extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}class ut extends lt{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=n}}class ft extends lt{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=n}}class dt extends lt{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class pt extends lt{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class ht extends lt{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class mt extends lt{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class yt extends lt{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class gt extends lt{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class vt extends lt{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class bt extends lt{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class wt extends lt{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class Et extends lt{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator;class St extends lt{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class Ct extends lt{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const _t=async e=>{var t,n;if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:r,keyUsages:o}=function(e){let t,n;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},n=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new pt(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},n=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},n=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},n=["deriveBits"];break;default:throw new pt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new pt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new pt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new pt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new pt('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}(e),a=[r,null!==(t=e.ext)&&void 0!==t&&t,null!==(n=e.key_ops)&&void 0!==n?n:o];if("PBKDF2"===r.name)return Ye.subtle.importKey("raw",ct(e.k),...a);const i={...e};return delete i.alg,delete i.use,Ye.subtle.importKey("jwk",i,...a)};function At(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}async function kt(e,t,n){var r;if(!At(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=n||(n=!0!==e.ext),n?_t({...e,alg:t,ext:null!==(r=e.ext)&&void 0!==r&&r}):ct(e.k);case"RSA":if(void 0!==e.oth)throw new pt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return _t({...e,alg:t});default:throw new pt('Unsupported "kty" (Key Type) Parameter value')}}const Ot=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if("number"!=typeof n||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function Pt(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function Nt(e,t){return e.name===t}function Tt(e){return parseInt(e.name.slice(4),10)}function It(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();e+=`one of ${t.join(", ")}, or ${n}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw new TypeError(e)}}function Rt(e,t,...n){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Nt(e.algorithm,"AES-GCM"))throw Pt("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Pt(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Nt(e.algorithm,"AES-KW"))throw Pt("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Pt(n,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Pt("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Nt(e.algorithm,"PBKDF2"))throw Pt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Nt(e.algorithm,"RSA-OAEP"))throw Pt("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(Tt(e.algorithm.hash)!==n)throw Pt(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}It(e,n)}function Dt(e,t,...n){if(n.length>2){const t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const xt=(e,...t)=>Dt("Key must be ",e,...t);function Mt(e,t,...n){return Dt(`Key for the ${e} algorithm must be `,t,...n)}const Lt=e=>Qe(e),Bt=["CryptoKey"],jt=async(e,t,n,r)=>{const o=await function(e,t,n){if(Qe(t))return function(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!Nt(e.algorithm,"HMAC"))throw Pt("HMAC");const n=parseInt(t.slice(2),10);if(Tt(e.algorithm.hash)!==n)throw Pt(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Nt(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Pt("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(Tt(e.algorithm.hash)!==n)throw Pt(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Nt(e.algorithm,"RSA-PSS"))throw Pt("RSA-PSS");const n=parseInt(t.slice(2),10);if(Tt(e.algorithm.hash)!==n)throw Pt(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw Pt("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!Nt(e.algorithm,"ECDSA"))throw Pt("ECDSA");const n=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==n)throw Pt(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}It(e,n)}(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(xt(t,...Bt));return Ye.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(xt(t,...Bt,"Uint8Array"))}(e,t,"verify");Ot(e,o);const a=function(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new pt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e,o.algorithm);try{return await Ye.subtle.verify(a,o,n,r)}catch(e){return!1}},Ft=(...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let n;for(const e of t){const t=Object.keys(e);if(n&&0!==n.size)for(const e of t){if(n.has(e))return!1;n.add(e)}else n=new Set(t)}return!0},Ut=(e,t,n)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?((e,t)=>{if(!(t instanceof Uint8Array)){if(!Lt(t))throw new TypeError(Mt(e,t,...Bt,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${Bt.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e,t):((e,t,n)=>{if(!Lt(t))throw new TypeError(Mt(e,t,...Bt));if("secret"===t.type)throw new TypeError(`${Bt.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===n&&"public"===t.type)throw new TypeError(`${Bt.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===n&&"public"===t.type)throw new TypeError(`${Bt.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===n&&"private"===t.type)throw new TypeError(`${Bt.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===n&&"private"===t.type)throw new TypeError(`${Bt.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,t,n)},Ht=function(e,t,n,r,o){if(void 0!==o.crit&&void 0===r.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r.crit)return new Set;if(!Array.isArray(r.crit)||0===r.crit.length||r.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;a=void 0!==n?new Map([...Object.entries(n),...t.entries()]):t;for(const t of r.crit){if(!a.has(t))throw new pt(`Extension Header Parameter "${t}" is not recognized`);if(void 0===o[t])throw new e(`Extension Header Parameter "${t}" is missing`);if(a.get(t)&&void 0===r[t])throw new e(`Extension Header Parameter "${t}" MUST be integrity protected`)}return new Set(r.crit)},Vt=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some((e=>"string"!=typeof e))))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};const Kt=e=>Math.floor(e.getTime()/1e3),Wt=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,zt=e=>{const t=Wt.exec(e);if(!t)throw new TypeError("Invalid time period format");const n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*n);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*n);case"day":case"days":case"d":return Math.round(86400*n);case"week":case"weeks":case"w":return Math.round(604800*n);default:return Math.round(31557600*n)}},Gt=e=>e.toLowerCase().replace(/^application\//,""),Xt=(e,t,n={})=>{const{typ:r}=n;if(r&&("string"!=typeof e.typ||Gt(e.typ)!==Gt(r)))throw new ut('unexpected "typ" JWT header value',"typ","check_failed");let o;try{o=JSON.parse(et.decode(t))}catch(e){}if(!At(o))throw new gt("JWT Claims Set must be a top-level JSON object");const{requiredClaims:a=[],issuer:i,subject:s,audience:c,maxTokenAge:l}=n;void 0!==l&&a.push("iat"),void 0!==c&&a.push("aud"),void 0!==s&&a.push("sub"),void 0!==i&&a.push("iss");for(const e of new Set(a.reverse()))if(!(e in o))throw new ut(`missing required "${e}" claim`,e,"missing");if(i&&!(Array.isArray(i)?i:[i]).includes(o.iss))throw new ut('unexpected "iss" claim value',"iss","check_failed");if(s&&o.sub!==s)throw new ut('unexpected "sub" claim value',"sub","check_failed");if(c&&(f="string"==typeof c?[c]:c,!("string"==typeof(u=o.aud)?f.includes(u):Array.isArray(u)&&f.some(Set.prototype.has.bind(new Set(u))))))throw new ut('unexpected "aud" claim value',"aud","check_failed");var u,f;let d;switch(typeof n.clockTolerance){case"string":d=zt(n.clockTolerance);break;case"number":d=n.clockTolerance;break;case"undefined":d=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:p}=n,h=Kt(p||new Date);if((void 0!==o.iat||l)&&"number"!=typeof o.iat)throw new ut('"iat" claim must be a number',"iat","invalid");if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw new ut('"nbf" claim must be a number',"nbf","invalid");if(o.nbf>h+d)throw new ut('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==o.exp){if("number"!=typeof o.exp)throw new ut('"exp" claim must be a number',"exp","invalid");if(o.exp<=h-d)throw new ft('"exp" claim timestamp check failed',"exp","check_failed")}if(l){const e=h-o.iat;if(e-d>("number"==typeof l?l:zt(l)))throw new ft('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-d)throw new ut('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return o};async function Jt(e,t,n){var r;const o=await async function(e,t,n){if(e instanceof Uint8Array&&(e=et.decode(e)),"string"!=typeof e)throw new yt("Compact JWS must be a string or Uint8Array");const{0:r,1:o,2:a,length:i}=e.split(".");if(3!==i)throw new yt("Invalid Compact JWS");const s=await async function(e,t,n){var r;if(!At(e))throw new yt("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new yt('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new yt("JWS Protected Header incorrect type");if(void 0===e.payload)throw new yt("JWS Payload missing");if("string"!=typeof e.signature)throw new yt("JWS Signature missing or incorrect type");if(void 0!==e.header&&!At(e.header))throw new yt("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{const t=ct(e.protected);o=JSON.parse(et.decode(t))}catch(e){throw new yt("JWS Protected Header is invalid")}if(!Ft(o,e.header))throw new yt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...o,...e.header};let i=!0;if(Ht(yt,new Map([["b64",!0]]),null==n?void 0:n.crit,o,a).has("b64")&&(i=o.b64,"boolean"!=typeof i))throw new yt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:s}=a;if("string"!=typeof s||!s)throw new yt('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=n&&Vt("algorithms",n.algorithms);if(c&&!c.has(s))throw new dt('"alg" (Algorithm) Header Parameter not allowed');if(i){if("string"!=typeof e.payload)throw new yt("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new yt("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof t&&(t=await t(o,e),l=!0),Ut(s,t,"verify");const u=nt($e.encode(null!==(r=e.protected)&&void 0!==r?r:""),$e.encode("."),"string"==typeof e.payload?$e.encode(e.payload):e.payload);let f,d;try{f=ct(e.signature)}catch(e){throw new yt("Failed to base64url decode the signature")}if(!await jt(s,t,f,u))throw new Ct;if(i)try{d=ct(e.payload)}catch(e){throw new yt("Failed to base64url decode the payload")}else d="string"==typeof e.payload?$e.encode(e.payload):e.payload;const p={payload:d};return void 0!==e.protected&&(p.protectedHeader=o),void 0!==e.header&&(p.unprotectedHeader=e.header),l?{...p,key:t}:p}({payload:o,protected:r,signature:a},t,n),c={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...c,key:s.key}:c}(e,t,n);if((null===(r=o.protectedHeader.crit)||void 0===r?void 0:r.includes("b64"))&&!1===o.protectedHeader.b64)throw new gt("JWTs MUST NOT use unencoded payload");const a={payload:Xt(o.protectedHeader,o.payload,n),protectedHeader:o.protectedHeader};return"function"==typeof t?{...a,key:o.key}:a}const qt=Ye.getRandomValues.bind(Ye);function Yt(e){var t;const n=null!==(t=null==e?void 0:e.modulusLength)&&void 0!==t?t:2048;if("number"!=typeof n||n<2048)throw new pt("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return n}async function Qt(e,t){return async function(e,t){var n;let r,o,a;switch(e){case"HS256":case"HS384":case"HS512":r=parseInt(e.slice(-3),10),o={name:"HMAC",hash:`SHA-${r}`,length:r},a=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r=parseInt(e.slice(-3),10),qt(new Uint8Array(r>>3));case"A128KW":case"A192KW":case"A256KW":r=parseInt(e.slice(1,4),10),o={name:"AES-KW",length:r},a=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10),o={name:"AES-GCM",length:r},a=["encrypt","decrypt"];break;default:throw new pt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Ye.subtle.generateKey(o,null!==(n=null==t?void 0:t.extractable)&&void 0!==n&&n,a)}(e,t)}function Zt(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new pt(`Unsupported JWE Algorithm: ${e}`)}}const $t=e=>qt(new Uint8Array(Zt(e)>>3)),en=(e,t)=>{if(t.length<<3!==Zt(e))throw new mt("Invalid Initialization Vector length")},tn=(e,t)=>{const n=e.byteLength<<3;if(n!==t)throw new mt(`Invalid Content Encryption Key length. Expected ${t} bits, got ${n} bits`)},nn=async(e,t,n,r,o)=>{if(!(Qe(n)||n instanceof Uint8Array))throw new TypeError(xt(n,...Bt,"Uint8Array"));switch(en(e,r),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&tn(n,parseInt(e.slice(-3),10)),async function(e,t,n,r,o){if(!(n instanceof Uint8Array))throw new TypeError(xt(n,"Uint8Array"));const a=parseInt(e.slice(1,4),10),i=await Ye.subtle.importKey("raw",n.subarray(a>>3),"AES-CBC",!1,["encrypt"]),s=await Ye.subtle.importKey("raw",n.subarray(0,a>>3),{hash:"SHA-"+(a<<1),name:"HMAC"},!1,["sign"]),c=new Uint8Array(await Ye.subtle.encrypt({iv:r,name:"AES-CBC"},i,t)),l=nt(o,r,c,ot(o.length<<3));return{ciphertext:c,tag:new Uint8Array((await Ye.subtle.sign("HMAC",s,l)).slice(0,a>>3))}}(e,t,n,r,o);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&tn(n,parseInt(e.slice(1,4),10)),async function(e,t,n,r,o){let a;n instanceof Uint8Array?a=await Ye.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):(Rt(n,e,"encrypt"),a=n);const i=new Uint8Array(await Ye.subtle.encrypt({additionalData:o,iv:r,name:"AES-GCM",tagLength:128},a,t)),s=i.slice(-16);return{ciphertext:i.slice(0,-16),tag:s}}(e,t,n,r,o);default:throw new pt("Unsupported JWE Content Encryption Algorithm")}},rn=async()=>{throw new pt('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},on=async()=>{throw new pt('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},an=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function sn(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function cn(e,t,n){if(Qe(e))return Rt(e,t,n),e;if(e instanceof Uint8Array)return Ye.subtle.importKey("raw",e,"AES-KW",!0,[n]);throw new TypeError(xt(e,...Bt,"Uint8Array"))}const ln=async(e,t,n)=>{const r=await cn(t,e,"wrapKey");sn(r,e);const o=await Ye.subtle.importKey("raw",n,...an);return new Uint8Array(await Ye.subtle.wrapKey("raw",o,r,"AES-KW"))},un=async(e,t,n)=>{const r=await cn(t,e,"unwrapKey");sn(r,e);const o=await Ye.subtle.unwrapKey("raw",n,r,"AES-KW",...an);return new Uint8Array(await Ye.subtle.exportKey("raw",o))};async function fn(e,t,n,r,o=new Uint8Array(0),a=new Uint8Array(0)){if(!Qe(e))throw new TypeError(xt(e,...Bt));if(Rt(e,"ECDH"),!Qe(t))throw new TypeError(xt(t,...Bt));Rt(t,"ECDH","deriveBits");const i=nt(it($e.encode(n)),it(o),it(a),at(r));let s;return s="X25519"===e.algorithm.name?256:"X448"===e.algorithm.name?448:Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3,async function(e,t,n){const r=Math.ceil((t>>3)/32),o=new Uint8Array(32*r);for(let t=0;t<r;t++){const r=new Uint8Array(4+e.length+n.length);r.set(at(t+1)),r.set(e,4),r.set(n,4+e.length),o.set(await Ze("sha256",r),32*t)}return o.slice(0,t>>3)}(new Uint8Array(await Ye.subtle.deriveBits({name:e.algorithm.name,public:e},t,s)),r,i)}function dn(e){if(!Qe(e))throw new TypeError(xt(e,...Bt));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||"X25519"===e.algorithm.name||"X448"===e.algorithm.name}async function pn(e,t,n,r){!function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new mt("PBES2 Salt Input must be 8 or more octets")}(e);const o=function(e,t){return nt($e.encode(e),new Uint8Array([0]),t)}(t,e),a=parseInt(t.slice(13,16),10),i={hash:`SHA-${t.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:o},s={length:a,name:"AES-KW"},c=await function(e,t){if(e instanceof Uint8Array)return Ye.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Qe(e))return Rt(e,t,"deriveBits","deriveKey"),e;throw new TypeError(xt(e,...Bt,"Uint8Array"))}(r,t);if(c.usages.includes("deriveBits"))return new Uint8Array(await Ye.subtle.deriveBits(i,c,a));if(c.usages.includes("deriveKey"))return Ye.subtle.deriveKey(i,c,s,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}function hn(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new pt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function mn(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new pt(`Unsupported JWE Algorithm: ${e}`)}}const yn=e=>qt(new Uint8Array(mn(e)>>3));async function gn(e){return(async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:st(e)};if(!Qe(e))throw new TypeError(xt(e,...Bt,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:n,alg:r,use:o,...a}=await Ye.subtle.exportKey("jwk",e);return a})(e)}const vn=async(e,t,n,r,o,a)=>{if(!(Qe(t)||t instanceof Uint8Array))throw new TypeError(xt(t,...Bt,"Uint8Array"));switch(en(e,r),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&tn(t,parseInt(e.slice(-3),10)),async function(e,t,n,r,o,a){if(!(t instanceof Uint8Array))throw new TypeError(xt(t,"Uint8Array"));const i=parseInt(e.slice(1,4),10),s=await Ye.subtle.importKey("raw",t.subarray(i>>3),"AES-CBC",!1,["decrypt"]),c=await Ye.subtle.importKey("raw",t.subarray(0,i>>3),{hash:"SHA-"+(i<<1),name:"HMAC"},!1,["sign"]),l=nt(a,r,n,ot(a.length<<3)),u=new Uint8Array((await Ye.subtle.sign("HMAC",c,l)).slice(0,i>>3));let f,d;try{f=((e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const n=e.length;let r=0,o=-1;for(;++o<n;)r|=e[o]^t[o];return 0===r})(o,u)}catch(e){}if(!f)throw new ht;try{d=new Uint8Array(await Ye.subtle.decrypt({iv:r,name:"AES-CBC"},s,n))}catch(e){}if(!d)throw new ht;return d}(e,t,n,r,o,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&tn(t,parseInt(e.slice(1,4),10)),async function(e,t,n,r,o,a){let i;t instanceof Uint8Array?i=await Ye.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(Rt(t,e,"decrypt"),i=t);try{return new Uint8Array(await Ye.subtle.decrypt({additionalData:a,iv:r,name:"AES-GCM",tagLength:128},i,nt(n,o)))}catch(e){throw new ht}}(e,t,n,r,o,a);default:throw new pt("Unsupported JWE Content Encryption Algorithm")}},bn=Symbol();class wn{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new mt("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Ft(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new mt("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Ht(mt,new Map,null==t?void 0:t.crit,this._protectedHeader,n),void 0!==n.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new mt('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==n.zip)throw new pt('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:r,enc:o}=n;if("string"!=typeof r||!r)throw new mt('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof o||!o)throw new mt('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let a,i,s,c,l,u,f;if("dir"===r){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===r&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let n;({cek:i,encryptedKey:a,parameters:n}=await async function(e,t,n,r,o={}){let a,i,s;switch(Ut(e,n,"encrypt"),e){case"dir":s=n;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!dn(n))throw new pt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:c,apv:l}=o;let{epk:u}=o;u||(u=(await async function(e){if(!Qe(e))throw new TypeError(xt(e,...Bt));return Ye.subtle.generateKey(e.algorithm,!0,["deriveBits"])}(n)).privateKey);const{x:f,y:d,crv:p,kty:h}=await gn(u),m=await fn(n,u,"ECDH-ES"===e?t:e,"ECDH-ES"===e?mn(t):parseInt(e.slice(-5,-2),10),c,l);if(i={epk:{x:f,crv:p,kty:h}},"EC"===h&&(i.epk.y=d),c&&(i.apu=st(c)),l&&(i.apv=st(l)),"ECDH-ES"===e){s=m;break}s=r||yn(t);const y=e.slice(-6);a=await ln(y,m,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=r||yn(t),a=await(async(e,t,n)=>{if(!Qe(t))throw new TypeError(xt(t,...Bt));if(Rt(t,e,"encrypt","wrapKey"),Ot(e,t),t.usages.includes("encrypt"))return new Uint8Array(await Ye.subtle.encrypt(hn(e),t,n));if(t.usages.includes("wrapKey")){const r=await Ye.subtle.importKey("raw",n,...an);return new Uint8Array(await Ye.subtle.wrapKey("raw",r,t,hn(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')})(e,n,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=r||yn(t);const{p2c:c,p2s:l}=o;({encryptedKey:a,...i}=await(async(e,t,n,r=2048,o=qt(new Uint8Array(16)))=>{const a=await pn(o,e,r,t);return{encryptedKey:await ln(e.slice(-6),a,n),p2c:r,p2s:st(o)}})(e,n,s,c,l));break}case"A128KW":case"A192KW":case"A256KW":s=r||yn(t),a=await ln(e,n,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=r||yn(t);const{iv:c}=o;({encryptedKey:a,...i}=await async function(e,t,n,r){const o=e.slice(0,7);r||(r=$t(o));const{ciphertext:a,tag:i}=await nn(o,n,t,r,new Uint8Array(0));return{encryptedKey:a,iv:st(r),tag:st(i)}}(e,n,s,c));break}default:throw new pt('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:i}}(r,o,e,this._cek,this._keyManagementParameters)),n&&(t&&bn in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}if(this._iv||(this._iv=$t(o)),c=this._protectedHeader?$e.encode(st(JSON.stringify(this._protectedHeader))):$e.encode(""),this._aad?(l=st(this._aad),s=nt(c,$e.encode("."),$e.encode(l))):s=c,"DEF"===n.zip){const e=await((null==t?void 0:t.deflateRaw)||on)(this._plaintext);({ciphertext:u,tag:f}=await nn(o,e,i,this._iv,s))}else({ciphertext:u,tag:f}=await nn(o,this._plaintext,i,this._iv,s));const d={ciphertext:st(u),iv:st(this._iv),tag:st(f)};return a&&(d.encrypted_key=st(a)),l&&(d.aad=l),this._protectedHeader&&(d.protected=et.decode(c)),this._sharedUnprotectedHeader&&(d.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(d.header=this._unprotectedHeader),d}}class En{constructor(e){this._flattened=new wn(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const n=await this._flattened.encrypt(e,t);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}class Sn{constructor(e){if(!At(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return this._payload="number"==typeof e?{...this._payload,nbf:e}:{...this._payload,nbf:Kt(new Date)+zt(e)},this}setExpirationTime(e){return this._payload="number"==typeof e?{...this._payload,exp:e}:{...this._payload,exp:Kt(new Date)+zt(e)},this}setIssuedAt(e){return this._payload=void 0===e?{...this._payload,iat:Kt(new Date)}:{...this._payload,iat:e},this}}class Cn extends Sn{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const n=new En($e.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(e,t)}}const _n=(e,t)=>{if("string"!=typeof e||!e)throw new vt(`${t} missing or invalid`)};const An=ct;function kn(e){let t;if("string"==typeof e){const n=e.split(".");3!==n.length&&5!==n.length||([t]=n)}else if("object"==typeof e&&e){if(!("protected"in e))throw new TypeError("Token does not contain a Protected Header");t=e.protected}try{if("string"!=typeof t||!t)throw new Error;const e=JSON.parse(et.decode(An(t)));if(!At(e))throw new Error;return e}catch(e){throw new TypeError("Invalid Token or Protected Header formatting")}}const On=async function(e,t,n,r,o){switch(Ut(e,t,"decrypt"),e){case"dir":if(void 0!==n)throw new mt("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==n)throw new mt("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!At(r.epk))throw new mt('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!dn(t))throw new pt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const o=await kt(r.epk,e);let a,i;if(void 0!==r.apu){if("string"!=typeof r.apu)throw new mt('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{a=ct(r.apu)}catch(e){throw new mt("Failed to base64url decode the apu")}}if(void 0!==r.apv){if("string"!=typeof r.apv)throw new mt('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{i=ct(r.apv)}catch(e){throw new mt("Failed to base64url decode the apv")}}const s=await fn(o,t,"ECDH-ES"===e?r.enc:e,"ECDH-ES"===e?mn(r.enc):parseInt(e.slice(-5,-2),10),a,i);if("ECDH-ES"===e)return s;if(void 0===n)throw new mt("JWE Encrypted Key missing");return un(e.slice(-6),s,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===n)throw new mt("JWE Encrypted Key missing");return(async(e,t,n)=>{if(!Qe(t))throw new TypeError(xt(t,...Bt));if(Rt(t,e,"decrypt","unwrapKey"),Ot(e,t),t.usages.includes("decrypt"))return new Uint8Array(await Ye.subtle.decrypt(hn(e),t,n));if(t.usages.includes("unwrapKey")){const r=await Ye.subtle.unwrapKey("raw",n,t,hn(e),...an);return new Uint8Array(await Ye.subtle.exportKey("raw",r))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')})(e,t,n);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(void 0===n)throw new mt("JWE Encrypted Key missing");if("number"!=typeof r.p2c)throw new mt('JOSE Header "p2c" (PBES2 Count) missing or invalid');const a=(null==o?void 0:o.maxPBES2Count)||1e4;if(r.p2c>a)throw new mt('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof r.p2s)throw new mt('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let i;try{i=ct(r.p2s)}catch(e){throw new mt("Failed to base64url decode the p2s")}return(async(e,t,n,r,o)=>{const a=await pn(o,e,r,t);return un(e.slice(-6),a,n)})(e,t,n,r.p2c,i)}case"A128KW":case"A192KW":case"A256KW":if(void 0===n)throw new mt("JWE Encrypted Key missing");return un(e,t,n);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(void 0===n)throw new mt("JWE Encrypted Key missing");if("string"!=typeof r.iv)throw new mt('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof r.tag)throw new mt('JOSE Header "tag" (Authentication Tag) missing or invalid');let o,a;try{o=ct(r.iv)}catch(e){throw new mt("Failed to base64url decode the iv")}try{a=ct(r.tag)}catch(e){throw new mt("Failed to base64url decode the tag")}return async function(e,t,n,r,o){const a=e.slice(0,7);return vn(a,t,n,r,o,new Uint8Array(0))}(e,t,n,o,a)}default:throw new pt('Invalid or unsupported "alg" (JWE Algorithm) header value')}};async function Pn(e,t,n){const r=await async function(e,t,n){if(e instanceof Uint8Array&&(e=et.decode(e)),"string"!=typeof e)throw new mt("Compact JWE must be a string or Uint8Array");const{0:r,1:o,2:a,3:i,4:s,length:c}=e.split(".");if(5!==c)throw new mt("Invalid Compact JWE");const l=await async function(e,t,n){var r;if(!At(e))throw new mt("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new mt("JOSE Header missing");if("string"!=typeof e.iv)throw new mt("JWE Initialization Vector missing or incorrect type");if("string"!=typeof e.ciphertext)throw new mt("JWE Ciphertext missing or incorrect type");if("string"!=typeof e.tag)throw new mt("JWE Authentication Tag missing or incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new mt("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new mt("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new mt("JWE AAD incorrect type");if(void 0!==e.header&&!At(e.header))throw new mt("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!At(e.unprotected))throw new mt("JWE Per-Recipient Unprotected Header incorrect type");let o;if(e.protected)try{const t=ct(e.protected);o=JSON.parse(et.decode(t))}catch(e){throw new mt("JWE Protected Header is invalid")}if(!Ft(o,e.header,e.unprotected))throw new mt("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...o,...e.header,...e.unprotected};if(Ht(mt,new Map,null==n?void 0:n.crit,o,a),void 0!==a.zip){if(!o||!o.zip)throw new mt('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==a.zip)throw new pt('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:i,enc:s}=a;if("string"!=typeof i||!i)throw new mt("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof s||!s)throw new mt("missing JWE Encryption Algorithm (enc) in JWE Header");const c=n&&Vt("keyManagementAlgorithms",n.keyManagementAlgorithms),l=n&&Vt("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(c&&!c.has(i))throw new dt('"alg" (Algorithm) Header Parameter not allowed');if(l&&!l.has(s))throw new dt('"enc" (Encryption Algorithm) Header Parameter not allowed');let u;if(void 0!==e.encrypted_key)try{u=ct(e.encrypted_key)}catch(e){throw new mt("Failed to base64url decode the encrypted_key")}let f,d,p,h=!1;"function"==typeof t&&(t=await t(o,e),h=!0);try{f=await On(i,t,u,a,n)}catch(e){if(e instanceof TypeError||e instanceof mt||e instanceof pt)throw e;f=yn(s)}try{d=ct(e.iv)}catch(e){throw new mt("Failed to base64url decode the iv")}try{p=ct(e.tag)}catch(e){throw new mt("Failed to base64url decode the tag")}const m=$e.encode(null!==(r=e.protected)&&void 0!==r?r:"");let y,g;y=void 0!==e.aad?nt(m,$e.encode("."),$e.encode(e.aad)):m;try{g=ct(e.ciphertext)}catch(e){throw new mt("Failed to base64url decode the ciphertext")}let v=await vn(s,f,g,d,p,y);"DEF"===a.zip&&(v=await((null==n?void 0:n.inflateRaw)||rn)(v));const b={plaintext:v};if(void 0!==e.protected&&(b.protectedHeader=o),void 0!==e.aad)try{b.additionalAuthenticatedData=ct(e.aad)}catch(e){throw new mt("Failed to base64url decode the aad")}return void 0!==e.unprotected&&(b.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(b.unprotectedHeader=e.header),h?{...b,key:t}:b}({ciphertext:i,iv:a||void 0,protected:r||void 0,tag:s||void 0,encrypted_key:o||void 0},t,n),u={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return"function"==typeof t?{...u,key:l.key}:u}(e,t,n),o=Xt(r.protectedHeader,r.plaintext,n),{protectedHeader:a}=r;if(void 0!==a.iss&&a.iss!==o.iss)throw new ut('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==a.sub&&a.sub!==o.sub)throw new ut('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(o.aud))throw new ut('replicated "aud" claim header parameter mismatch',"aud","mismatch");const i={payload:o,protectedHeader:a};return"function"==typeof t?{...i,key:r.key}:i}function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Nn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Nn(o)?o:String(o)),r)}var o}var In=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscriberList={}}var t,n;return t=e,n=[{key:"subscribe",value:function(e,t){this.subscriberList[e]=t}},{key:"sendMessage",value:function(e,t){if(Array.isArray(e)||(e=[e]),"broadcast"===e[0])this.subscriberList.forEach((function(e,n){e({type:"broadcast",message:t})}));else for(var n in this.subscriberList)e.indexOf(n)>=0&&this.subscriberList[n](t)}}],n&&Tn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Rn=new In;function Dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var xn=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=Dn({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),i=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(r[s]=t.read(i,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",Dn({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Dn({},this.attributes,t))},withConverter:function(t){return e(Dn({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function Mn(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(Ln)}function Ln(e){return At(e)}class Bn{constructor(e){if(this._cached=new WeakMap,!Mn(e))throw new bt("JSON Web Key Set malformed");var t;this._jwks=(t=e,"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t)))}async getKey(e,t){const{alg:n,kid:r}={...e,...null==t?void 0:t.header},o=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new pt('Unsupported "alg" value for a JSON Web Key Set')}}(n),a=this._jwks.keys.filter((e=>{let t=o===e.kty;if(t&&"string"==typeof r&&(t=r===e.kid),t&&"string"==typeof e.alg&&(t=n===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===n&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(n){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),{0:i,length:s}=a;if(0===s)throw new wt;if(1!==s){const e=new Et,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(const e of a)try{yield await jn(t,e,n)}catch(e){continue}},e}return jn(this._cached,i,n)}}async function jn(e,t,n){const r=e.get(t)||e.set(t,{}).get(t);if(void 0===r[n]){const e=await kt({...t,ext:!0},n);if(e instanceof Uint8Array||"public"!==e.type)throw new bt("JSON Web Key Set members must be public keys");r[n]=e}return r[n]}class Fn extends Bn{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:null==t?void 0:t.agent,headers:null==t?void 0:t.headers},this._timeoutDuration="number"==typeof(null==t?void 0:t.timeoutDuration)?null==t?void 0:t.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==t?void 0:t.cooldownDuration)?null==t?void 0:t.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==t?void 0:t.cacheMaxAge)?null==t?void 0:t.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(e,t)}catch(n){if(n instanceof wt&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw n}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(async(e,t,n)=>{let r,o,a=!1;"function"==typeof AbortController&&(r=new AbortController,o=setTimeout((()=>{a=!0,r.abort()}),t));const i=await fetch(e.href,{signal:r?r.signal:void 0,redirect:"manual",headers:n.headers}).catch((e=>{if(a)throw new St;throw e}));if(void 0!==o&&clearTimeout(o),200!==i.status)throw new lt("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await i.json()}catch(e){throw new lt("Failed to parse the JSON Web Key Set HTTP response as JSON")}})(this._url,this._timeoutDuration,this._options).then((e=>{if(!Mn(e))throw new bt("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0})).catch((e=>{throw this._pendingFetch=void 0,e}))),await this._pendingFetch}}function Un(e){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Un(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Un(o)?o:String(o)),r)}var o}var Vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"init",value:function(e){var t=this;this.refreshToken=!1,this.accessToken=!1,this.idToken=!1,this.changeStatusCb=[],this.connected=!1,this.parameters={},this.jwks=!1,this.pkce=!1,"/"!==window.location.pathname?this.localStorageKey=e.storagePrefix+"-"+window.btoa(unescape(encodeURIComponent(window.location.pathname))).replace(/\=+$/m,""):this.localStorageKey=e.storagePrefix,this.refreshTimeout=!1,e&&(this.parameters.storageType=e.storageType||"none",this.parameters.responseType=e.responseType||"code",this.parameters.scope=e.scope||"",this.parameters.openidConfigUrl=e.openidConfigUrl||"",this.parameters.authUrl=e.authUrl||"",this.parameters.tokenUrl=e.tokenUrl||"",this.parameters.clientId=e.clientId||"",this.parameters.clientPassword=e.clientPassword||"",this.parameters.redirectUri=e.redirectUri||"",this.parameters.userinfoUrl=e.userinfoUrl||"",this.parameters.usePkce=!!e.usePkce,this.parameters.refreshTokenLoop=!!e.refreshTokenLoop,e.changeStatusCb&&this.changeStatusCb.push(e.changeStatusCb)),this.parameters.openidConfigUrl?$.ajax({type:"GET",url:this.parameters.openidConfigUrl,success:function(e){t.parameters.authUrl=e.authorization_endpoint,t.parameters.tokenUrl=e.token_endpoint,t.parameters.userinfoUrl=e.userinfo_endpoint,e.jwks_uri&&(t.jwks=function(e,t){const n=new Fn(e,void 0);return async function(e,t){return n.getKey(e,t)}}(new URL(e.jwks_uri))),t.parseInitialUrl()},error:function(e){t.broadcastMessage("error")}}):this.parseInitialUrl()}},{key:"setParameter",value:function(e,t){this.parameters[e]=t}},{key:"getParameter",value:function(e){return!!this.parameters[e]&&this.parameters[e]}},{key:"parseInitialUrl",value:function(){var e,t,n=this;if("code"===this.parameters.responseType){var r=this.getCodeFromQuery();if(r)this.getRefreshTokenFromCode(r,(function(e){e?(n.refreshToken=e.refresh_token,n.storeRefreshToken(n.refreshToken),e.access_token?(n.accessToken={access_token:e.access_token,iat:e.iat,expires_in:parseInt(e.expires_in)},n.storeAccessToken(n.accessToken),e.id_token&&(n.idToken=e.id_token,n.storeIDToken(n.idToken)),n.broadcastMessage("connected",n.accessToken.access_token,n.accessToken.expires_in),n.getConnectedProfile((function(e,t){e?n.broadcastMessage("profile",null,null,t):n.broadcastMessage("profile",null,null,!1)})),n.refreshTokenLoop(e.refresh_token,n.accessToken.expires_in)):n.broadcastMessage("disconnected")):n.broadcastMessage("disconnected")})),window.history.pushState(null,"",document.location.href.split("?")[0]);else if((e=this.getStoredData())&&e.accessToken&&this.isTokenValid(e.accessToken)){this.accessToken=e.accessToken;var o=new Date,a=Math.floor((1e3*(this.accessToken.iat+this.accessToken.expires_in)-o.getTime())/1e3);if(this.broadcastMessage("connected",this.accessToken.access_token,a),this.getConnectedProfile((function(e,t){e?n.broadcastMessage("profile",null,null,t):n.broadcastMessage("profile",null,null,!1)})),e.refreshToken){o=new Date;var i=Math.floor((1e3*(this.accessToken.iat+this.accessToken.expires_in)-o.getTime())/1e3);this.refreshTokenLoop(e.refreshToken,i)}}else e&&e.refreshToken?(this.accessToken=!1,this.refreshToken=e.refreshToken,this.storeAccessToken(!1),this.executeRefreshToken(e.refreshToken,(function(t,r){if(t){var o=new Date;n.accessToken=r,n.storeAccessToken(r);var a=Math.floor((1e3*(r.iat+r.expires_in)-o.getTime())/1e3);n.refreshTokenLoop(e.refreshToken,a),n.broadcastMessage("connected",r.access_token,a),n.getConnectedProfile((function(e,t){e?n.broadcastMessage("profile",null,null,t):n.broadcastMessage("profile",null,null,!1)}))}else n.broadcastMessage("disconnected"),n.storeIDToken(!1)}))):this.broadcastMessage("disconnected")}else{if(this.parameters.responseType.search("token")>-1)if(t=this.getAccessTokenFromFragment())this.accessToken=t,this.storeAccessToken(t),this.broadcastMessage("connected",this.accessToken.access_token,this.accessToken.expires_in);else if((e=this.getStoredData())&&e.accessToken&&this.isTokenValid(e.accessToken)){o=new Date,this.accessToken=e.accessToken;var s=Math.floor((1e3*(e.accessToken.iat+e.accessToken.expires_in)-o.getTime())/1e3);this.broadcastMessage("connected",this.accessToken.access_token,s)}else this.broadcastMessage("disconnected"),this.accessToken=!1,this.storeAccessToken(!1),this.storeIDToken(!1);this.parameters.responseType.search("id_token")>-1&&(this.getQueryParams(document.location.hash).id_token?(this.idToken=this.getQueryParams(document.location.hash).id_token,this.storeIDToken(this.idToken)):(e=this.getStoredData())&&e.IDToken?this.idToken=e.IDToken:this.idToken=!1),this.getConnectedProfile((function(e,t){e?n.broadcastMessage("profile",null,null,t):n.broadcastMessage("profile",null,null,!1)}))}}},{key:"getQueryParams",value:function(e){e=e.split("+").join(" ");var t,n={},r=/[#&]?([^=]+)=([^&]*)/g;for(t=r.exec(e);t;)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]),t=r.exec(e);return n}},{key:"getAccessTokenFromFragment",value:function(){var e=this.getQueryParams(document.location.hash),t=new Date;return!(!e.access_token||!e.expires_in)&&{access_token:e.access_token,expires_in:parseInt(e.expires_in),iat:Math.floor(t.getTime()/1e3)}}},{key:"getCodeFromQuery",value:function(){return this.getQueryParams(document.location.search.substring(1)).code||!1}},{key:"refresh",value:function(e){var t=this;"code"===this.parameters.responseType&&this.refreshToken?this.executeRefreshToken(this.refreshToken,(function(n,r){n&&(t.accessToken=r,t.storeAccessToken(r),t.refreshTokenLoop(t.refreshToken,t.accessToken.expires_in),t.broadcastMessage("refresh",r.access_token,r.expires_in),e(r.access_token))})):e(!1)}},{key:"getStatus",value:function(){return this.accessToken&&this.isTokenValid(this.accessToken)?"connected":(this.accessToken=!1,"disconnected")}},{key:"storeAccessToken",value:function(e){var t=this.getStoredData();return t||(t={}),t.accessToken=e,"local"===this.parameters.storageType?localStorage.setItem(this.localStorageKey,JSON.stringify(t)):"cookie"===this.parameters.storageType&&xn.set(this.localStorageKey,JSON.stringify(t))}},{key:"storeIDToken",value:function(e){var t=this.getStoredData();return t||(t={}),t.IDToken=e,"local"===this.parameters.storageType?localStorage.setItem(this.localStorageKey,JSON.stringify(t)):"cookie"===this.parameters.storageType&&xn.set(this.localStorageKey,JSON.stringify(t))}},{key:"storeRefreshToken",value:function(e){var t=this.getStoredData();return t||(t={}),t.refreshToken=e,"local"===this.parameters.storageType?localStorage.setItem(this.localStorageKey,JSON.stringify(t)):"cookie"===this.parameters.storageType&&xn.set(this.localStorageKey,JSON.stringify(t))}},{key:"storeNonce",value:function(e){var t=this.getStoredData();return t||(t={}),t.nonce=e,"local"===this.parameters.storageType?localStorage.setItem(this.localStorageKey,JSON.stringify(t)):"cookie"===this.parameters.storageType&&xn.set(this.localStorageKey,JSON.stringify(t))}},{key:"storePkce",value:function(e){var t=this.getStoredData();return t||(t={}),t.pkce=e,"local"===this.parameters.storageType?localStorage.setItem(this.localStorageKey,JSON.stringify(t)):"cookie"===this.parameters.storageType&&xn.set(this.localStorageKey,JSON.stringify(t))}},{key:"makeRandomString",value:function(e){var t=new Uint8Array(e),n="";window.crypto.getRandomValues(t);for(var r=0;r<e;r++){for(;t[r]>=62;){var o=new Uint8Array(1);window.crypto.getRandomValues(o),t[r]=o[0]}n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(t[r])}return n}},{key:"getStoredData",value:function(){if("local"===this.parameters.storageType)return JSON.parse(localStorage.getItem(this.localStorageKey))||{};if("cookie"!==this.parameters.storageType)return{};try{return JSON.parse(xn.get(this.localStorageKey))||{}}catch(e){return{}}}},{key:"onChangeStatus",value:function(e){this.changeStatusCb.push(e)}},{key:"isTokenValid",value:function(e){if(e){var t=new Date;return 1e3*(e.iat+e.expires_in)>t.getTime()}return!1}},{key:"getRefreshTokenFromCode",value:function(e,t){var n=this,r={grant_type:"authorization_code",client_id:this.parameters.clientId,redirect_uri:this.parameters.redirectUri,code:e},o=this.getStoredData();this.parameters.usePkce&&o.pkce&&(r.code_verifier=o.pkce),$.ajax({type:"POST",url:this.parameters.tokenUrl,data:r,success:function(e,n,r){t(e)},error:function(e){403===e.status&&(n.refreshToken=!1),n.accessToken=!1,t(!1)}})}},{key:"refreshTokenLoop",value:function(e,t){var n=this;this.parameters.refreshTokenLoop&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout((function(){n.executeRefreshToken(e,(function(t,r){if(t){var o=new Date,a=Math.floor((1e3*(r.iat+r.expires_in)-o.getTime())/1e3);n.refreshTokenLoop(e,a)}}))}),1e3*(t-60)))}},{key:"runRefreshToken",value:function(e){return this.getStoredData().refreshToken?this.executeRefreshToken(this.getStoredData().refreshToken,e):$.Deferred().reject("disconnected")}},{key:"executeRefreshToken",value:function(e,t){var n=this;return $.ajax({type:"POST",url:this.parameters.tokenUrl,data:{grant_type:"refresh_token",refresh_token:e},success:function(e,r,o){n.accessToken=e.access_token,n.storeAccessToken(e),n.broadcastMessage("refresh",e.access_token,e.expires_in),t&&t(!0,e)},error:function(e){403!==e.status&&400!==e.status||(n.refreshToken=!1),n.accessToken=!1,n.storeAccessToken(!1),n.storeRefreshToken(!1),0===e.readyState?n.broadcastMessage("network error"):n.broadcastMessage("disconnected"),t&&t(!1)}}).then((function(e){return{token:e.access_token,expires_in:e.expires_in}}))}},{key:"broadcastMessage",value:function(e,t,n,r){for(var o in this.changeStatusCb)this.changeStatusCb[o](e,t,n,r)}},{key:"getConnectedProfile",value:function(e){var t=this;this.getStoredData().IDToken&&this.jwks?Jt(this.getStoredData().IDToken,this.jwks).then((function(t){e&&e(!0,t.payload)})).catch((function(n){t.storeIDToken(!1),"ERR_JWT_EXPIRED"===n.code?$.ajax({type:"GET",url:t.parameters.userinfoUrl,headers:{Authorization:"Bearer "+t.accessToken.access_token},success:function(t){e&&e(!0,t)},error:function(n){t.accessToken=!1,t.storeAccessToken(!1),t.storeRefreshToken(!1),e&&e(!0,"error")}}):(t.accessToken=!1,t.storeAccessToken(!1),t.storeRefreshToken(!1),e&&e(!0,"error"))})):this.parameters.userinfoUrl&&this.accessToken?$.ajax({type:"GET",url:this.parameters.userinfoUrl,headers:{Authorization:"Bearer "+this.accessToken.access_token},success:function(t){e&&e(!0,t)},error:function(n){t.accessToken=!1,t.storeAccessToken(!1),t.storeRefreshToken(!1),t.storeIDToken(!1),e&&e(!0,"error")}}):e&&e(!1)}},{key:"connect",value:function(){var e=this;this.storeAccessToken(!1),this.storeRefreshToken(!1),this.storeIDToken(!1);var t=this.getStoredData();if(t&&this.isTokenValid(t.accessToken)){var n=new Date,r=Math.floor((1e3*(t.iat+t.expires_in)-n.getTime())/1e3);this.broadcastMessage("connected",t.accessToken.access_token,r),this.getConnectedProfile((function(t,n){t?e.broadcastMessage("profile",null,null,n):e.broadcastMessage("profile",null,null,!1)}))}else{t.accessToken=!1;var o=this.makeRandomString(16);if(this.storeAccessToken(!1),this.storeNonce(o),this.parameters.usePkce&&"code"===this.parameters.responseType){var a=this.makeRandomString(64);this.storePkce(a);var i=new TextEncoder,s=this.parameters.scope;-1===s.search("openid")&&(s+=" openid"),crypto.subtle.digest("SHA-256",i.encode(a)).then((function(t){var n=e.base64UrlArrayBuffer(t);document.location=e.parameters.authUrl+"?response_type="+e.parameters.responseType+"&client_id="+e.parameters.clientId+"&redirect_uri="+e.parameters.redirectUri+"&scope="+s+"&nonce="+o+"&code_challenge_method=S256&code_challenge="+n}))}else{var c=this.parameters.scope;this.parameters.responseType.search("id_token")>-1&&-1===c.search("openid")&&(c+=" openid"),document.location=this.parameters.authUrl+"?response_type="+this.parameters.responseType+"&client_id="+this.parameters.clientId+"&redirect_uri="+this.parameters.redirectUri+"&scope="+c+"&nonce="+o}}}},{key:"disconnect",value:function(){clearTimeout(this.refreshTimeout),"local"===this.parameters.storageType?localStorage.removeItem(this.localStorageKey):"cookie"===this.parameters.storageType&&xn.remove(this.localStorageKey),this.refreshToken=!1,this.accessToken=!1,this.storeAccessToken(!1),this.storeRefreshToken(!1),this.storeIDToken(!1),this.broadcastMessage("disconnected")}},{key:"base64UrlArrayBuffer",value:function(e){for(var t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",o=new Uint8Array(e),a=o.byteLength,i=a%3,s=a-i,c=0;c<s;c+=3)n+=r[(16515072&(t=o[c]<<16|o[c+1]<<8|o[c+2]))>>18]+r[(258048&t)>>12]+r[(4032&t)>>6]+r[63&t];return 1==i?n+=r[(252&(t=o[s]))>>2]+r[(3&t)<<4]:2==i&&(n+=r[(64512&(t=o[s]<<8|o[s+1]))>>10]+r[(1008&t)>>4]+r[(15&t)<<2]),n}}],n&&Hn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Kn=new Vn;function Wn(e){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Wn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Wn(o)?o:String(o)),r)}var o}var Gn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiPrefix="",this.token="",this.token_expires_at=0,this.signJwk=!1,this.counter=0}var t,n;return t=e,n=[{key:"setConfig",value:function(e){this.apiPrefix=e}},{key:"setToken",value:function(e,t){this.token=e,this.token_expires_at=t}},{key:"setSignJwk",value:function(e){this.signJwk=e}},{key:"getConfig",value:function(e){return this.apiPrefix}},{key:"request",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json; charset=utf-8";if(this.counter<=100){this.counter++;var a=new Date;return!this.token||1e3*this.token_expires_at>a.getTime()?(this.counter--,this.APIRequestExecute(e,n,r,o)):(this.counter--,Kn.runRefreshToken().then((function(i){return t.token=i.token,t.token_expires_at=a.getTime()/1e3+i.expires_in,t.APIRequestExecute(e,n,r,o)})).fail((function(){Rn.sendMessage("App",{action:"sessionTimeout"})})))}return $.Deferred().reject("error too busy")}},{key:"APIRequestExecute",value:function(e,t,n,r){var o={Authorization:"Bearer "+this.token,accept:r},a=null,i=n?JSON.stringify(n):null;return n&&(a="application/json; charset=utf-8"),$.ajax({method:t,url:e,data:i,contentType:a,headers:o}).fail((function(e){401===e.status&&Rn.sendMessage("App",{action:"sessionTimeout"})}))}},{key:"requestSigned",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request(e,n,r).then((function(e,n,r){return"application/jwt"===r.getResponseHeader("content-type")?t.signJwk?Jt(e,t.signJwk):$.Deferred().reject("No public key to verify signature"):$.Deferred().reject("invalid content-type")}))}}],n&&zn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Xn=new Gn;function Jn(e){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(e)}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Jn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Jn(o)?o:String(o)),r)}var o}var Yn=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=0,this.changeCallback=[],window.onhashchange=function(){t.changeCallback.forEach((function(e){e(t.getCurrentRoute())}))}}var t,n;return t=e,(n=[{key:"addChangeRouteCallback",value:function(e){this.changeCallback.push(e)}},{key:"getCurrentRoute",value:function(){var e=window.location.hash;return!!e&&e.substring(1)}},{key:"addRoute",value:function(e){history.pushState({id:"state-"+this.state++},"","#"+e)}}])&&qn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Qn=new Yn;function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Zn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Zn(o)?o:String(o)),r)}var o}var er=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageType=!1}var t,n;return t=e,(n=[{key:"setStorageType",value:function(e){if("local"===e){var t="testLocalStorage";try{localStorage.setItem(t,t),localStorage.removeItem(t),this.storageType="local"}catch(e){this.storageType="cookie"}}else this.storageType=e}},{key:"setValue",value:function(e,t){return"local"===this.storageType?localStorage.setItem(e,JSON.stringify(t)):"cookie"===this.storageType&&xn.set(e,JSON.stringify(t))}},{key:"removeValue",value:function(e){return"local"===this.storageType?localStorage.removeItem(e):"cookie"===this.storageType&&xn.remove(e)}},{key:"getValue",value:function(e){if("local"===this.storageType)return JSON.parse(localStorage.getItem(e))||!1;if("cookie"!==this.storageType)return!1;try{return JSON.parse(xn.get(e))||!1}catch(e){return!1}}}])&&$n(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const tr=new er;function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==nr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===nr(o)?o:String(o)),r)}var o}function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},or(e,t)}function ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ir(e)}var sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&or(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ir(a);if(i){var n=ir(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ar(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={message:[],counter:0,loggedIn:e.loggedIn},Rn.subscribe("Notification",(function(e){if(e.type){var n=t.state.message;n.push({type:e.type,message:e.message,id:t.state.counter}),t.setState({message:n,counter:t.state.counter+1},(function(){var n=e.autohide;void 0===n&&(n=!0),$("#toast-"+(t.state.counter-1)).toast({animation:!0,autohide:n}).toast("show")}))}})),t.close=t.close.bind(ar(t)),t}return t=c,n=[{key:"close",value:function(e){var t=this,n=this.state.message;n.forEach((function(r,o){r.id===e&&(n.splice(o,1),t.setState({message:n}))}))}},{key:"render",value:function(){var e=this,t=[],n=this.state.loggedIn;return this.state.message.forEach((function(e){"danger"!==e.type&&"warning"!==e.type||(n=!0)})),n&&this.state.message.forEach((function(n,o){var a;a="success"===n.type?r.createElement("i",{className:"fa fa-check-square-o btn-icon text-success"}):"danger"===n.type?r.createElement("i",{className:"fa fa-exclamation-circle text-danger btn-icon"}):"warning"===n.type?r.createElement("i",{className:"fa fa-exclamation-triangle text-warning btn-icon"}):r.createElement("i",{className:"fa fa-info-circle btn-icon text-info"}),t.push(r.createElement("div",{className:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",key:o,id:"toast-"+n.id},r.createElement("div",{className:"toast-header"},a,r.createElement("strong",{className:"me-auto"},"Hutch"),r.createElement("button",{"aria-label":"Close",className:"btn-close","data-bs-dismiss":"toast",type:"button",onClick:function(t){return e.close(n.id)}})),r.createElement("div",{className:"toast-body"},n.message)))})),r.createElement("div",{className:"position-fixed",style:{top:45,right:20,zIndex:9999}},t)}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&rr(t.prototype,n),o&&rr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const cr=sr;function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==lr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===lr(o)?o:String(o)),r)}var o}function fr(e,t){return fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fr(e,t)}function dr(e){return dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dr(e)}var pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fr(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dr(a);if(i){var n=dr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={status:e.status},t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"logOut",value:function(){Kn.disconnect()}},{key:"logIn",value:function(){Kn.connect()}},{key:"render",value:function(){return"connecting"===this.state.status?r.createElement("a",{className:"nav-link",onClick:this.logIn,href:"#"},pe.t("connecting")):"connected"===this.state.status?r.createElement("a",{className:"nav-link",onClick:this.logOut,href:"#"},pe.t("log_out")):r.createElement("a",{className:"nav-link",onClick:this.logIn,href:"#"},pe.t("log_in"))}}])&&ur(t.prototype,n),o&&ur(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const hr=pr;function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function yr(e,t,n){return(t=vr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vr(r.key),r)}}function vr(e){var t=function(e,t){if("object"!==mr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===mr(t)?t:String(t)}function br(e,t){return br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},br(e,t)}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Er(e)}var Sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&br(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Er(a);if(i){var n=Er(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wr(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,oidcStatus:e.oidcStatus,safeList:e.safeList,safeContent:e.safeContent,curSafe:e.curSafe,hasProfile:e.hasProfile},t.navigateTo=t.navigateTo.bind(wr(t)),t}return t=c,n=[{key:"navigateTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.preventDefault(),Qn.addRoute(t||""),Rn.sendMessage("App",{action:"nav",target:t,offline:n})}},{key:"navigateoConfig",value:function(e){e.preventDefault(),Rn.sendMessage("App",{action:"config"})}},{key:"openGenerateModal",value:function(e){e.preventDefault(),Rn.sendMessage("App",{action:"generate"})}},{key:"offlineSafe",value:function(e){e.preventDefault(),Rn.sendMessage("App",{action:"offline"})}},{key:"render",value:function(){var e=this,t=[];return this.state.safeList.forEach((function(n,o){var a;a=n.offline?n.updated?r.createElement("i",{className:"fa fa-paper-plane btn-icon-right","aria-hidden":"true"}):r.createElement("i",{className:"fa fa-plane btn-icon-right","aria-hidden":"true"}):e.state.safeContent&&e.state.safeContent[n.name]&&e.state.safeContent[n.name].key?r.createElement("i",{className:"fa fa-unlock btn-icon-right","aria-hidden":"true"}):r.createElement("i",{className:"fa fa-lock btn-icon-right","aria-hidden":"true"});var i="nav-link";e.state.curSafe.name===n.name&&(i+=" active"),t.push(r.createElement("li",{className:"nav-item",key:o},r.createElement("a",{className:i,"data-bs-toggle":"collapse","data-bs-target":".navbar-collapse.show",href:"#","aria-current":"page",onClick:function(t){return e.navigateTo(t,n.name)}},n.display_name||n.name,a)))})),"connected"===this.state.oidcStatus&&this.state.hasProfile,r.createElement("nav",{className:"navbar navbar-expand-lg nav-pills navbar-light bg-light"},r.createElement("div",{className:"container-fluid"},r.createElement("a",{className:"navbar-brand",href:"#",onClick:function(t){return e.navigateTo(t,!1)}},"Hutch"),r.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.createElement("span",{className:"navbar-toggler-icon"})),r.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.createElement("ul",{className:"navbar-nav"},t),r.createElement("ul",{className:"navbar-nav ms-auto flex-nowrap text-right"},r.createElement("li",{className:"nav-item"},r.createElement("a",yr({className:"nav-link","data-bs-toggle":"collapse","data-bs-target":".navbar-collapse.show",href:"#",onClick:this.offlineSafe},"href","#"),r.createElement("i",{className:"fa fa-plane btn-icon-right","aria-hidden":"true"}))),r.createElement("li",{className:"nav-item"},r.createElement("a",yr({className:"nav-link","data-bs-toggle":"collapse","data-bs-target":".navbar-collapse.show",href:"#",onClick:function(t){return e.openGenerateModal(t)}},"href","#"),r.createElement("i",{className:"fa fa-magic btn-icon-right","aria-hidden":"true"}))),r.createElement("li",{className:"nav-item"},r.createElement("a",yr({className:"nav-link","data-bs-toggle":"collapse","data-bs-target":".navbar-collapse.show",href:"#",onClick:function(t){return e.navigateoConfig(t)}},"href","#"),r.createElement("i",{className:"fa fa-cog btn-icon-right","aria-hidden":"true"}))),r.createElement("li",{className:"nav-item"},r.createElement(hr,{status:this.state.oidcStatus}))))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&gr(t.prototype,n),o&&gr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Cr=Sr;function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_r(o)?o:String(o)),r)}var o}function kr(e,t){return kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kr(e,t)}function Or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pr(e){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pr(e)}var Nr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kr(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pr(a);if(i){var n=Pr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Or(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={name:e.name,title:e.title,message:e.message,cb:e.cb},t.closeModal=t.closeModal.bind(Or(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"closeModal",value:function(e,t){this.state.cb&&this.state.cb(t)}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"modal",tabIndex:"-1",id:this.state.name},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},this.state.title),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(t){return e.closeModal(t,!1)}})),r.createElement("div",{className:"modal-body"},r.createElement("p",null,this.state.message)),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.closeModal(t,!1)}},pe.t("modalClose")),r.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){return e.closeModal(t,!0)}},pe.t("modalOk"))))))}}])&&Ar(t.prototype,n),o&&Ar(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Tr=Nr;function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ir(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ir(o)?o:String(o)),r)}var o}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}var Lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mr(a);if(i){var n=Mr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xr(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,hutchProfile:e.hutchProfile,imageError:!1,nameMandatory:!1,messageMandatory:!1,imageMandatory:!1,imageLoading:!1},t.editProfile=t.editProfile.bind(xr(t)),t.cancelEditProfile=t.cancelEditProfile.bind(xr(t)),t.editKey=t.editKey.bind(xr(t)),t.editMessage=t.editMessage.bind(xr(t)),t.getRandomWikimediaImage=t.getRandomWikimediaImage.bind(xr(t)),t.uploadImage=t.uploadImage.bind(xr(t)),t.onUploadImage=t.onUploadImage.bind(xr(t)),t.saveProfile=t.saveProfile.bind(xr(t)),t.removeProfile=t.removeProfile.bind(xr(t)),t.removeProfileConfirm=t.removeProfileConfirm.bind(xr(t)),t}return t=c,n=[{key:"editProfile",value:function(){var e=this.state.hutchProfile;e.name||(e.name=this.state.profile.name),e.sign_kid||(e.sign_kid=this.state.config.jwks.keys[0].kid),this.setState({editProfile:!0,hutchProfile:e})}},{key:"cancelEditProfile",value:function(){Rn.sendMessage("App",{action:"getProfile"})}},{key:"editKey",value:function(e){var t=this.state.hutchProfile;t.sign_kid=e.target.value,this.setState({hutchProfile:t})}},{key:"editMessage",value:function(e){var t=this.state.hutchProfile;t.message=e.target.value,this.setState({hutchProfile:t})}},{key:"editName",value:function(e){var t=this.state.hutchProfile;t.name=e.target.value,this.setState({hutchProfile:t})}},{key:"getRandomWikimediaImage",value:function(){var e=this;this.setState({imageLoading:!0},(function(){$.ajax({url:"https://commons.wikimedia.org/w/api.php?action=query&list=random&rnnamespace=6&rnlimit=1&prop=imageinfo&format=json&origin=*"}).then((function(t){$.ajax({url:"https://commons.wikimedia.org/w/api.php?action=query&prop=imageinfo&iiprop=url&iiurlwidth=200&format=json&origin=*&titles="+t.query.random[0].title}).then((function(n){var r=new XMLHttpRequest;r.open("GET",n.query.pages[t.query.random[0].id].imageinfo[0].responsiveUrls[1.5],!0),r.responseType="arraybuffer",r.onload=function(t){r.response;var n=e.state.hutchProfile;n.picture="data:"+r.getResponseHeader("content-type")+";base64,"+btoa(String.fromCharCode.apply(null,new Uint8Array(r.response))),e.setState({hutchProfile:n,imageError:!1,imageLoading:!1})},r.send(null)})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorWikiImage")}),e.setState({imageError:!0,imageLoading:!1})}))})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorWikiImage")}),e.setState({imageError:!0,imageLoading:!1})}))}))}},{key:"uploadImage",value:function(){$("#uploadImageInput").trigger("click")}},{key:"onUploadImage",value:function(e){var t=this,n=e.target.files;if(n.length>0){var r=n[0];if(r.size>409600)this.setState({imageError:!0});else{var o=new FileReader;o.onload=function(e){var n=t.state.hutchProfile;n.picture=e.target.result,t.setState({hutchProfile:n,imageError:!1})},o.readAsDataURL(r)}}}},{key:"saveProfile",value:function(e){e.preventDefault();var t=this.state.hutchProfile;t.message&&t.name&&t.picture?Xn.request(this.state.config.profile_endpoint,"PUT",t).then((function(){Rn.sendMessage("App",{action:"getProfile"}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageProfileSaved")})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSaveProfile")})})):this.setState({messageMandatory:!t.message,nameMandatory:!t.name,imageMandatory:!t.picture})}},{key:"removeProfile",value:function(){new bootstrap.Modal(document.getElementById("removeProfile"),{keyboard:!1}).show()}},{key:"removeProfileConfirm",value:function(e){e&&Xn.request(this.state.config.profile_endpoint,"DELETE").then((function(){Rn.sendMessage("App",{action:"resetProfile"}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageRemoveProfile")})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSaveProfile")})})),bootstrap.Modal.getOrCreateInstance(document.querySelector("#removeProfile")).hide()}},{key:"render",value:function(){var e,t,n,o,a=this,i=[];this.state.config.jwks.keys.forEach((function(e,t){i.push(r.createElement("option",{value:e.kid,key:t},e.alg))})),this.state.imageLoading?e=r.createElement("i",{className:"fa fa-spinner fa-spin fa-3x fa-fw"}):this.state.hutchProfile.picture&&(e=r.createElement("img",{src:this.state.hutchProfile.picture,alt:"profile image",className:"profile-image"}));var s="form-control";this.state.messageMandatory&&(s+=" is-invalid",n=r.createElement("div",{className:"invalid-feedback"},pe.t("profileMessageMandatory")));var c="form-control";return this.state.nameMandatory&&(c+=" is-invalid",o=r.createElement("div",{className:"invalid-feedback"},pe.t("profileNameMandatory"))),this.state.imageMandatory&&(t=r.createElement("div",{className:"alert alert-danger"},pe.t("profileImageMandatory"))),r.createElement("div",null,r.createElement("form",{onSubmit:this.saveProfile},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"keyList",className:"form-label"},pe.t("profileServerKey")),r.createElement("select",{className:"form-select","aria-label":"public key",id:"keyList",onChange:function(e){return a.editKey(e)},value:this.state.hutchProfile.sign_kid},i)),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"profileName",className:"form-label"},pe.t("profileName")),r.createElement("input",{type:"text",className:c,id:"profileName",value:this.state.hutchProfile.name||"",onChange:function(e){return a.editName(e)}}),o),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"profileMessage",className:"form-label"},pe.t("profileMessage")),r.createElement("textarea",{className:s,id:"profileMessage",value:this.state.hutchProfile.message||"",onChange:function(e){return a.editMessage(e)},maxLength:"512"}),n),r.createElement("div",{className:"mb-3"},r.createElement("label",{className:"form-label"},pe.t("profileImage")),r.createElement("div",null,e,t)),r.createElement("div",{className:"mb-3"},r.createElement("input",{type:"file",id:"uploadImageInput",onChange:this.onUploadImage,accept:".jpg,.jpg,.png,.gif,.bmp",className:"upload"}),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.uploadImage},pe.t("profileImageSelect")),r.createElement("span",{className:"badge bg-secondary btn-icon btn-icon-right"},pe.t("or")),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.getRandomWikimediaImage},pe.t("profileImageRandom"))),r.createElement("hr",null),r.createElement("div",{className:"btn-toolbar justify-content-between",role:"toolbar"},r.createElement("div",{className:"btn-group",role:"group"},r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.saveProfile},pe.t("profileSubmit")),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.cancelEditProfile},pe.t("profileCancel"))),r.createElement("div",{className:"input-group"},r.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.removeProfile},r.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))))),r.createElement(Tr,{name:"removeProfile",title:pe.t("removeProfileTitle"),message:pe.t("removeProfileMessage"),cb:this.removeProfileConfirm}))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&Rr(t.prototype,n),o&&Rr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Br=Lr;function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==jr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===jr(o)?o:String(o)),r)}var o}function Ur(e,t){return Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ur(e,t)}function Hr(e){return Hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hr(e)}var Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ur(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hr(a);if(i){var n=Hr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,profile:e.profile,hutchProfile:e.hutchProfile},t}return t=c,n=[{key:"editProfile",value:function(){Rn.sendMessage("App",{action:"editProfile"})}},{key:"lockAllSafe",value:function(){Rn.sendMessage("App",{action:"lockAllSafe"}),Rn.sendMessage("Notification",{type:"info",message:pe.t("lockedAllSafe")})}},{key:"addSafe",value:function(){Rn.sendMessage("App",{action:"addSafe"})}},{key:"render",value:function(){var e,t;if(this.state.hutchProfile){var n=this.state.hutchProfile.message;this.state.config.frontend.offline?n=pe.t("offlineProfileMessage"):t=r.createElement("div",{className:"d-flex justify-content-center"},r.createElement("button",{type:"button",onClick:this.editProfile,className:"btn btn-secondary"},pe.t("profileEdit"))),e=r.createElement("div",null,r.createElement("div",{className:"d-flex justify-content-center"},r.createElement("img",{src:this.state.hutchProfile.picture,className:"card-img-top profile-image"})),r.createElement("div",{className:"d-flex justify-content-center"},r.createElement("p",null,n)))}else t=r.createElement("button",{type:"button",onClick:this.editProfile,className:"btn btn-secondary"},pe.t("profileCreate"));return r.createElement("div",null,r.createElement("div",{className:"alert alert-primary",role:"alert"},pe.t("profileValue",{name:this.state.hutchProfile.name||this.state.profile.name||""}),r.createElement("div",{className:"btn-group float-end",role:"group"},r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.lockAllSafe,title:pe.t("lockAllSafe")},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.addSafe,title:pe.t("addSafe")},r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))),e,t)}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&Fr(t.prototype,n),o&&Fr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Kr=Vr;function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Wr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Wr(o)?o:String(o)),r)}var o}function Gr(e,t){return Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gr(e,t)}function Xr(e){return Xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xr(e)}var Jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gr(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xr(a);if(i){var n=Xr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Wr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,profile:e.profile,hutchProfile:e.hutchProfile,hasProfile:e.hasProfile,editProfile:e.editProfile,oidcStatus:e.oidcStatus},t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"render",value:function(){return"connecting"===this.state.oidcStatus?r.createElement("div",{className:"alert alert-success",role:"alert"},pe.t("connectingMessage")):"disconnected"===this.state.oidcStatus?r.createElement("div",{className:"alert alert-warning",role:"alert"},pe.t("disconnectedMessage")):this.state.editProfile?r.createElement(Br,{config:this.state.config,hutchProfile:this.state.hutchProfile}):r.createElement(Kr,{config:this.state.config,hutchProfile:this.state.hutchProfile,profile:this.state.profile})}}])&&zr(t.prototype,n),o&&zr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const qr=Jr;function Yr(e){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Yr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Yr(o)?o:String(o)),r)}var o}function Zr(e,t){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zr(e,t)}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eo(e){return eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eo(e)}var to=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zr(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=eo(a);if(i){var n=eo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $r(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={isError:e.isError,ph:e.ph,cb:e.cb,value:"",filename:""},t.changeValue=t.changeValue.bind($r(t)),t.getFile=t.getFile.bind($r(t)),t}return t=c,n=[{key:"changeValue",value:function(e){var t=this;this.setState({value:e.target.value,filename:""},(function(){t.state.cb(t.state.value)}))}},{key:"getFile",value:function(e){var t=this,n=e.target.files[0],r=new FileReader;r.onload=function(e){t.setState({value:e.target.result,filename:n.name},(function(){t.state.cb(t.state.value)}))},r.readAsText(n)}},{key:"render",value:function(){var e,t,n=this,o="form-control";return this.state.isError&&(o+=" is-invalid",e=r.createElement("div",{className:"invalid-feedback"},pe.t("jwkError"))),this.state.filename&&(t=r.createElement("code",{className:"btn-icon-right"},this.state.filename)),r.createElement("div",null,r.createElement("div",{className:"input-group"},r.createElement("textarea",{className:o,autoComplete:"off",placeholder:this.state.ph,value:this.state.value,onChange:function(e){return n.changeValue(e)}}),r.createElement("input",{type:"file",className:"upload",id:"jwkFile",onChange:this.getFile}),r.createElement("label",{htmlFor:"jwkFile",className:"btn btn-outline-secondary btn-sm"},r.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"})),e),t)}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&Qr(t.prototype,n),o&&Qr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const no=to;function ro(e){return ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ro(e)}function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ro(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ro(o)?o:String(o)),r)}var o}function ao(e,t){return ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ao(e,t)}function io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function so(e){return so=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},so(e)}var co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ao(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=so(a);if(i){var n=so(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ro(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return io(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={safeKey:e.safeKey,cb:e.callback,newPassword:"",confirmNewPassword:"",prefixPassword:"",confirmPrefixPassword:"",safeKeyJwk:"",keyName:"",pwdScore:-1,isValid:!1},t.changeNewPassword=t.changeNewPassword.bind(io(t)),t.changeConfirmNewPassword=t.changeConfirmNewPassword.bind(io(t)),t.changePrefixPassword=t.changePrefixPassword.bind(io(t)),t.changeConfirmPrefixPassword=t.changeConfirmPrefixPassword.bind(io(t)),t.editSafeKeyJwk=t.editSafeKeyJwk.bind(io(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"changeDisplayName",value:function(e){var t=this,n=this.state.safeKey;n.display_name=e.target.value,this.setState({safeKey:n},(function(){t.isSafeKeyValid()}))}},{key:"changeNewPassword",value:function(e){var t=this,n=-1;e.target.value&&(n=zxcvbn(e.target.value).score),this.setState({newPassword:e.target.value,pwdScore:n},(function(){t.isSafeKeyValid()}))}},{key:"changeConfirmNewPassword",value:function(e){var t=this;this.setState({confirmNewPassword:e.target.value},(function(){t.isSafeKeyValid()}))}},{key:"changePrefixPassword",value:function(e){this.setState({prefixPassword:e.target.value})}},{key:"changeConfirmPrefixPassword",value:function(e){var t=this;this.setState({confirmPrefixPassword:e.target.value},(function(){t.isSafeKeyValid()}))}},{key:"editSafeKeyJwk",value:function(e){var t=this;this.setState({safeKeyJwk:e},(function(){t.isSafeKeyValid()}))}},{key:"isSafeKeyValid",value:function(){var e=!0;if(this.state.safeKey.display_name||(e=!1),"password"===this.state.safeKey.type)this.state.newPassword||(e=!1),this.state.newPassword!==this.state.confirmNewPassword&&(e=!1);else if("master-password"===this.state.safeKey.type)this.state.newPassword||(e=!1),this.state.prefixPassword&&this.state.prefixPassword!==this.state.confirmPrefixPassword&&(e=!1);else if("jwk"===this.state.safeKey.type)try{var t=JSON.parse(this.state.safeKeyJwk);t.keys&&(t=t.keys[0]),t&&t.alg||(e=!1)}catch(t){e=!1}this.setState({isValid:e})}},{key:"saveSafe",value:function(e){e.preventDefault(),this.state.isValid&&this.closeModal(e,!0)}},{key:"closeModal",value:function(e,t){var n;try{n=JSON.parse(this.state.safeKeyJwk)}catch(e){n=!1}this.state.cb&&(this.state.cb(t,{safeKey:this.state.safeKey,password:this.state.prefixPassword+this.state.newPassword,prefixPassword:!!this.state.prefixPassword,jwk:n}),this.setState({newPassword:"",confirmNewPassword:"",pwdScore:-1,isValid:!1}))}},{key:"render",value:function(){var e,t,n=this;if("password"===this.state.safeKey.type)0===this.state.pwdScore?e=r.createElement("span",{className:"badge bg-danger"},pe.t("pwdScoreTooGuessable")):1===this.state.pwdScore?e=r.createElement("span",{className:"badge bg-warning"},pe.t("pwdScoreVeryGuessable")):2===this.state.pwdScore?e=r.createElement("span",{className:"badge bg-secondary"},pe.t("pwdScoreSomewhatGuessable")):3===this.state.pwdScore?e=r.createElement("span",{className:"badge bg-primary"},pe.t("pwdScoreSafelyUnguessable")):4===this.state.pwdScore&&(e=r.createElement("span",{className:"badge bg-success"},pe.t("pwdScoreVeryUnguessable"))),t=r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"newPassword",className:"form-label"},pe.t("newPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"newPassword",placeholder:pe.t("newPasswordPh"),value:this.state.newPassword,onChange:function(e){return n.changeNewPassword(e)}}),e),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"confirmNewPassword",className:"form-label"},pe.t("confirmNewPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"confirmNewPassword",placeholder:pe.t("confirmNewPasswordPh"),value:this.state.confirmNewPassword,onChange:function(e){return n.changeConfirmNewPassword(e)}})));else if("master-password"===this.state.safeKey.type)t=r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"prefixPassword",className:"form-label"},pe.t("prefixPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"prefixPassword",placeholder:pe.t("prefixPasswordPh"),value:this.state.prefixPassword,onChange:function(e){return n.changePrefixPassword(e)}}),e),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"confirmPrefixPassword",className:"form-label"},pe.t("confirmPrefixPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"confirmPrefixPassword",placeholder:pe.t("confirmPrefixPasswordPh"),value:this.state.confirmPrefixPassword,onChange:function(e){return n.changeConfirmPrefixPassword(e)}})),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"newPassword",className:"form-label"},pe.t("masterPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"newPassword",placeholder:pe.t("masterPasswordPh"),value:this.state.newPassword,onChange:function(e){return n.changeNewPassword(e)}})));else if("jwk"===this.state.safeKey.type){var o;this.state.isValid||(o=r.createElement("div",{className:"invalid-feedback"},pe.t("jwkError"))),t=r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"safeKeyJwk",className:"form-label"},pe.t("safeKeyJwk")),r.createElement(no,{isError:!this.state.isValid,ph:pe.t("safeKeyJwkPh"),cb:this.editSafeKeyJwk}),o)}return r.createElement("div",{className:"modal",tabIndex:"-1",id:"modalSafeKey"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("modalSafeKey-"+this.state.safeKey.type)),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(e){return n.closeModal(e,!1)}})),r.createElement("form",{onSubmit:this.saveSafe},r.createElement("div",{className:"modal-body"},r.createElement("input",{type:"hidden",maxLength:"128",id:"safeKeyName",value:this.state.safeKey.name}),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"safeKeyDisplayName",className:"form-label"},pe.t("safeKeyDisplayName")),r.createElement("input",{type:"text",maxLength:"512",className:"form-control",id:"safeKeyDisplayName",placeholder:pe.t("safeKeyDisplayNamePh"),value:this.state.safeKey.display_name,onChange:function(e){return n.changeDisplayName(e)}})),t),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return n.closeModal(e,!1)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(e){return n.saveSafe(e)},disabled:!this.state.isValid},pe.t("modalOk")))))))}}])&&oo(t.prototype,n),o&&oo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const lo=co;function uo(e){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==uo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===uo(o)?o:String(o)),r)}var o}function po(e,t){return po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},po(e,t)}function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mo(e){return mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mo(e)}function yo(e,t){var n=!1,r="hutchsafekey-"+t.name;"/"!==window.location.pathname&&(r+="-"+window.btoa(unescape(encodeURIComponent(window.location.pathname))).replace(/\=+$/m,""));var o=tr.getValue(r);return o?e[t.name]&&e[t.name].keyList&&e[t.name].keyList.forEach((function(e){e.name===o&&(n=e)})):e&&t&&e[t.name]&&e[t.name].keyList&&e[t.name].keyList.forEach((function(e){n||"password"!==e.type&&"master-password"!==e.type&&"jwk"!==e.type||(n=e)})),n}var go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&po(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mo(a);if(i){var n=mo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ho(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,safe:e.safe,safeContent:e.safeContent,cb:e.cb,allowKeepUnlocked:e.allowKeepUnlocked,safeKey:yo(e.safeContent,e.safe),safePassword:"",safePrefixPassword:"",safeKeyJwk:"",safeSecretError:!1,keepUnlocked:!1,unlockKeyName:t.getBrowserInfo()},t.closeModal=t.closeModal.bind(ho(t)),t.setSafeKey=t.setSafeKey.bind(ho(t)),t.toggleKeepUnlocked=t.toggleKeepUnlocked.bind(ho(t)),t.changeUnlockKeyName=t.changeUnlockKeyName.bind(ho(t)),t.editSafeKeyJwk=t.editSafeKeyJwk.bind(ho(t)),t}return t=c,n=[{key:"changePassword",value:function(e){this.setState({safePassword:e.target.value})}},{key:"changePrefixPassword",value:function(e){this.setState({safePrefixPassword:e.target.value})}},{key:"editSafeKeyJwk",value:function(e){this.setState({safeKeyJwk:e})}},{key:"toggleKeepUnlocked",value:function(e){var t=!this.state.keepUnlocked;this.setState({keepUnlocked:t})}},{key:"changeUnlockKeyName",value:function(e){this.setState({unlockKeyName:e.target.value})}},{key:"setSafeKey",value:function(e,t){var n=this;e.preventDefault(),this.setState({safeKey:t,safeSecretError:!1},(function(){var e="hutchsafekey-"+n.state.safe.name;"/"!==window.location.pathname&&(e+="-"+window.btoa(unescape(encodeURIComponent(window.location.pathname))).replace(/\=+$/m,"")),tr.setValue(e,t.name)}))}},{key:"getBrowserInfo",value:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!==(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}},{key:"verifyKey",value:function(e){var t=this;if(e.preventDefault(),this.state.safeKey){if("password"===this.state.safeKey.type||"master-password"===this.state.safeKey.type){var n=new TextEncoder;Pn(this.state.safeKey.data,n.encode(this.state.safePrefixPassword+this.state.safePassword)).then((function(e){t.setState({safeSecretError:!1},(function(){kt(e.payload,t.state.safe.alg_type).then((function(n){t.setState({safePassword:"",safePrefixPassword:"",safeKeyJwk:"",safeSecretError:!1},(function(){t.state.cb(!0,n,t.state.keepUnlocked,t.state.unlockKeyName,e.payload)}))}))}))})).catch((function(){t.setState({safeSecretError:!0})}))}else if("jwk"===this.state.safeKey.type)try{var r,o=JSON.parse(this.state.safeKeyJwk);kt(r=o.keys&&o.keys.length?o.keys[0]:o,r.alg).then((function(e){Pn(t.state.safeKey.data,e).then((function(e){t.setState({safeSecretError:!1},(function(){kt(e.payload,t.state.safe.alg_type).then((function(n){t.setState({safePassword:"",safePrefixPassword:"",safeKeyJwk:"",safeSecretError:!1},(function(){t.state.cb(!0,n,t.state.keepUnlocked,t.state.unlockKeyName,e.payload)}))}))}))})).catch((function(){t.setState({safeSecretError:!0})}))})).catch((function(){t.setState({safeSecretError:!0})}))}catch(e){this.setState({safeSecretError:!0})}}else this.setState({safeSecretError:!0})}},{key:"closeModal",value:function(e,t){var n=this;this.setState({safePassword:"",safePrefixPassword:"",safeKeyJwk:"",safeSecretError:!1,keepUnlocked:!1},(function(){n.state.cb&&n.state.cb(t)}))}},{key:"render",value:function(){var e,t,n,o,a=this,i=[],s={prefixPassword:!1},c="form-control";return this.state.safe&&this.state.safeContent&&this.state.safeContent[this.state.safe.name]&&this.state.safeContent[this.state.safe.name].keyList&&("password"===this.state.safeKey.type?(this.state.safeSecretError&&(c+=" is-invalid",e=r.createElement("div",{className:"invalid-feedback"},pe.t("safeKeyError"))),n=r.createElement("input",{type:"password",className:c,autoComplete:"new-password",placeholder:pe.t("safePassword"),onChange:function(e){return a.changePassword(e)},autoFocus:!0,value:this.state.safePassword})):"master-password"===this.state.safeKey.type?(this.state.safeSecretError&&(c+=" is-invalid",e=r.createElement("div",{className:"invalid-feedback"},pe.t("safeKeyError"))),this.state.safeKey&&this.state.safeKey.data&&(s=kn(this.state.safeKey.data)),s.prefixPassword&&(o=r.createElement("input",{type:"password",className:c,autoComplete:"new-password",placeholder:pe.t("safePrefixPassword"),onChange:function(e){return a.changePrefixPassword(e)},autoFocus:!0,value:this.state.safePrefixPassword})),n=r.createElement("div",null,o,r.createElement("input",{type:"password",className:c,autoComplete:"new-password",placeholder:pe.t("safePassword"),onChange:function(e){return a.changePassword(e)},autoFocus:!0,value:this.state.safePassword}))):"jwk"===this.state.safeKey.type&&(n=r.createElement(no,{isError:this.state.safeSecretError,errorMessage:pe.t("safeKeyError"),ph:pe.t("safeKeyJwkPh"),cb:this.editSafeKeyJwk})),this.state.safeContent[this.state.safe.name].keyList.forEach((function(e,t){("password"===e.type||"master-password"===e.type||"jwk"===e.type)&&i.push(r.createElement("li",{key:t},r.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return a.setSafeKey(t,e)}},e.display_name||e.name)))}))),this.state.allowKeepUnlocked&&(t=r.createElement("div",null,r.createElement("div",{className:"form-check"},r.createElement("input",{className:"form-check-input",type:"checkbox",checked:this.state.keepUnlocked,id:"keepUnlocked",onChange:function(e){return a.toggleKeepUnlocked(e)}}),r.createElement("label",{className:"form-check-label",htmlFor:"keepUnlocked"},pe.t("keepUnlocked"))),r.createElement("div",{className:"mb-3"},r.createElement("input",{type:"text",className:"form-control",placeholder:this.getBrowserInfo(),onChange:function(e){return a.changeUnlockKeyName(e)},disabled:!this.state.keepUnlocked,id:"safeUnlockKeyName",value:this.state.unlockKeyName}),r.createElement("div",{className:"form-text",htmlFor:"safeUnlockKeyName"},pe.t("safeUnlockKeyName"))))),r.createElement("div",{className:"modal",tabIndex:"-1",id:"modalUnlockSafe"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("safeUnlockTitle")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(e){return a.closeModal(e,!1)}})),r.createElement("form",{onSubmit:this.verifyKey},r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"input-group mb-3"},r.createElement("div",{className:"input-group-prepend"},r.createElement("label",{className:"input-group-text",htmlFor:"safeKeySelect"},pe.t("safeKeySelect"))),r.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button",id:"safeKeySelect","data-bs-toggle":"dropdown","aria-expanded":"false"},this.state.safeKey.display_name||this.state.safeKey.name),r.createElement("ul",{className:"dropdown-menu"},i)),r.createElement("div",{className:"input-group mb-3"},n,e),t),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return a.closeModal(e,!1)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(e){return a.verifyKey(e)}},pe.t("modalOk")))))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){var n=Object.assign({},e);return t.safe.name!==e.safe.name&&(n.safeKey=yo(e.safeContent,e.safe)),n}}],n&&fo(t.prototype,n),o&&fo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const vo=go;function bo(e){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bo(e)}function wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==bo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==bo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===bo(o)?o:String(o)),r)}var o}function Eo(e,t){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Eo(e,t)}function So(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e){return Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Co(e)}var _o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eo(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Co(a);if(i){var n=Co(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return So(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,safe:e.safe,safeContent:e.safeContent,editMode:e.editMode,nameMandatory:!1,namePresent:!1,safeKey:e.safeKey,addKey:!1,curSafeKeyContainer:!1,nextStep:!1,nextStepType:!1,removeSafeKeyMessage:!1},t.saveSafe=t.saveSafe.bind(So(t)),t.cancelEditSafe=t.cancelEditSafe.bind(So(t)),t.addSafeKey=t.addSafeKey.bind(So(t)),t.saveSafeKey=t.saveSafeKey.bind(So(t)),t.removeSafeKey=t.removeSafeKey.bind(So(t)),t.removeSafeKeyConfirm=t.removeSafeKeyConfirm.bind(So(t)),t.editSafeKey=t.editSafeKey.bind(So(t)),t.completeAddSafeKey=t.completeAddSafeKey.bind(So(t)),t.completeSetSafeKey=t.completeSetSafeKey.bind(So(t)),t.unlockSafeCallback=t.unlockSafeCallback.bind(So(t)),t.createKeyForSafe=t.createKeyForSafe.bind(So(t)),t.removeSafe=t.removeSafe.bind(So(t)),t.removeSafeConfirm=t.removeSafeConfirm.bind(So(t)),t.toggleOffline=t.toggleOffline.bind(So(t)),t}return t=c,n=[{key:"editDisplayName",value:function(e){var t=this.state.safe;t.display_name=e.target.value,this.setState({safe:t})}},{key:"editEncType",value:function(e){var t=this.state.safe;t.enc_type=e.target.value,this.setState({safe:t})}},{key:"editAlgType",value:function(e){var t=this.state.safe;t.alg_type=e.target.value,this.setState({safe:t})}},{key:"saveSafe",value:function(e){e.preventDefault();var t=this.state.safe;1===this.state.editMode?(t.offline?(Rn.sendMessage("App",{action:"saveSafe",safe:t}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSaveSafe")})):Xn.request(this.state.config.safe_endpoint,"POST",t).then((function(){Rn.sendMessage("App",{action:"saveSafe",safe:t}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSaveSafe")})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSaveSafe")})})),this.setState({nameMandatory:!1,namePresent:!1})):t.offline?(Rn.sendMessage("App",{action:"saveSafe",safe:t}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSaveSafe")})):Xn.request(this.state.config.safe_endpoint+"/"+t.name,"PUT",t).then((function(){Rn.sendMessage("App",{action:"saveSafe",safe:t}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSaveSafe")})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSaveSafe")})}))}},{key:"cancelEditSafe",value:function(){Rn.sendMessage("App",{action:"nav",target:1!==this.state.editMode&&this.state.safe.name})}},{key:"createKeyForSafe",value:function(){var e=this;return Qt(this.state.safe.alg_type,{extractable:!0}).then((function(t){return gn(t).then((function(t){return kt(t,e.state.safe.alg_type).then((function(e){return{key:e,extractableKey:t}}))}))}))}},{key:"saveSafeKey",value:function(e,t){var n=this;if(bootstrap.Modal.getOrCreateInstance(document.querySelector("#modalSafeKey")).hide(),e)if("password"===t.safeKey.type||"master-password"===t.safeKey.type){var r="PBES2-HS256+A128KW";"A192KW"===this.state.safe.alg_type||"A192GCMKW"===this.state.safe.alg_type?r="PBES2-HS384+A192KW":"A256KW"!==this.state.safe.alg_type&&"A256GCMKW"!==this.state.safe.alg_type||(r="PBES2-HS512+A256KW");var o=(new TextEncoder).encode(t.password);this.state.addKey?this.state.safeContent[this.state.safe.name].key?this.completeAddSafeKey(o,t.safeKey,r,t.prefixPassword):this.createKeyForSafe().then((function(e){var a=n.state.safeContent;a[n.state.safe.name].extractableKey=e.extractableKey,a[n.state.safe.name].key=e.key,n.setState({safeContent:a},(function(){n.completeAddSafeKey(o,t.safeKey,r,t.prefixPassword)}))})):this.completeSetSafeKey(o,t.safeKey,r,t.prefixPassword)}else if("jwk"===t.safeKey.type){var a;a=t.jwk.keys&&t.jwk.keys.length?t.jwk.keys[0]:t.jwk,this.state.addKey?this.state.safeContent[this.state.safe.name].key?kt(a,a.alg).then((function(e){n.completeAddSafeKey(e,t.safeKey,a.alg,t.prefixPassword)})):this.createKeyForSafe().then((function(e){var r=n.state.safeContent;r[n.state.safe.name].extractableKey=e.extractableKey,r[n.state.safe.name].key=e.key,n.setState({safeContent:r},(function(){kt(a,a.alg).then((function(e){n.completeAddSafeKey(e,t.safeKey,a.alg,t.prefixPassword)}))}))})):kt(a,a.alg).then((function(e){n.completeSetSafeKey(e,t.safeKey,a.alg,t.prefixPassword)}))}else"browser"===t.safeKey.type&&Xn.request(this.state.config.safe_endpoint+"/"+this.state.safe.name+"/key/"+t.safeKey.name,"PUT",t.safeKey).then((function(){Rn.sendMessage("App",{action:"setSafeKey",target:n.state.safe,newSafeKey:t.safeKey,removeStorage:!1}),n.setState({curSafeKeyContainer:!1}),Rn.sendMessage("Notification",{type:"info",message:pe.t("safeLockUpdated")})}))}},{key:"addSafeKey",value:function(e,t){e&&e.preventDefault(),!this.state.safeContent[this.state.safe.name].extractableKey&&this.state.safeContent[this.state.safe.name].keyList.length?this.setState({nextStep:this.addSafeKey,nextStepType:t},(function(){new bootstrap.Modal(document.getElementById("modalUnlockSafe"),{keyboard:!1}).show()})):this.setState({addKey:!0,curSafeKeyContainer:{name:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),display_name:"",type:t,data:""}},(function(){new bootstrap.Modal(document.getElementById("modalSafeKey"),{keyboard:!1}).show()}))}},{key:"completeAddSafeKey",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.state.safeContent[this.state.safe.name].extractableKey?new Cn(this.state.safeContent[this.state.safe.name].extractableKey).setProtectedHeader({alg:n,enc:this.state.safe.enc_type,sign_key:this.state.config.sign_thumb,prefixPassword:o}).encrypt(e).then((function(e){t.data=e,Xn.request(r.state.config.safe_endpoint+"/"+r.state.safe.name+"/key","POST",t).then((function(){Rn.sendMessage("App",{action:"updateSafeKey",safe:r.state.safe}),Rn.sendMessage("Notification",{type:"info",message:pe.t("safeLockAdded")})}))})):Rn.sendMessage("Notification",{type:"warning",message:pe.t("lockedSafe")})}},{key:"editSafeKey",value:function(e,t){var n=this,r={addKey:!1};t&&(r.curSafeKeyContainer=t),this.setState(r,(function(){n.state.safeContent[n.state.safe.name].extractableKey?new bootstrap.Modal(document.getElementById("modalSafeKey"),{keyboard:!1}).show():n.setState({nextStep:n.editSafeKey},(function(){new bootstrap.Modal(document.getElementById("modalUnlockSafe"),{keyboard:!1}).show()}))}))}},{key:"completeSetSafeKey",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.state.safeContent[this.state.safe.name].extractableKey?new Cn(this.state.safeContent[this.state.safe.name].extractableKey).setProtectedHeader({alg:n,enc:this.state.safe.enc_type,sign_key:this.state.config.sign_thumb,prefixPassword:o}).encrypt(e).then((function(e){t.data=e,Xn.request(r.state.config.safe_endpoint+"/"+r.state.safe.name+"/key/"+t.name,"PUT",t).then((function(){Rn.sendMessage("App",{action:"setSafeKey",target:r.state.safe,newSafeKey:t,removeStorage:!1}),r.setState({curSafeKeyContainer:!1}),Rn.sendMessage("Notification",{type:"info",message:pe.t("safeLockUpdated")})}))})):Rn.sendMessage("Notification",{type:"warning",message:pe.t("lockedSafe")})}},{key:"removeSafeKey",value:function(e,t){var n=this;e&&e.preventDefault();var r={};t&&(r.curSafeKeyContainer=t,r.removeSafeKeyMessage=pe.t("removeSafeKeyMessage",{name:t.display_name})),this.setState(r,(function(){n.state.safeContent[n.state.safe.name].extractableKey?new bootstrap.Modal(document.getElementById("removeSafeKey"),{keyboard:!1}).show():n.setState({nextStep:n.removeSafeKey},(function(){new bootstrap.Modal(document.getElementById("modalUnlockSafe"),{keyboard:!1}).show()}))}))}},{key:"removeSafeKeyConfirm",value:function(e){var t=this;e&&Xn.request(this.state.config.safe_endpoint+"/"+this.state.safe.name+"/key/"+this.state.curSafeKeyContainer.name,"DELETE").then((function(){t.setState({curSafeKeyContainer:!1},(function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageRemoveSafeKey")}),Rn.sendMessage("App",{action:"updateSafeKey",safe:t.state.safe})}))})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSaveSafeKey")})})),bootstrap.Modal.getOrCreateInstance(document.querySelector("#removeSafeKey")).hide()}},{key:"unlockSafeCallback",value:function(e,t,n,r,o){bootstrap.Modal.getOrCreateInstance(document.querySelector("#modalUnlockSafe")).hide(),e&&(Rn.sendMessage("App",{action:"unlockSafe",safe:this.state.safe,extractableKey:o}),this.state.nextStep&&this.state.nextStep(!1,this.state.nextStepType))}},{key:"removeSafe",value:function(){new bootstrap.Modal(document.getElementById("removeSafe"),{keyboard:!1}).show()}},{key:"removeSafeConfirm",value:function(e){var t=this;e&&Xn.request(this.state.config.safe_endpoint+"/"+this.state.safe.name,"DELETE").then((function(){Rn.sendMessage("App",{action:"removeSafe",safe:t.state.safe}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageRemoveSafe")})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSaveSafe")})})),bootstrap.Modal.getOrCreateInstance(document.querySelector("#removeSafe")).hide()}},{key:"toggleOffline",value:function(){var e=this.state.safe;e.offline=!e.offline,this.setState({safe:e})}},{key:"render",value:function(){var e,t=this,n=[];if(this.state.safeContent&&this.state.safe&&this.state.safeContent[this.state.safe.name]){var o=0;this.state.safeContent[this.state.safe.name].keyList.forEach((function(e){-1!==["password","master-password"].indexOf(e.type)&&o++})),this.state.safeContent[this.state.safe.name].keyList.forEach((function(e,a){var i="fa btn-icon ";"password"===e.type?i+="fa-key":"master-password"===e.type?i+="fa-usb":"jwk"===e.type?i+="fa-file-code-o":"browser"===e.type&&(i+="fa-firefox"),n.push(r.createElement("div",{className:"input-group",key:a},r.createElement("div",{className:"input-group-text"},r.createElement("i",{className:i,"aria-hidden":"true"}),e.display_name||e.name),r.createElement("div",{className:"btn-group me-2",role:"group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(n){return t.editSafeKey(n,e)}},r.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(n){return t.removeSafeKey(n,e)},disabled:o<=1&&-1!==["password","master-password"].indexOf(e.type)},r.createElement("i",{className:"fa fa-trash","aria-hidden":"true"})))))}))}return this.state.curSafeKeyContainer&&(e=r.createElement(lo,{safeKey:this.state.curSafeKeyContainer,callback:this.saveSafeKey})),r.createElement("div",null,r.createElement("form",{onSubmit:this.saveSafe},r.createElement("input",{type:"hidden",id:"safeName",value:this.state.safe.name}),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"safeDisplayName",className:"form-label"},pe.t("safeDisplayName")),r.createElement("input",{type:"text",className:"form-control",id:"safeDisplayName",value:this.state.safe.display_name||"",onChange:function(e){return t.editDisplayName(e)}})),r.createElement("div",{className:"mb-3 form-check"},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"safeOfflineFlag",checked:this.state.safe.offline,onChange:this.toggleOffline,disabled:1!==this.state.editMode||this.state.config.frontend.offline}),r.createElement("label",{className:"form-check-label",htmlFor:"safeOfflineFlag"},pe.t("safeOfflineFlag"))),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"encType",className:"form-label"},pe.t("safeEncType")),r.createElement("select",{disabled:2===this.state.editMode||this.state.safe.offline,className:"form-select","aria-label":"enc type",id:"encType",onChange:function(e){return t.editEncType(e)},value:this.state.safe.enc_type},r.createElement("option",{value:"A128CBC-HS256"},"A128CBC-HS256"),r.createElement("option",{value:"A192CBC-HS384"},"A192CBC-HS384"),r.createElement("option",{value:"A256CBC-HS512"},"A256CBC-HS512"),r.createElement("option",{value:"A128GCM"},"A128GCM"),r.createElement("option",{value:"A192GCM"},"A192GCM"),r.createElement("option",{value:"A256GCM"},"A256GCM"))),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"algType",className:"form-label"},pe.t("safeAlgType")),r.createElement("select",{disabled:2===this.state.editMode||this.state.safe.offline,className:"form-select","aria-label":"enc type",id:"algType",onChange:function(e){return t.editAlgType(e)},value:this.state.safe.alg_type},r.createElement("option",{value:"A128KW"},"A128KW"),r.createElement("option",{value:"A192KW"},"A192KW"),r.createElement("option",{value:"A256KW"},"A256KW"),r.createElement("option",{value:"A128GCMKW"},"A128GCMKW"),r.createElement("option",{value:"A192GCMKW"},"A192GCMKW"),r.createElement("option",{value:"A256GCMKW"},"A256GCMKW"))),r.createElement("div",{className:"alert alert-primary",role:"alert"},r.createElement("div",{className:"btn-toolbar justify-content-between",role:"toolbar"},pe.t("safeKeyList"),r.createElement("div",{className:"input-group"},r.createElement("div",{className:"input-group mb-3"},r.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:1===this.state.editMode||this.state.safe.offline},r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})),r.createElement("ul",{className:"dropdown-menu"},r.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return t.addSafeKey(e,"password")}},pe.t("securityTypePassword")),r.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return t.addSafeKey(e,"master-password")}},pe.t("securityTypeMasterPassword")),r.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return t.addSafeKey(e,"jwk")}},pe.t("securityTypeJwk"))))))),r.createElement("div",{className:"btn-toolbar mb-3",role:"toolbar"},n),r.createElement("div",{className:"btn-toolbar justify-content-between",role:"toolbar"},r.createElement("div",{className:"btn-group",role:"group","aria-label":"First group"},r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.saveSafe},pe.t("profileSubmit")),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.cancelEditSafe},pe.t("profileCancel"))),r.createElement("div",{className:"btn-group",role:"group","aria-label":"First group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.removeSafe,disabled:2!==this.state.editMode},pe.t("removeSafe"))))),r.createElement(Tr,{name:"removeSafe",title:pe.t("removeSafeTitle"),message:pe.t("removeSafeMessage",{name:this.state.safe.display_name||this.state.safe.name}),cb:this.removeSafeConfirm}),r.createElement(Tr,{name:"removeSafeKey",title:pe.t("removeSafeKeyTitle"),message:this.state.removeSafeKeyMessage,cb:this.removeSafeKeyConfirm}),e,r.createElement(vo,{config:this.state.config,safe:this.state.safe,safeContent:this.state.safeContent,allowKeepUnlocked:!1,cb:this.unlockSafeCallback}))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&wo(t.prototype,n),o&&wo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Ao=_o;function ko(e){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ko(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ko(o)?o:String(o)),r)}var o}function Po(e,t){return Po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Po(e,t)}function No(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},To(e)}var Io=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Po(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=To(a);if(i){var n=To(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ko(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return No(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={cb:e.cb,name:e.name,content:e.content,iconList:e.iconListOrig,iconListOrig:e.iconListOrig,iconFilter:"",displayNameError:!1},t.changeDisplayName=t.changeDisplayName.bind(No(t)),t.useIcon=t.useIcon.bind(No(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"changeDisplayName",value:function(e){var t=this.state.content;t.displayName=e.target.value,this.setState({content:t,displayNameError:!1})}},{key:"changeIconFilter",value:function(e){var t=this;this.setState({iconFilter:e.target.value},(function(){if(t.state.iconFilter){var e={};Object.keys(t.state.iconListOrig).forEach((function(n){e[n]=[],(t.state.iconListOrig[n]||[]).forEach((function(r){r.label.toUpperCase().search(t.state.iconFilter.toUpperCase())>-1&&e[n].push(r)})),e[n].length||delete e[n]})),t.setState({iconList:e})}else t.setState({iconList:t.state.iconListOrig})}))}},{key:"useIcon",value:function(e,t){e.preventDefault();var n=this.state.content;n.icon=t.icon,this.setState({content:n})}},{key:"verifyDisplayName",value:function(e){e.preventDefault(),this.state.content.displayName?this.closeModal(e,!0):this.setState({displayNameError:!0})}},{key:"closeModal",value:function(e,t){this.state.cb&&this.state.cb(t,this.state.name,this.state.content,!0)}},{key:"render",value:function(){var e,t,n=this,o=[],a="form-control";return Object.keys(this.state.iconList).forEach((function(e){var t=n.state.iconList[e]||[];o.push(r.createElement("li",{className:"list-group-item",key:e},r.createElement("span",{className:"badge bg-secondary"},e)));var a=[];t.forEach((function(t,o){a.push(r.createElement("a",{key:e+"-"+o,href:"",onClick:function(e){return n.useIcon(e,t)},className:"btn btn-primary btn-icon btn-icon-top"},r.createElement("span",{className:"btn-icon"},t.label),r.createElement("i",{className:"fa "+t.icon,"aria-hidden":"true"})))})),o.push(r.createElement("li",{className:"list-group-item",key:e+"-lst"},a))})),this.state.content.icon&&(e=r.createElement("i",{className:"btn-icon-right fa "+this.state.content.icon,"aria-hidden":"true"})),this.state.displayNameError&&(a+=" is-invalid",t=r.createElement("div",{className:"invalid-feedback"},pe.t("displayNameError"))),r.createElement("div",{className:"modal",tabIndex:"-1",id:"modalCoinEdit"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},this.state.name?pe.t("CoinEditTitle"):pe.t("CoinAddTitle")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(e){return n.closeModal(e,!1)}})),r.createElement("form",{onSubmit:function(e){return n.verifyDisplayName(e)}},r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"coinDisplayName",className:"form-label"},pe.t("coinDisplayName")),r.createElement("input",{type:"text",maxLength:"128",className:a,id:"coinDisplayName",value:this.state.content.displayName||"",onChange:function(e){return n.changeDisplayName(e)}}),t),r.createElement("hr",null),r.createElement("div",{className:"mb-3"},r.createElement("label",{className:"form-label"},pe.t("coinIconList"),e),r.createElement("input",{type:"text",maxLength:"128",className:"form-control",id:"coinIconFilter",placeholder:pe.t("coinIconFilterPh"),value:this.state.iconFilter||"",onChange:function(e){return n.changeIconFilter(e)}}),r.createElement("ul",{className:"list-group icon-list"},o))),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return n.closeModal(e,!1)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(e){return n.verifyDisplayName(e)}},pe.t("modalOk")))))))}}])&&Oo(t.prototype,n),o&&Oo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Ro=Io;var Do,xo,Mo,Lo=(Do=function(e,t){return Do=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Do(e,t)},function(e,t){function n(){this.constructor=e}Do(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Bo=function(e){function t(t){var n,r,o,a=this.constructor,i=e.call(this,t)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),n=i,r=a.prototype,(o=Object.setPrototypeOf)?o(n,r):n.__proto__=r,function(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}(i),i}return Lo(t,e),t}(Error),jo=(Mo=function(e,t){return Mo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Mo(e,t)},function(e,t){function n(){this.constructor=e}Mo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Fo=function(e){function t(t){void 0===t&&(t=void 0);var n=e.call(this,t)||this;return n.message=t,n}return jo(t,e),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(Bo),Uo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ho=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uo(t,e),t.kind="ArgumentException",t}(Fo),Vo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ko=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vo(t,e),t.kind="IllegalArgumentException",t}(Fo),Wo=function(){function e(e){if(this.binarizer=e,null===e)throw new Ko("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},e.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,n,r,o){var a=this.binarizer.getLuminanceSource().crop(t,n,r,o);return new e(this.binarizer.createBinarizer(a))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(e){return""}},e}(),zo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zo(t,e),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Fo),Xo=function(){function e(e){this.source=e}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}(),Jo=function(){function e(){}return e.arraycopy=function(e,t,n,r,o){for(;o--;)n[r++]=e[t++]},e.currentTimeMillis=function(){return Date.now()},e}(),qo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qo(t,e),t.kind="IndexOutOfBoundsException",t}(Fo),Qo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zo=function(e){function t(t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var r=e.call(this,n)||this;return r.index=t,r.message=n,r}return Qo(t,e),t.kind="ArrayIndexOutOfBoundsException",t}(Yo),$o=function(){function e(){}return e.fill=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]=t},e.fillWithin=function(t,n,r,o){e.rangeCheck(t.length,n,r);for(var a=n;a<r;a++)t[a]=o},e.rangeCheck=function(e,t,n){if(t>n)throw new Ko("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Zo(t);if(n>e)throw new Zo(n)},e.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.create=function(e,t,n){return Array.from({length:e}).map((function(e){return Array.from({length:t}).fill(n)}))},e.createInt32Array=function(e,t,n){return Array.from({length:e}).map((function(e){return Int32Array.from({length:t}).fill(n)}))},e.equals=function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},e.hashCode=function(e){var t,n;if(null===e)return 0;var r=1;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),a=o.next();!a.done;a=o.next())r=31*r+a.value}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},e.copyOf=function(e,t){return e.slice(0,t)},e.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},e.copyOfRange=function(e,t,n){var r=n-t,o=new Int32Array(r);return Jo.arraycopy(e,t,o,0,r),o},e.binarySearch=function(t,n,r){void 0===r&&(r=e.numberComparator);for(var o=0,a=t.length-1;o<=a;){var i=a+o>>1,s=r(n,t[i]);if(s>0)o=i+1;else{if(!(s<0))return i;a=i-1}}return-o-1},e.numberComparator=function(e,t){return e-t},e}(),ea=function(){function e(){}return e.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var n=31;return 0!=(t=e<<16)&&(n-=16,e=t),0!=(t=e<<8)&&(n-=8,e=t),0!=(t=e<<4)&&(n-=4,e=t),0!=(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)},e.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-(e>>>31)},e.toHexString=function(e){return e.toString(16)},e.toBinaryString=function(e){return String(parseInt(String(e),2))},e.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)},e.truncDivision=function(e,t){return Math.trunc(e/t)},e.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),ta=function(){function e(t,n){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==n?e.makeArray(t):n)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var n=e.makeArray(t);Jo.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},e.prototype.get=function(e){return 0!=(this.bits[Math.floor(e/32)]&1<<(31&e))},e.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},e.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},e.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=n[r];o&=~((1<<(31&e))-1);for(var a=n.length;0===o;){if(++r===a)return t;o=n[r]}var i=32*r+ea.numberOfTrailingZeros(o);return i>t?t:i},e.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=~n[r];o&=~((1<<(31&e))-1);for(var a=n.length;0===o;){if(++r===a)return t;o=~n[r]}var i=32*r+ea.numberOfTrailingZeros(o);return i>t?t:i},e.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},e.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ko;if(t!==e){t--;for(var n=Math.floor(e/32),r=Math.floor(t/32),o=this.bits,a=n;a<=r;a++){var i=(2<<(a<r?31:31&t))-(1<<(a>n?0:31&e));o[a]|=i}}},e.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},e.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new Ko;if(t===e)return!0;t--;for(var r=Math.floor(e/32),o=Math.floor(t/32),a=this.bits,i=r;i<=o;i++){var s=(2<<(i<o?31:31&t))-(1<<(i>r?0:31&e))&4294967295;if((a[i]&s)!==(n?s:0))return!1}return!0},e.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},e.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ko("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit(1==(e>>n-1&1))},e.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},e.prototype.xor=function(e){if(this.size!==e.size)throw new Ko("Sizes don't match");for(var t=this.bits,n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]},e.prototype.toBytes=function(e,t,n,r){for(var o=0;o<r;o++){for(var a=0,i=0;i<8;i++)this.get(e)&&(a|=1<<7-i),e++;t[n+o]=a}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits,o=0;o<n;o++){var a=r[o];a=(a=(a=(a=(a=a>>1&1431655765|(1431655765&a)<<1)>>2&858993459|(858993459&a)<<2)>>4&252645135|(252645135&a)<<4)>>8&16711935|(16711935&a)<<8)>>16&65535|(65535&a)<<16,e[t-o]=a}if(this.size!==32*n){var i=32*n-this.size,s=e[0]>>>i;for(o=1;o<n;o++){var c=e[o];s|=c<<32-i,e[o-1]=s,s=c>>>i}e[n-1]=s}this.bits=e},e.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.size===n.size&&$o.equals(this.bits,n.bits)},e.prototype.hashCode=function(){return 31*this.size+$o.hashCode(this.bits)},e.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)0==(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e}();!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(xo||(xo={}));var na,ra=xo,oa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oa(t,e),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Fo);!function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(na||(na={}));var ia,sa=function(){function e(t,n,r){for(var o,a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this.valueIdentifier=t,this.name=r,this.values="number"==typeof n?Int32Array.from([n]):n,this.otherEncodingNames=i,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var c=this.values,l=0,u=c.length;l!==u;l++){var f=c[l];e.VALUES_TO_ECI.set(f,this)}try{for(var d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),p=d.next();!p.done;p=d.next()){var h=p.value;e.NAME_TO_ECI.set(h,this)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new aa("incorect value");var n=e.VALUES_TO_ECI.get(t);if(void 0===n)throw new aa("incorect value");return n},e.getCharacterSetECIByName=function(t){var n=e.NAME_TO_ECI.get(t);if(void 0===n)throw new aa("incorect value");return n},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.getName()===n.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(na.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(na.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(na.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(na.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(na.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(na.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(na.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(na.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(na.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(na.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(na.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(na.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(na.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(na.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(na.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(na.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(na.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(na.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(na.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(na.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(na.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(na.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(na.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(na.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(na.Big5,28,"Big5"),e.GB18030=new e(na.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(na.EUC_KR,30,"EUC_KR","EUC-KR"),e}(),ca=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),la=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ca(t,e),t.kind="UnsupportedOperationException",t}(Fo),ua=function(){function e(){}return e.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&"ISO-8859-1"===t},e.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"==typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},e.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},e.encodingName=function(e){return"string"==typeof e?e:e.getName()},e.encodingCharacterSet=function(e){return e instanceof sa?e:sa.getCharacterSetECIByName(e)},e.decodeFallback=function(t,n){var r=this.encodingCharacterSet(n);if(e.isDecodeFallbackSupported(r)){for(var o="",a=0,i=t.length;a<i;a++){var s=t[a].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(r.equals(sa.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new la("Encoding "+this.encodingName(n)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(e){return e.equals(sa.UTF8)||e.equals(sa.ISO8859_1)||e.equals(sa.ASCII)},e.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)},e}(),fa=function(){function e(){}return e.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var n=t?t.getName():this.ISO88591;return ua.decode(new Uint8Array([e]),n)},e.guessEncoding=function(t,n){if(null!=n&&void 0!==n.get(ra.CHARACTER_SET))return n.get(ra.CHARACTER_SET).toString();for(var r=t.length,o=!0,a=!0,i=!0,s=0,c=0,l=0,u=0,f=0,d=0,p=0,h=0,m=0,y=0,g=0,v=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],b=0;b<r&&(o||a||i);b++){var w=255&t[b];i&&(s>0?0==(128&w)?i=!1:s--:0!=(128&w)&&(0==(64&w)?i=!1:(s++,0==(32&w)?c++:(s++,0==(16&w)?l++:(s++,0==(8&w)?u++:i=!1))))),o&&(w>127&&w<160?o=!1:w>159&&(w<192||215===w||247===w)&&g++),a&&(f>0?w<64||127===w||w>252?a=!1:f--:128===w||160===w||w>239?a=!1:w>160&&w<224?(d++,h=0,++p>m&&(m=p)):w>127?(f++,p=0,++h>y&&(y=h)):(p=0,h=0))}return i&&s>0&&(i=!1),a&&f>0&&(a=!1),i&&(v||c+l+u>0)?e.UTF8:a&&(e.ASSUME_SHIFT_JIS||m>=3||y>=3)?e.SHIFT_JIS:o&&a?2===m&&2===d||10*g>=r?e.SHIFT_JIS:e.ISO88591:o?e.ISO88591:a?e.SHIFT_JIS:i?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,(function(e,n,o,a,i,s){if("%%"===e)return"%";if(void 0!==t[++r]){e=a?parseInt(a.substr(1)):void 0;var c,l=i?parseInt(i.substr(1)):void 0;switch(s){case"s":c=t[r];break;case"c":c=t[r][0];break;case"f":c=parseFloat(t[r]).toFixed(e);break;case"p":c=parseFloat(t[r]).toPrecision(e);break;case"e":c=parseFloat(t[r]).toExponential(e);break;case"x":c=parseInt(t[r]).toString(l||16);break;case"d":c=parseFloat(parseInt(t[r],l||10).toPrecision(e)).toFixed(0)}c="object"==typeof c?JSON.stringify(c):(+c).toString(l);for(var u=parseInt(o),f=o&&o[0]+""=="0"?"0":" ";c.length<u;)c=void 0!==n?c+f:f+c;return c}}))},e.getBytes=function(e,t){return ua.encode(e,t)},e.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},e.getCharAt=function(e){return String.fromCharCode(e)},e.SHIFT_JIS=sa.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=sa.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=sa.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}(),da=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.enableDecoding=function(e){return this.encoding=e,this},e.prototype.append=function(e){return"string"==typeof e?this.value+=e.toString():this.encoding?this.value+=fa.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},e.prototype.appendChars=function(e,t,n){for(var r=t;t<t+n;r++)this.append(e[r]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(e){return this.value.charAt(e)},e.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},e.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},e.prototype.substring=function(e,t){return this.value.substring(e,t)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)},e}(),pa=function(){function e(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,null==t&&(t=e),this.height=t,e<1||t<1)throw new Ko("Both dimensions must be greater than 0");null==n&&(n=Math.floor((e+31)/32)),this.rowSize=n,null==r&&(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var n=t.length,r=t[0].length,o=new e(r,n),a=0;a<n;a++)for(var i=t[a],s=0;s<r;s++)i[s]&&o.set(s,a);return o},e.parseFromString=function(t,n,r){if(null===t)throw new Ko("stringRepresentation cannot be null");for(var o=new Array(t.length),a=0,i=0,s=-1,c=0,l=0;l<t.length;)if("\n"===t.charAt(l)||"\r"===t.charAt(l)){if(a>i){if(-1===s)s=a-i;else if(a-i!==s)throw new Ko("row lengths do not match");i=a,c++}l++}else if(t.substring(l,l+n.length)===n)l+=n.length,o[a]=!0,a++;else{if(t.substring(l,l+r.length)!==r)throw new Ko("illegal character encountered: "+t.substring(l));l+=r.length,o[a]=!1,a++}if(a>i){if(-1===s)s=a-i;else if(a-i!==s)throw new Ko("row lengths do not match");c++}for(var u=new e(s,c),f=0;f<a;f++)o[f]&&u.set(Math.floor(f%s),Math.floor(f/s));return u},e.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return 0!=(this.bits[n]>>>(31&e)&1)},e.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295},e.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)},e.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295},e.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ko("input matrix dimensions do not match");for(var t=new ta(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits,o=0,a=this.height;o<a;o++)for(var i=o*n,s=e.getRow(o,t).getBitArray(),c=0;c<n;c++)r[i+c]^=s[c]},e.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},e.prototype.setRegion=function(e,t,n,r){if(t<0||e<0)throw new Ko("Left and top must be nonnegative");if(r<1||n<1)throw new Ko("Height and width must be at least 1");var o=e+n,a=t+r;if(a>this.height||o>this.width)throw new Ko("The region must fit inside the matrix");for(var i=this.rowSize,s=this.bits,c=t;c<a;c++)for(var l=c*i,u=e;u<o;u++)s[l+Math.floor(u/32)]|=1<<(31&u)&4294967295},e.prototype.getRow=function(e,t){null==t||t.getSize()<this.width?t=new ta(this.width):t.clear();for(var n=this.rowSize,r=this.bits,o=e*n,a=0;a<n;a++)t.setBulk(32*a,r[o+a]);return t},e.prototype.setRow=function(e,t){Jo.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new ta(e),r=new ta(e),o=0,a=Math.floor((t+1)/2);o<a;o++)n=this.getRow(o,n),r=this.getRow(t-1-o,r),n.reverse(),r.reverse(),this.setRow(o,r),this.setRow(t-1-o,n)},e.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,r=this.bits,o=e,a=t,i=-1,s=-1,c=0;c<t;c++)for(var l=0;l<n;l++){var u=r[c*n+l];if(0!==u){if(c<a&&(a=c),c>s&&(s=c),32*l<o){for(var f=0;0==(u<<31-f&4294967295);)f++;32*l+f<o&&(o=32*l+f)}if(32*l+31>i){for(f=31;u>>>f==0;)f--;32*l+f>i&&(i=32*l+f)}}}return i<o||s<a?null:Int32Array.from([o,a,i-o+1,s-a+1])},e.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&0===t[n];)n++;if(n===t.length)return null;for(var r=n/e,o=n%e*32,a=t[n],i=0;0==(a<<31-i&4294967295);)i++;return o+=i,Int32Array.from([o,r])},e.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&0===t[n];)n--;if(n<0)return null;for(var r=Math.floor(n/e),o=32*Math.floor(n%e),a=t[n],i=31;a>>>i==0;)i--;return o+=i,Int32Array.from([o,r])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&$o.equals(this.bits,n.bits)},e.prototype.hashCode=function(){var e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+$o.hashCode(this.bits)},e.prototype.toString=function(e,t,n){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===n&&(n="\n"),this.buildToString(e,t,n)},e.prototype.buildToString=function(e,t,n){for(var r=new da,o=0,a=this.height;o<a;o++){for(var i=0,s=this.width;i<s;i++)r.append(this.get(i,o)?e:t);r.append(n)}return r.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}(),ha=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ma=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ha(t,e),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Fo),ya=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ga=function(e){function t(n){var r=e.call(this,n)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return ya(t,e),t.prototype.getBlackRow=function(e,n){var r=this.getLuminanceSource(),o=r.getWidth();null==n||n.getSize()<o?n=new ta(o):n.clear(),this.initArrays(o);for(var a=r.getRow(e,this.luminances),i=this.buckets,s=0;s<o;s++)i[(255&a[s])>>t.LUMINANCE_SHIFT]++;var c=t.estimateBlackPoint(i);if(o<3)for(s=0;s<o;s++)(255&a[s])<c&&n.set(s);else{var l=255&a[0],u=255&a[1];for(s=1;s<o-1;s++){var f=255&a[s+1];(4*u-l-f)/2<c&&n.set(s),l=u,u=f}}return n},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),o=new pa(n,r);this.initArrays(n);for(var a=this.buckets,i=1;i<5;i++)for(var s=Math.floor(r*i/5),c=e.getRow(s,this.luminances),l=Math.floor(4*n/5),u=Math.floor(n/5);u<l;u++)a[(255&c[u])>>t.LUMINANCE_SHIFT]++;var f=t.estimateBlackPoint(a),d=e.getMatrix();for(i=0;i<r;i++){var p=i*n;for(u=0;u<n;u++)(255&d[p+u])<f&&o.set(u,i)}return o},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var n=this.buckets,r=0;r<t.LUMINANCE_BUCKETS;r++)n[r]=0},t.estimateBlackPoint=function(e){for(var n=e.length,r=0,o=0,a=0,i=0;i<n;i++)e[i]>a&&(o=i,a=e[i]),e[i]>r&&(r=e[i]);var s=0,c=0;for(i=0;i<n;i++){var l=i-o;(p=e[i]*l*l)>c&&(s=i,c=p)}if(o>s){var u=o;o=s,s=u}if(s-o<=n/16)throw new ma;var f=s-1,d=-1;for(i=s-1;i>o;i--){var p,h=i-o;(p=h*h*(s-i)*(r-e[i]))>d&&(f=i,d=p)}return f<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(Xo),va=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ba=function(e){function t(t){var n=e.call(this,t)||this;return n.matrix=null,n}return va(t,e),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),o=n.getHeight();if(r>=t.MINIMUM_DIMENSION&&o>=t.MINIMUM_DIMENSION){var a=n.getMatrix(),i=r>>t.BLOCK_SIZE_POWER;0!=(r&t.BLOCK_SIZE_MASK)&&i++;var s=o>>t.BLOCK_SIZE_POWER;0!=(o&t.BLOCK_SIZE_MASK)&&s++;var c=t.calculateBlackPoints(a,i,s,r,o),l=new pa(r,o);t.calculateThresholdForBlock(a,i,s,r,o,c,l),this.matrix=l}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,n,r,o,a,i,s){for(var c=a-t.BLOCK_SIZE,l=o-t.BLOCK_SIZE,u=0;u<r;u++){var f=u<<t.BLOCK_SIZE_POWER;f>c&&(f=c);for(var d=t.cap(u,2,r-3),p=0;p<n;p++){var h=p<<t.BLOCK_SIZE_POWER;h>l&&(h=l);for(var m=t.cap(p,2,n-3),y=0,g=-2;g<=2;g++){var v=i[d+g];y+=v[m-2]+v[m-1]+v[m]+v[m+1]+v[m+2]}var b=y/25;t.thresholdBlock(e,h,f,b,o,s)}}},t.cap=function(e,t,n){return e<t?t:e>n?n:e},t.thresholdBlock=function(e,n,r,o,a,i){for(var s=0,c=r*a+n;s<t.BLOCK_SIZE;s++,c+=a)for(var l=0;l<t.BLOCK_SIZE;l++)(255&e[c+l])<=o&&i.set(n+l,r+s)},t.calculateBlackPoints=function(e,n,r,o,a){for(var i=a-t.BLOCK_SIZE,s=o-t.BLOCK_SIZE,c=new Array(r),l=0;l<r;l++){c[l]=new Int32Array(n);var u=l<<t.BLOCK_SIZE_POWER;u>i&&(u=i);for(var f=0;f<n;f++){var d=f<<t.BLOCK_SIZE_POWER;d>s&&(d=s);for(var p=0,h=255,m=0,y=0,g=u*o+d;y<t.BLOCK_SIZE;y++,g+=o){for(var v=0;v<t.BLOCK_SIZE;v++){var b=255&e[g+v];p+=b,b<h&&(h=b),b>m&&(m=b)}if(m-h>t.MIN_DYNAMIC_RANGE)for(y++,g+=o;y<t.BLOCK_SIZE;y++,g+=o)for(v=0;v<t.BLOCK_SIZE;v++)p+=255&e[g+v]}var w=p>>2*t.BLOCK_SIZE_POWER;if(m-h<=t.MIN_DYNAMIC_RANGE&&(w=h/2,l>0&&f>0)){var E=(c[l-1][f]+2*c[l][f-1]+c[l-1][f-1])/4;h<E&&(w=E)}c[l][f]=w}}return c},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(ga),wa=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(e,t,n,r){throw new la("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new la("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new la("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new da,n=0;n<this.height;n++){for(var r=this.getRow(n,e),o=0;o<this.width;o++){var a,i=255&r[o];a=i<64?"#":i<128?"+":i<192?".":" ",t.append(a)}t.append("\n")}return t.toString()},e}(),Ea=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sa=function(e){function t(t){var n=e.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return Ea(t,e),t.prototype.getRow=function(e,t){for(var n=this.delegate.getRow(e,t),r=this.getWidth(),o=0;o<r;o++)n[o]=255-(255&n[o]);return n},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t),r=0;r<t;r++)n[r]=255-(255&e[r]);return n},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,n,r,o){return new t(this.delegate.crop(e,n,r,o))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(wa),Ca=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_a=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(n),r}return Ca(t,e),t.makeBufferFromCanvasImageData=function(e){var n=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(n.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,n){for(var r=new Uint8ClampedArray(t*n),o=0,a=0,i=e.length;o<i;o+=4,a++){var s;s=0===e[o+3]?255:306*e[o]+601*e[o+1]+117*e[o+2]+512>>10,r[a]=s}return r},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Ko("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,o){return e.prototype.crop.call(this,t,n,r,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement(),r=n.getContext("2d"),o=e*t.DEGREE_TO_RADIANS,a=this.canvas.width,i=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*i),c=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*i);return n.width=s,n.height=c,r.translate(s/2,c/2),r.rotate(o),r.drawImage(this.canvas,a/-2,i/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.prototype.invert=function(){return new Sa(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t}(wa),Aa=function(){function e(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),ka=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Oa=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Pa=function(){function e(e,t,n){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return ka(this,void 0,void 0,(function(){var e,t,n,r,o,a,i,s,c,l,u,f;return Oa(this,(function(d){switch(d.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=d.sent(),t=[];try{for(n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r=n.next();!r.done;r=n.next())o=r.value,"videoinput"===(a="video"===o.kind?"videoinput":o.kind)&&(i=o.deviceId||o.id,s=o.label||"Video device "+(t.length+1),c=o.groupId,l={deviceId:i,label:s,kind:a,groupId:c},t.push(l))}catch(e){u={error:e}}finally{try{r&&!r.done&&(f=n.return)&&f.call(n)}finally{if(u)throw u.error}}return[2,t]}}))}))},e.prototype.getVideoInputDevices=function(){return ka(this,void 0,void 0,(function(){return Oa(this,(function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map((function(e){return new Aa(e.deviceId,e.label)}))]}}))}))},e.prototype.findDeviceById=function(e){return ka(this,void 0,void 0,(function(){var t;return Oa(this,(function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=n.sent())?[2,t.find((function(t){return t.deviceId===e}))]:[2,null]}}))}))},e.prototype.decodeFromInputVideoDevice=function(e,t){return ka(this,void 0,void 0,(function(){return Oa(this,(function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.decodeOnceFromVideoDevice=function(e,t){return ka(this,void 0,void 0,(function(){var n;return Oa(this,(function(r){switch(r.label){case 0:return this.reset(),n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromConstraints=function(e,t){return ka(this,void 0,void 0,(function(){var n;return Oa(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromStream=function(e,t){return ka(this,void 0,void 0,(function(){var n;return Oa(this,(function(r){switch(r.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=r.sent(),[4,this.decodeOnce(n)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return ka(this,void 0,void 0,(function(){return Oa(this,(function(r){switch(r.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeFromVideoDevice=function(e,t,n){return ka(this,void 0,void 0,(function(){var r;return Oa(this,(function(o){switch(o.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(r,t,n)];case 1:return[2,o.sent()]}}))}))},e.prototype.decodeFromConstraints=function(e,t,n){return ka(this,void 0,void 0,(function(){var r;return Oa(this,(function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=o.sent(),[4,this.decodeFromStream(r,t,n)];case 2:return[2,o.sent()]}}))}))},e.prototype.decodeFromStream=function(e,t,n){return ka(this,void 0,void 0,(function(){var r;return Oa(this,(function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeContinuously(r,n)];case 2:return[2,o.sent()]}}))}))},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(e,t){return ka(this,void 0,void 0,(function(){var n;return Oa(this,(function(r){switch(r.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return r.sent(),[2,n]}}))}))},e.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise((function(n,r){return t.playVideoOnLoad(e,(function(){return n()}))}))},e.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},e.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},e.prototype.tryPlayVideo=function(e){return ka(this,void 0,void 0,(function(){return Oa(this,(function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}}))}))},e.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Ho("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Ho("element with id '"+e+"' must be an "+t+" element");return n},e.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Ho("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},e.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Ho("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},e.prototype.decodeFromVideoContinuously=function(e,t,n){if(void 0===e&&void 0===t)throw new Ho("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},e.prototype.decodeFromImageElement=function(e){if(!e)throw new Ho("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},e.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},e.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},e.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ho("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},e.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ho("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},e.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ho("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},e.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Ho("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r},e.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise((function(n,r){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,r)},e.addEventListener("load",t.imageLoadedListener)}))},e.prototype._decodeOnLoadVideo=function(e){return ka(this,void 0,void 0,(function(){return Oa(this,(function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}}))}))},e.prototype._decodeOnLoadVideoContinuously=function(e,t){return ka(this,void 0,void 0,(function(){return Oa(this,(function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}}))}))},e.prototype.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.prototype.prepareImageElement=function(e){var t;return void 0===e&&((t=document.createElement("img")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},e.prototype.prepareVideoElement=function(e){var t;return e||"undefined"==typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},e.prototype.decodeOnce=function(e,t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=!0),this._stopAsyncDecode=!1;var o=function(a,i){if(r._stopAsyncDecode)return i(new ma("Video stream has ended before any code could be detected.")),void(r._stopAsyncDecode=void 0);try{a(r.decode(e))}catch(e){if(t&&e instanceof ma||(e instanceof Go||e instanceof aa)&&n)return setTimeout(o,r._timeBetweenDecodingAttempts,a,i);i(e)}};return new Promise((function(e,t){return o(e,t)}))},e.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var r=function(){if(n._stopContinuousDecode)n._stopContinuousDecode=void 0;else try{var o=n.decode(e);t(o,null),setTimeout(r,n.timeBetweenScansMillis)}catch(e){t(null,e),(e instanceof Go||e instanceof aa||e instanceof ma)&&setTimeout(r,n._timeBetweenDecodingAttempts)}};r()},e.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},e.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e);this.drawImageOnCanvas(t,e);var n=this.getCaptureCanvas(e),r=new _a(n),o=new ba(r);return new Wo(o)},e.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},e.prototype.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},e.prototype.createCaptureCanvas=function(e){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var t,n,r=document.createElement("canvas");return void 0!==e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach((function(e){return e.stop()})),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")},e}(),Na=function(){function e(e,t,n,r,o,a){void 0===n&&(n=null==t?0:8*t.length),void 0===a&&(a=Jo.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=t,this.numBits=null==n?null==t?0:8*t.length:n,this.resultPoints=r,this.format=o,this.resultMetadata=null,this.timestamp=null==a?Jo.currentTimeMillis():a}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},e.prototype.putAllMetadata=function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))},e.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var n=new Array(t.length+e.length);Jo.arraycopy(t,0,n,0,t.length),Jo.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}();!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(ia||(ia={}));var Ta,Ia=ia;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(Ta||(Ta={}));var Ra,Da=Ta,xa=function(){function e(e,t,n,r,o,a){void 0===o&&(o=-1),void 0===a&&(a=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=null==e?0:8*e.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(e){this.numBits=e},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(e){this.erasures=e},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(e){this.other=e},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}(),Ma=function(){function e(){}return e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new Ko;return this.logTable[e]},e.addOrSubtract=function(e,t){return e^t},e}(),La=function(){function e(e,t){if(0===t.length)throw new Ko;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),Jo.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t,n=this.coefficients;if(1===e){t=0;for(var r=0,o=n.length;r!==o;r++){var a=n[r];t=Ma.addOrSubtract(t,a)}return t}t=n[0];var i=n.length,s=this.field;for(r=1;r<i;r++)t=Ma.addOrSubtract(s.multiply(e,t),n[r]);return t},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new Ko("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var a=new Int32Array(r.length),i=r.length-n.length;Jo.arraycopy(r,0,a,0,i);for(var s=i;s<r.length;s++)a[s]=Ma.addOrSubtract(n[s-i],r[s]);return new e(this.field,a)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new Ko("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,o=t.coefficients,a=o.length,i=new Int32Array(r+a-1),s=this.field,c=0;c<r;c++)for(var l=n[c],u=0;u<a;u++)i[c+u]=Ma.addOrSubtract(i[c+u],s.multiply(l,o[u]));return new e(s,i)},e.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,r=this.field,o=new Int32Array(n),a=this.coefficients,i=0;i<n;i++)o[i]=r.multiply(a[i],t);return new e(r,o)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Ko;if(0===n)return this.field.getZero();for(var r=this.coefficients,o=r.length,a=new Int32Array(o+t),i=this.field,s=0;s<o;s++)a[s]=i.multiply(r[s],n);return new e(i,a)},e.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ko("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ko("Divide by 0");for(var t=this.field,n=t.getZero(),r=this,o=e.getCoefficient(e.getDegree()),a=t.inverse(o);r.getDegree()>=e.getDegree()&&!r.isZero();){var i=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),a),c=e.multiplyByMonomial(i,s),l=t.buildMonomial(i,s);n=n.addOrSubtract(l),r=r.addOrSubtract(c)}return[n,r]},e.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){var r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},e}(),Ba=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ba(t,e),t.kind="ArithmeticException",t}(Fo),Fa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ua=function(e){function t(t,n,r){var o=e.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=r;for(var a=new Int32Array(n),i=1,s=0;s<n;s++)a[s]=i,(i*=2)>=n&&(i^=t,i&=n-1);o.expTable=a;var c=new Int32Array(n);for(s=0;s<n-1;s++)c[a[s]]=s;return o.logTable=c,o.zero=new La(o,Int32Array.from([0])),o.one=new La(o,Int32Array.from([1])),o}return Fa(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new Ko;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new La(this,n)},t.prototype.inverse=function(e){if(0===e)throw new ja;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+ea.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(Ma),Ha=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Va=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ha(t,e),t.kind="ReedSolomonException",t}(Fo),Ka=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ka(t,e),t.kind="IllegalStateException",t}(Fo),za=function(){function e(e){this.field=e}return e.prototype.decode=function(e,t){for(var n=this.field,r=new La(n,e),o=new Int32Array(t),a=!0,i=0;i<t;i++){var s=r.evaluateAt(n.exp(i+n.getGeneratorBase()));o[o.length-1-i]=s,0!==s&&(a=!1)}if(!a){var c=new La(n,o),l=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),u=l[0],f=l[1],d=this.findErrorLocations(u),p=this.findErrorMagnitudes(f,d);for(i=0;i<d.length;i++){var h=e.length-1-n.log(d[i]);if(h<0)throw new Va("Bad error location");e[h]=Ua.addOrSubtract(e[h],p[i])}}},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=this.field,a=e,i=t,s=o.getZero(),c=o.getOne();i.getDegree()>=(n/2|0);){var l=a,u=s;if(s=c,(a=i).isZero())throw new Va("r_{i-1} was zero");i=l;for(var f=o.getZero(),d=a.getCoefficient(a.getDegree()),p=o.inverse(d);i.getDegree()>=a.getDegree()&&!i.isZero();){var h=i.getDegree()-a.getDegree(),m=o.multiply(i.getCoefficient(i.getDegree()),p);f=f.addOrSubtract(o.buildMonomial(h,m)),i=i.addOrSubtract(a.multiplyByMonomial(h,m))}if(c=f.multiply(s).addOrSubtract(u),i.getDegree()>=a.getDegree())throw new Wa("Division algorithm failed to reduce polynomial?")}var y=c.getCoefficient(0);if(0===y)throw new Va("sigmaTilde(0) was zero");var g=o.inverse(y);return[c.multiplyScalar(g),i.multiplyScalar(g)]},e.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),r=0,o=this.field,a=1;a<o.getSize()&&r<t;a++)0===e.evaluateAt(a)&&(n[r]=o.inverse(a),r++);if(r!==t)throw new Va("Error locator degree does not match number of roots");return n},e.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,r=new Int32Array(n),o=this.field,a=0;a<n;a++){for(var i=o.inverse(t[a]),s=1,c=0;c<n;c++)if(a!==c){var l=o.multiply(t[c],i),u=0==(1&l)?1|l:-2&l;s=o.multiply(s,u)}r[a]=o.multiply(e.evaluateAt(i),o.inverse(s)),0!==o.getGeneratorBase()&&(r[a]=o.multiply(r[a],i))}return r},e}();!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(Ra||(Ra={}));var Ga=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var n=t.getBits(),r=this.extractBits(n),o=this.correctBits(r),a=e.convertBoolArrayToByteArray(o),i=e.getEncodedData(o),s=new xa(a,i,null,null);return s.setNumBits(o.length),s},e.highLevelDecode=function(e){return this.getEncodedData(e)},e.getEncodedData=function(t){for(var n=t.length,r=Ra.UPPER,o=Ra.UPPER,a="",i=0;i<n;)if(o===Ra.BINARY){if(n-i<5)break;var s=e.readCode(t,i,5);if(i+=5,0===s){if(n-i<11)break;s=e.readCode(t,i,11)+31,i+=11}for(var c=0;c<s;c++){if(n-i<8){i=n;break}var l=e.readCode(t,i,8);a+=fa.castAsNonUtf8Char(l),i+=8}o=r}else{var u=o===Ra.DIGIT?4:5;if(n-i<u)break;l=e.readCode(t,i,u),i+=u;var f=e.getCharacter(o,l);f.startsWith("CTRL_")?(r=o,o=e.getTable(f.charAt(5)),"L"===f.charAt(6)&&(r=o)):(a+=f,o=r)}return a},e.getTable=function(e){switch(e){case"L":return Ra.LOWER;case"P":return Ra.PUNCT;case"M":return Ra.MIXED;case"D":return Ra.DIGIT;case"B":return Ra.BINARY;default:return Ra.UPPER}},e.getCharacter=function(t,n){switch(t){case Ra.UPPER:return e.UPPER_TABLE[n];case Ra.LOWER:return e.LOWER_TABLE[n];case Ra.MIXED:return e.MIXED_TABLE[n];case Ra.PUNCT:return e.PUNCT_TABLE[n];case Ra.DIGIT:return e.DIGIT_TABLE[n];default:throw new Wa("Bad table")}},e.prototype.correctBits=function(t){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=Ua.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=Ua.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=Ua.AZTEC_DATA_10):(r=12,n=Ua.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),a=t.length/r;if(a<o)throw new aa;for(var i=t.length%r,s=new Int32Array(a),c=0;c<a;c++,i+=r)s[c]=e.readCode(t,i,r);try{new za(n).decode(s,a-o)}catch(e){throw new aa(e)}var l=(1<<r)-1,u=0;for(c=0;c<o;c++){if(0===(p=s[c])||p===l)throw new aa;1!==p&&p!==l-1||u++}var f=new Array(o*r-u),d=0;for(c=0;c<o;c++){var p;if(1===(p=s[c])||p===l-1)f.fill(p>1,d,d+r-1),d+=r-1;else for(var h=r-1;h>=0;--h)f[d++]=0!=(p&1<<h)}return f},e.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,o=new Int32Array(r),a=new Array(this.totalBitsInLayer(n,t));if(t)for(var i=0;i<o.length;i++)o[i]=i;else{var s=r+1+2*ea.truncDivision(ea.truncDivision(r,2)-1,15),c=r/2,l=ea.truncDivision(s,2);for(i=0;i<c;i++){var u=i+ea.truncDivision(i,15);o[c-i-1]=l-u-1,o[c+i]=l+u+1}}i=0;for(var f=0;i<n;i++){for(var d=4*(n-i)+(t?9:12),p=2*i,h=r-1-p,m=0;m<d;m++)for(var y=2*m,g=0;g<2;g++)a[f+y+g]=e.get(o[p+g],o[p+m]),a[f+2*d+y+g]=e.get(o[p+m],o[h-g]),a[f+4*d+y+g]=e.get(o[h-g],o[h-m]),a[f+6*d+y+g]=e.get(o[h-m],o[p+g]);f+=8*d}return a},e.readCode=function(e,t,n){for(var r=0,o=t;o<t+n;o++)r<<=1,e[o]&&(r|=1);return r},e.readByte=function(t,n){var r=t.length-n;return r>=8?e.readCode(t,n,8):e.readCode(t,n,r)<<8-r},e.convertBoolArrayToByteArray=function(t){for(var n=new Uint8Array((t.length+7)/8),r=0;r<n.length;r++)n[r]=e.readByte(t,8*r);return n},e.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}(),Xa=function(){function e(){}return e.round=function(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},e.distance=function(e,t,n,r){var o=e-n,a=t-r;return Math.sqrt(o*o+a*a)},e.sum=function(e){for(var t=0,n=0,r=e.length;n!==r;n++)t+=e[n];return t},e}(),Ja=function(){function e(){}return e.floatToIntBits=function(e){return e},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),qa=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.x===n.x&&this.y===n.y}return!1},e.prototype.hashCode=function(){return 31*Ja.floatToIntBits(this.x)+Ja.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(e){var t,n,r,o=this.distance(e[0],e[1]),a=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);if(a>=o&&a>=i?(n=e[0],t=e[1],r=e[2]):i>=a&&i>=o?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),this.crossProductZ(t,n,r)<0){var s=t;t=r,r=s}e[0]=t,e[1]=n,e[2]=r},e.distance=function(e,t){return Xa.distance(e.x,e.y,t.x,t.y)},e.crossProductZ=function(e,t,n){var r=t.x,o=t.y;return(n.x-r)*(e.y-o)-(n.y-o)*(e.x-r)},e}(),Ya=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),Qa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Za=function(e){function t(t,n,r,o,a){var i=e.call(this,t,n)||this;return i.compact=r,i.nbDatablocks=o,i.nbLayers=a,i}return Qa(t,e),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(Ya),$a=function(){function e(t,n,r,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==n&&(n=e.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==o&&(o=t.getHeight()/2|0);var a=n/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ma}return e.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,o=!1,a=!0,i=!1,s=!1,c=!1,l=!1,u=!1,f=this.width,d=this.height;a;){a=!1;for(var p=!0;(p||!s)&&t<f;)(p=this.containsBlackPoint(n,r,t,!1))?(t++,a=!0,s=!0):s||t++;if(t>=f){o=!0;break}for(var h=!0;(h||!c)&&r<d;)(h=this.containsBlackPoint(e,t,r,!0))?(r++,a=!0,c=!0):c||r++;if(r>=d){o=!0;break}for(var m=!0;(m||!l)&&e>=0;)(m=this.containsBlackPoint(n,r,e,!1))?(e--,a=!0,l=!0):l||e--;if(e<0){o=!0;break}for(var y=!0;(y||!u)&&n>=0;)(y=this.containsBlackPoint(e,t,n,!0))?(n--,a=!0,u=!0):u||n--;if(n<0){o=!0;break}a&&(i=!0)}if(!o&&i){for(var g=t-e,v=null,b=1;null===v&&b<g;b++)v=this.getBlackPointOnSegment(e,r-b,e+b,r);if(null==v)throw new ma;var w=null;for(b=1;null===w&&b<g;b++)w=this.getBlackPointOnSegment(e,n+b,e+b,n);if(null==w)throw new ma;var E=null;for(b=1;null===E&&b<g;b++)E=this.getBlackPointOnSegment(t,n+b,t-b,n);if(null==E)throw new ma;var S=null;for(b=1;null===S&&b<g;b++)S=this.getBlackPointOnSegment(t,r-b,t-b,r);if(null==S)throw new ma;return this.centerEdges(S,v,E,w)}throw new ma},e.prototype.getBlackPointOnSegment=function(e,t,n,r){for(var o=Xa.round(Xa.distance(e,t,n,r)),a=(n-e)/o,i=(r-t)/o,s=this.image,c=0;c<o;c++){var l=Xa.round(e+c*a),u=Xa.round(t+c*i);if(s.get(l,u))return new qa(l,u)}return null},e.prototype.centerEdges=function(t,n,r,o){var a=t.getX(),i=t.getY(),s=n.getX(),c=n.getY(),l=r.getX(),u=r.getY(),f=o.getX(),d=o.getY(),p=e.CORR;return a<this.width/2?[new qa(f-p,d+p),new qa(s+p,c+p),new qa(l-p,u-p),new qa(a+p,i-p)]:[new qa(f+p,d+p),new qa(s+p,c-p),new qa(l-p,u+p),new qa(a-p,i-p)]},e.prototype.containsBlackPoint=function(e,t,n,r){var o=this.image;if(r){for(var a=e;a<=t;a++)if(o.get(a,n))return!0}else for(var i=e;i<=t;i++)if(o.get(n,i))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}(),ei=function(){function e(){}return e.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),r=e.getHeight(),o=!0,a=0;a<t.length&&o;a+=2){var i=Math.floor(t[a]),s=Math.floor(t[a+1]);if(i<-1||i>n||s<-1||s>r)throw new ma;o=!1,-1===i?(t[a]=0,o=!0):i===n&&(t[a]=n-1,o=!0),-1===s?(t[a+1]=0,o=!0):s===r&&(t[a+1]=r-1,o=!0)}for(o=!0,a=t.length-2;a>=0&&o;a-=2){if(i=Math.floor(t[a]),s=Math.floor(t[a+1]),i<-1||i>n||s<-1||s>r)throw new ma;o=!1,-1===i?(t[a]=0,o=!0):i===n&&(t[a]=n-1,o=!0),-1===s?(t[a+1]=0,o=!0):s===r&&(t[a+1]=r-1,o=!0)}},e}(),ti=function(){function e(e,t,n,r,o,a,i,s,c){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=o,this.a32=a,this.a13=i,this.a23=s,this.a33=c}return e.quadrilateralToQuadrilateral=function(t,n,r,o,a,i,s,c,l,u,f,d,p,h,m,y){var g=e.quadrilateralToSquare(t,n,r,o,a,i,s,c);return e.squareToQuadrilateral(l,u,f,d,p,h,m,y).times(g)},e.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,r=this.a12,o=this.a13,a=this.a21,i=this.a22,s=this.a23,c=this.a31,l=this.a32,u=this.a33,f=0;f<t;f+=2){var d=e[f],p=e[f+1],h=o*d+s*p+u;e[f]=(n*d+a*p+c)/h,e[f+1]=(r*d+i*p+l)/h}},e.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,r=this.a12,o=this.a13,a=this.a21,i=this.a22,s=this.a23,c=this.a31,l=this.a32,u=this.a33,f=e.length,d=0;d<f;d++){var p=e[d],h=t[d],m=o*p+s*h+u;e[d]=(n*p+a*h+c)/m,t[d]=(r*p+i*h+l)/m}},e.squareToQuadrilateral=function(t,n,r,o,a,i,s,c){var l=t-r+a-s,u=n-o+i-c;if(0===l&&0===u)return new e(r-t,a-r,t,o-n,i-o,n,0,0,1);var f=r-a,d=s-a,p=o-i,h=c-i,m=f*h-d*p,y=(l*h-d*u)/m,g=(f*u-l*p)/m;return new e(r-t+y*r,s-t+g*s,t,o-n+y*o,c-n+g*c,n,y,g,1)},e.quadrilateralToSquare=function(t,n,r,o,a,i,s,c){return e.squareToQuadrilateral(t,n,r,o,a,i,s,c).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}(),ni=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ni(t,e),t.prototype.sampleGrid=function(e,t,n,r,o,a,i,s,c,l,u,f,d,p,h,m,y,g,v){var b=ti.quadrilateralToQuadrilateral(r,o,a,i,s,c,l,u,f,d,p,h,m,y,g,v);return this.sampleGridWithTransform(e,t,n,b)},t.prototype.sampleGridWithTransform=function(e,t,n,r){if(t<=0||n<=0)throw new ma;for(var o=new pa(t,n),a=new Float32Array(2*t),i=0;i<n;i++){for(var s=a.length,c=i+.5,l=0;l<s;l+=2)a[l]=l/2+.5,a[l+1]=c;r.transformPoints(a),ei.checkAndNudgePoints(e,a);try{for(l=0;l<s;l+=2)e.get(Math.floor(a[l]),Math.floor(a[l+1]))&&o.set(l/2,i)}catch(e){throw new ma}}return o},t}(ei),oi=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new ri,e}(),ai=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toResultPoint=function(){return new qa(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}(),ii=function(){function e(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var r=n[0];n[0]=n[2],n[2]=r}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new Za(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new ma;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var r=0,o=0;o<4;o++){var a=n[(this.shift+o)%4];this.compact?(r<<=7,r+=a>>1&127):(r<<=10,r+=(a>>2&992)+(a>>1&31))}var i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))},e.prototype.getRotation=function(e,t){var n=0;e.forEach((function(e,r,o){n=(e>>t-2<<1)+(1&e)+(n<<3)})),n=((1&n)<<11)+(n>>1);for(var r=0;r<4;r++)if(ea.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new ma},e.prototype.getCorrectedParameterData=function(e,t){var n,r;t?(n=7,r=2):(n=10,r=4);for(var o=n-r,a=new Int32Array(n),i=n-1;i>=0;--i)a[i]=15&e,e>>=4;try{new za(Ua.AZTEC_PARAM).decode(a,o)}catch(e){throw new ma}var s=0;for(i=0;i<r;i++)s=(s<<4)+a[i];return s},e.prototype.getBullsEyeCorners=function(e){var t=e,n=e,r=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var i=this.getFirstDifferent(t,a,1,-1),s=this.getFirstDifferent(n,a,1,1),c=this.getFirstDifferent(r,a,-1,1),l=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var u=this.distancePoint(l,i)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(u<.75||u>1.25||!this.isWhiteOrBlackRectangle(i,s,c,l))break}t=i,n=s,r=c,o=l,a=!a}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new ma;this.compact=5===this.nbCenterLayers;var f=new qa(t.getX()+.5,t.getY()-.5),d=new qa(n.getX()+.5,n.getY()+.5),p=new qa(r.getX()-.5,r.getY()+.5),h=new qa(o.getX()-.5,o.getY()-.5);return this.expandSquare([f,d,p,h],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var e,t,n,r;try{e=(c=new $a(this.image).detect())[0],t=c[1],n=c[2],r=c[3]}catch(i){var o=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new ai(o+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ai(o+7,a+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ai(o-7,a+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ai(o-7,a-7),!1,-1,-1).toResultPoint()}var i=Xa.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Xa.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{var c;e=(c=new $a(this.image,15,i,s).detect())[0],t=c[1],n=c[2],r=c[3]}catch(o){e=this.getFirstDifferent(new ai(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ai(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ai(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ai(i-7,s-7),!1,-1,-1).toResultPoint()}return i=Xa.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Xa.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ai(i,s)},e.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(e,t,n,r,o){var a=oi.getInstance(),i=this.getDimension(),s=i/2-this.nbCenterLayers,c=i/2+this.nbCenterLayers;return a.sampleGrid(e,i,i,s,s,c,s,c,c,s,c,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),o.getX(),o.getY())},e.prototype.sampleLine=function(e,t,n){for(var r=0,o=this.distanceResultPoint(e,t),a=o/n,i=e.getX(),s=e.getY(),c=a*(t.getX()-e.getX())/o,l=a*(t.getY()-e.getY())/o,u=0;u<n;u++)this.image.get(Xa.round(i+u*c),Xa.round(s+u*l))&&(r|=1<<n-u-1);return r},e.prototype.isWhiteOrBlackRectangle=function(e,t,n,r){e=new ai(e.getX()-3,e.getY()+3),t=new ai(t.getX()-3,t.getY()-3),n=new ai(n.getX()+3,n.getY()-3),r=new ai(r.getX()+3,r.getY()+3);var o=this.getColor(r,e);if(0===o)return!1;var a=this.getColor(e,t);return a===o&&(a=this.getColor(t,n))===o&&(a=this.getColor(n,r))===o},e.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,a=0,i=e.getX(),s=e.getY(),c=this.image.get(e.getX(),e.getY()),l=Math.ceil(n),u=0;u<l;u++)i+=r,s+=o,this.image.get(Xa.round(i),Xa.round(s))!==c&&a++;var f=a/n;return f>.1&&f<.9?0:f<=.1===c?1:-1},e.prototype.getFirstDifferent=function(e,t,n,r){for(var o=e.getX()+n,a=e.getY()+r;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n,a+=r;for(o-=n,a-=r;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n;for(o-=n;this.isValid(o,a)&&this.image.get(o,a)===t;)a+=r;return new ai(o,a-=r)},e.prototype.expandSquare=function(e,t,n){var r=n/(2*t),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),i=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,c=new qa(i+r*o,s+r*a),l=new qa(i-r*o,s-r*a);return o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),i=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[c,new qa(i+r*o,s+r*a),l,new qa(i-r*o,s-r*a)]},e.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},e.prototype.isValidPoint=function(e){var t=Xa.round(e.getX()),n=Xa.round(e.getY());return this.isValid(t,n)},e.prototype.distancePoint=function(e,t){return Xa.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.distanceResultPoint=function(e,t){return Xa.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ea.truncDivision(this.nbLayers-4,8)+1)+15},e}(),si=function(){function e(){}return e.prototype.decode=function(e,t){void 0===t&&(t=null);var n=null,r=new ii(e.getBlackMatrix()),o=null,a=null;try{o=(i=r.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,o),a=(new Ga).decode(i)}catch(e){n=e}if(null==a)try{var i;o=(i=r.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,o),a=(new Ga).decode(i)}catch(e){if(null!=n)throw n;throw e}var s=new Na(a.getText(),a.getRawBytes(),a.getNumBits(),o,Ia.AZTEC,Jo.currentTimeMillis()),c=a.getByteSegments();null!=c&&s.putMetadata(Da.BYTE_SEGMENTS,c);var l=a.getECLevel();return null!=l&&s.putMetadata(Da.ERROR_CORRECTION_LEVEL,l),s},e.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var n=e.get(ra.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((function(e,t,r){n.foundPossibleResultPoint(e)}))}},e.prototype.reset=function(){},e}(),ci=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){ci((function(t){return void 0===t&&(t=500),e.call(this,new si,t)||this}),e)}(Pa);var li=function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(l){if(t&&!0===t.get(ra.TRY_HARDER)&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),r=this.doDecode(n,t),o=r.getResultMetadata(),a=270;null!==o&&!0===o.get(Da.ORIENTATION)&&(a+=o.get(Da.ORIENTATION)%360),r.putMetadata(Da.ORIENTATION,a);var i=r.getResultPoints();if(null!==i)for(var s=n.getHeight(),c=0;c<i.length;c++)i[c]=new qa(s-i[c].getY()-1,i[c].getX());return r}throw new ma}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var n,r=e.getWidth(),o=e.getHeight(),a=new ta(r),i=t&&!0===t.get(ra.TRY_HARDER),s=Math.max(1,o>>(i?8:5));n=i?o:15;for(var c=Math.trunc(o/2),l=0;l<n;l++){var u=Math.trunc((l+1)/2),f=c+s*(0==(1&l)?u:-u);if(f<0||f>=o)break;try{a=e.getBlackRow(f,a)}catch(e){continue}for(var d=function(e){if(1===e&&(a.reverse(),t&&!0===t.get(ra.NEED_RESULT_POINT_CALLBACK))){var n=new Map;t.forEach((function(e,t){return n.set(t,e)})),n.delete(ra.NEED_RESULT_POINT_CALLBACK),t=n}try{var o=p.decodeRow(f,a,t);if(1===e){o.putMetadata(Da.ORIENTATION,180);var i=o.getResultPoints();null!==i&&(i[0]=new qa(r-i[0].getX()-1,i[0].getY()),i[1]=new qa(r-i[1].getX()-1,i[1].getY()))}return{value:o}}catch(e){}},p=this,h=0;h<2;h++){var m=d(h);if("object"==typeof m)return m.value}}throw new ma},e.recordPattern=function(e,t,n){for(var r=n.length,o=0;o<r;o++)n[o]=0;var a=e.getSize();if(t>=a)throw new ma;for(var i=!e.get(t),s=0,c=t;c<a;){if(e.get(c)!==i)n[s]++;else{if(++s===r)break;n[s]=1,i=!i}c++}if(s!==r&&(s!==r-1||c!==a))throw new ma},e.recordPatternInReverse=function(t,n,r){for(var o=r.length,a=t.get(n);n>0&&o>=0;)t.get(--n)!==a&&(o--,a=!a);if(o>=0)throw new ma;e.recordPattern(t,n+1,r)},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,a=0,i=0;i<r;i++)o+=e[i],a+=t[i];if(o<a)return Number.POSITIVE_INFINITY;var s=o/a;n*=s;for(var c=0,l=0;l<r;l++){var u=e[l],f=t[l]*s,d=u>f?u-f:f-u;if(d>n)return Number.POSITIVE_INFINITY;c+=d}return c/o},e}(),ui=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ui(t,e),t.findStartPattern=function(e){for(var n=e.getSize(),r=e.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),i=r,s=!1,c=r;c<n;c++)if(e.get(c)!==s)a[o]++;else{if(5===o){for(var l=t.MAX_AVG_VARIANCE,u=-1,f=t.CODE_START_A;f<=t.CODE_START_C;f++){var d=li.patternMatchVariance(a,t.CODE_PATTERNS[f],t.MAX_INDIVIDUAL_VARIANCE);d<l&&(l=d,u=f)}if(u>=0&&e.isRange(Math.max(0,i-(c-i)/2),i,!1))return Int32Array.from([i,c,u]);i+=a[0]+a[1],(a=a.slice(2,a.length-1))[o-1]=0,a[o]=0,o--}else o++;a[o]=1,s=!s}throw new ma},t.decodeCode=function(e,n,r){li.recordPattern(e,r,n);for(var o=t.MAX_AVG_VARIANCE,a=-1,i=0;i<t.CODE_PATTERNS.length;i++){var s=t.CODE_PATTERNS[i],c=this.patternMatchVariance(n,s,t.MAX_INDIVIDUAL_VARIANCE);c<o&&(o=c,a=i)}if(a>=0)return a;throw new ma},t.prototype.decodeRow=function(e,n,r){var o,a=r&&!0===r.get(ra.ASSUME_GS1),i=t.findStartPattern(n),s=i[2],c=0,l=new Uint8Array(20);switch(l[c++]=s,s){case t.CODE_START_A:o=t.CODE_CODE_A;break;case t.CODE_START_B:o=t.CODE_CODE_B;break;case t.CODE_START_C:o=t.CODE_CODE_C;break;default:throw new aa}for(var u=!1,f=!1,d="",p=i[0],h=i[1],m=Int32Array.from([0,0,0,0,0,0]),y=0,g=0,v=s,b=0,w=!0,E=!1,S=!1;!u;){var C=f;switch(f=!1,y=g,g=t.decodeCode(n,m,h),l[c++]=g,g!==t.CODE_STOP&&(w=!0),g!==t.CODE_STOP&&(v+=++b*g),p=h,h+=m.reduce((function(e,t){return e+t}),0),g){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new aa}switch(o){case t.CODE_CODE_A:if(g<64)d+=S===E?String.fromCharCode(" ".charCodeAt(0)+g):String.fromCharCode(" ".charCodeAt(0)+g+128),S=!1;else if(g<96)d+=S===E?String.fromCharCode(g-64):String.fromCharCode(g+64),S=!1;else switch(g!==t.CODE_STOP&&(w=!1),g){case t.CODE_FNC_1:a&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!E&&S?(E=!0,S=!1):E&&S?(E=!1,S=!1):S=!0;break;case t.CODE_SHIFT:f=!0,o=t.CODE_CODE_B;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_B:if(g<96)d+=S===E?String.fromCharCode(" ".charCodeAt(0)+g):String.fromCharCode(" ".charCodeAt(0)+g+128),S=!1;else switch(g!==t.CODE_STOP&&(w=!1),g){case t.CODE_FNC_1:a&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!E&&S?(E=!0,S=!1):E&&S?(E=!1,S=!1):S=!0;break;case t.CODE_SHIFT:f=!0,o=t.CODE_CODE_A;break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_C:if(g<100)g<10&&(d+="0"),d+=g;else switch(g!==t.CODE_STOP&&(w=!1),g){case t.CODE_FNC_1:a&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_STOP:u=!0}}C&&(o=o===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var _=h-p;if(h=n.getNextUnset(h),!n.isRange(h,Math.min(n.getSize(),h+(h-p)/2),!1))throw new ma;if((v-=b*y)%103!==y)throw new Go;var A=d.length;if(0===A)throw new ma;A>0&&w&&(d=o===t.CODE_CODE_C?d.substring(0,A-2):d.substring(0,A-1));for(var k=(i[1]+i[0])/2,O=p+_/2,P=l.length,N=new Uint8Array(P),T=0;T<P;T++)N[T]=l[T];var I=[new qa(k,e),new qa(O,e)];return new Na(d,N,0,I,Ia.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(li),di=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pi=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hi=function(e){function t(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.call(this)||this;return r.usingCheckDigit=t,r.extendedMode=n,r.decodeRowResult="",r.counters=new Int32Array(9),r}return di(t,e),t.prototype.decodeRow=function(e,n,r){var o,a,i,s,c=this.counters;c.fill(0),this.decodeRowResult="";var l,u,f=t.findAsteriskPattern(n,c),d=n.getNextSet(f[1]),p=n.getSize();do{t.recordPattern(n,d,c);var h=t.toNarrowWidePattern(c);if(h<0)throw new ma;l=t.patternToChar(h),this.decodeRowResult+=l,u=d;try{for(var m=(o=void 0,pi(c)),y=m.next();!y.done;y=m.next())d+=y.value}catch(e){o={error:e}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}d=n.getNextSet(d)}while("*"!==l);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var g,v=0;try{for(var b=pi(c),w=b.next();!w.done;w=b.next())v+=w.value}catch(e){i={error:e}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}if(d!==p&&2*(d-u-v)<v)throw new ma;if(this.usingCheckDigit){for(var E=this.decodeRowResult.length-1,S=0,C=0;C<E;C++)S+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(C));if(this.decodeRowResult.charAt(E)!==t.ALPHABET_STRING.charAt(S%43))throw new Go;this.decodeRowResult=this.decodeRowResult.substring(0,E)}if(0===this.decodeRowResult.length)throw new ma;g=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var _=(f[1]+f[0])/2,A=u+v/2;return new Na(g,null,0,[new qa(_,e),new qa(A,e)],Ia.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,n){for(var r=e.getSize(),o=e.getNextSet(0),a=0,i=o,s=!1,c=n.length,l=o;l<r;l++)if(e.get(l)!==s)n[a]++;else{if(a===c-1){if(this.toNarrowWidePattern(n)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,i-Math.floor((l-i)/2)),i,!1))return[i,l];i+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,s=!s}throw new ma},t.toNarrowWidePattern=function(e){var t,n,r,o=e.length,a=0;do{var i=2147483647;try{for(var s=(t=void 0,pi(e)),c=s.next();!c.done;c=s.next())(d=c.value)<i&&d>a&&(i=d)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}a=i,r=0;for(var l=0,u=0,f=0;f<o;f++)(d=e[f])>a&&(u|=1<<o-1-f,r++,l+=d);if(3===r){for(f=0;f<o&&r>0;f++){var d;if((d=e[f])>a&&(r--,2*d>=l))return-1}return u}}while(r>3);return-1},t.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);if(e===t.ASTERISK_ENCODING)return"*";throw new ma},t.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var o=e.charAt(r);if("+"===o||"$"===o||"%"===o||"/"===o){var a=e.charAt(r+1),i="\0";switch(o){case"+":if(!(a>="A"&&a<="Z"))throw new aa;i=String.fromCharCode(a.charCodeAt(0)+32);break;case"$":if(!(a>="A"&&a<="Z"))throw new aa;i=String.fromCharCode(a.charCodeAt(0)-64);break;case"%":if(a>="A"&&a<="E")i=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")i=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")i=String.fromCharCode(a.charCodeAt(0)+43);else if("U"===a)i="\0";else if("V"===a)i="@";else if("W"===a)i="`";else{if("X"!==a&&"Y"!==a&&"Z"!==a)throw new aa;i=""}break;case"/":if(a>="A"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)-32);else{if("Z"!==a)throw new aa;i=":"}}n+=i,r++}else n+=o}return n},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(li),mi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return mi(t,e),t.prototype.decodeRow=function(e,n,r){var o,a,i=this.decodeStart(n),s=this.decodeEnd(n),c=new da;t.decodeMiddle(n,i[1],s[0],c);var l=c.toString(),u=null;null!=r&&(u=r.get(ra.ALLOWED_LENGTHS)),null==u&&(u=t.DEFAULT_ALLOWED_LENGTHS);var f=l.length,d=!1,p=0;try{for(var h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(u),m=h.next();!m.done;m=h.next()){var y=m.value;if(f===y){d=!0;break}y>p&&(p=y)}}catch(e){o={error:e}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}if(!d&&f>p&&(d=!0),!d)throw new aa;var g=[new qa(i[1],e),new qa(s[0],e)];return new Na(l,null,0,g,Ia.ITF,(new Date).getTime())},t.decodeMiddle=function(e,n,r,o){var a=new Int32Array(10),i=new Int32Array(5),s=new Int32Array(5);for(a.fill(0),i.fill(0),s.fill(0);n<r;){li.recordPattern(e,n,a);for(var c=0;c<5;c++){var l=2*c;i[c]=a[l],s[c]=a[l+1]}var u=t.decodeDigit(i);o.append(u.toString()),u=this.decodeDigit(s),o.append(u.toString()),a.forEach((function(e){n+=e}))}},t.prototype.decodeStart=function(e){var n=t.skipWhiteSpace(e),r=t.findGuardPattern(e,n,t.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r},t.prototype.validateQuietZone=function(e,t){var n=10*this.narrowLineWidth;n=n<t?n:t;for(var r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new ma},t.skipWhiteSpace=function(e){var t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new ma;return n},t.prototype.decodeEnd=function(e){e.reverse();try{var n=t.skipWhiteSpace(e),r=void 0;try{r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[0])}catch(o){o instanceof ma&&(r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);var o=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-o,r}finally{e.reverse()}},t.findGuardPattern=function(e,n,r){var o=r.length,a=new Int32Array(o),i=e.getSize(),s=!1,c=0,l=n;a.fill(0);for(var u=n;u<i;u++)if(e.get(u)!==s)a[c]++;else{if(c===o-1){if(li.patternMatchVariance(a,r,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[l,u];l+=a[0]+a[1],Jo.arraycopy(a,2,a,0,c-1),a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,s=!s}throw new ma},t.decodeDigit=function(e){for(var n=t.MAX_AVG_VARIANCE,r=-1,o=t.PATTERNS.length,a=0;a<o;a++){var i=t.PATTERNS[a],s=li.patternMatchVariance(e,i,t.MAX_INDIVIDUAL_VARIANCE);s<n?(n=s,r=a):s===n&&(r=-1)}if(r>=0)return r%10;throw new ma},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(li),gi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return gi(t,e),t.findStartGuardPattern=function(e){for(var n,r=!1,o=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]);var i=(n=t.findGuardPattern(e,o,!1,this.START_END_PATTERN,a))[0],s=i-((o=n[1])-i);s>=0&&(r=e.isRange(s,i,!1))}return n},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new aa;n+=o}for(n*=3,r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new aa;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))},t.findGuardPattern=function(e,n,r,o,a){for(var i=e.getSize(),s=0,c=n=r?e.getNextUnset(n):e.getNextSet(n),l=o.length,u=r,f=n;f<i;f++)if(e.get(f)!==u)a[s]++;else{if(s===l-1){if(li.patternMatchVariance(a,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([c,f]);c+=a[0]+a[1];for(var d=a.slice(2,a.length-1),p=0;p<s-1;p++)a[p]=d[p];a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,u=!u}throw new ma},t.decodeDigit=function(e,n,r,o){this.recordPattern(e,r,n);for(var a=this.MAX_AVG_VARIANCE,i=-1,s=o.length,c=0;c<s;c++){var l=o[c],u=li.patternMatchVariance(n,l,t.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,i=c)}if(i>=0)return i;throw new ma},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(li),bi=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wi=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,o),i=o.toString(),s=e.parseExtensionString(i),c=[new qa((r[0]+r[1])/2,t),new qa(a,t)],l=new Na(i,null,0,c,Ia.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l},e.prototype.decodeMiddle=function(t,n,r){var o,a,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=t.getSize(),c=n[1],l=0,u=0;u<5&&c<s;u++){var f=vi.decodeDigit(t,i,c,vi.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var d=(o=void 0,bi(i)),p=d.next();!p.done;p=d.next())c+=p.value}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}f>=10&&(l|=1<<4-u),4!==u&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(5!==r.length)throw new ma;var h=this.determineCheckDigit(l);if(e.extensionChecksum(r.toString())!==h)throw new ma;return c},e.extensionChecksum=function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);for(n*=3,r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return(n*=3)%10},e.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ma},e.parseExtensionString=function(t){if(5!==t.length)return null;var n=e.parseExtension5String(t);return null==n?null:new Map([[Da.SUGGESTED_PRICE,n]])},e.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())},e}(),Ei=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Si=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,o),i=o.toString(),s=e.parseExtensionString(i),c=[new qa((r[0]+r[1])/2,t),new qa(a,t)],l=new Na(i,null,0,c,Ia.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l},e.prototype.decodeMiddle=function(e,t,n){var r,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=e.getSize(),s=t[1],c=0,l=0;l<2&&s<i;l++){var u=vi.decodeDigit(e,a,s,vi.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u%10);try{for(var f=(r=void 0,Ei(a)),d=f.next();!d.done;d=f.next())s+=d.value}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}u>=10&&(c|=1<<1-l),1!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new ma;if(parseInt(n.toString())%4!==c)throw new ma;return s},e.parseExtensionString=function(e){return 2!==e.length?null:new Map([[Da.ISSUE_NUMBER,parseInt(e)]])},e}(),Ci=function(){function e(){}return e.decodeRow=function(e,t,n){var r=vi.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new wi).decodeRow(e,t,r)}catch(n){return(new Si).decodeRow(e,t,r)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}(),_i=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ai=function(e){function t(){var n=e.call(this)||this;n.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map((function(e){return Int32Array.from(e)}));for(var r=10;r<20;r++){for(var o=t.L_PATTERNS[r-10],a=new Int32Array(o.length),i=0;i<o.length;i++)a[i]=o[o.length-i-1];t.L_AND_G_PATTERNS[r]=a}return n}return _i(t,e),t.prototype.decodeRow=function(e,n,r){var o=t.findStartGuardPattern(n),a=null==r?null:r.get(ra.NEED_RESULT_POINT_CALLBACK);if(null!=a){var i=new qa((o[0]+o[1])/2,e);a.foundPossibleResultPoint(i)}var s=this.decodeMiddle(n,o,this.decodeRowStringBuffer),c=s.rowOffset,l=s.resultString;if(null!=a){var u=new qa(c,e);a.foundPossibleResultPoint(u)}var f=t.decodeEnd(n,c);if(null!=a){var d=new qa((f[0]+f[1])/2,e);a.foundPossibleResultPoint(d)}var p=f[1],h=p+(p-f[0]);if(h>=n.getSize()||!n.isRange(p,h,!1))throw new ma;var m=l.toString();if(m.length<8)throw new aa;if(!t.checkChecksum(m))throw new Go;var y=(o[1]+o[0])/2,g=(f[1]+f[0])/2,v=this.getBarcodeFormat(),b=[new qa(y,e),new qa(g,e)],w=new Na(m,null,0,b,v,(new Date).getTime()),E=0;try{var S=Ci.decodeRow(e,n,f[1]);w.putMetadata(Da.UPC_EAN_EXTENSION,S.getText()),w.putAllMetadata(S.getResultMetadata()),w.addResultPoints(S.getResultPoints()),E=S.getText().length}catch(e){}var C=null==r?null:r.get(ra.ALLOWED_EAN_EXTENSIONS);if(null!=C){var _=!1;for(var A in C)if(E.toString()===A){_=!0;break}if(!_)throw new ma}return v===Ia.EAN_13||Ia.UPC_A,w},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new aa;n+=o}for(n*=3,r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new aa;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(vi),ki=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oi=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pi=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return ki(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,a,i,s,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var l=e.getSize(),u=n[1],f=0,d=0;d<6&&u<l;d++){var p=Ai.decodeDigit(e,c,u,Ai.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var h=(o=void 0,Oi(c)),m=h.next();!m.done;m=h.next())u+=m.value}catch(e){o={error:e}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}p>=10&&(f|=1<<5-d)}for(r=t.determineFirstDigit(r,f),u=Ai.findGuardPattern(e,u,!0,Ai.MIDDLE_PATTERN,new Int32Array(Ai.MIDDLE_PATTERN.length).fill(0))[1],d=0;d<6&&u<l;d++){p=Ai.decodeDigit(e,c,u,Ai.L_PATTERNS),r+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var y=(i=void 0,Oi(c)),g=y.next();!g.done;g=y.next())u+=g.value}catch(e){i={error:e}}finally{try{g&&!g.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}}return{rowOffset:u,resultString:r}},t.prototype.getBarcodeFormat=function(){return Ia.EAN_13},t.determineFirstDigit=function(e,t){for(var n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return String.fromCharCode("0".charCodeAt(0)+n)+e;throw new ma},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Ai),Ni=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ti=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ii=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return Ni(t,e),t.prototype.decodeMiddle=function(e,t,n){var r,o,a,i,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),l=t[1],u=0;u<4&&l<c;u++){var f=Ai.decodeDigit(e,s,l,Ai.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var d=(r=void 0,Ti(s)),p=d.next();!p.done;p=d.next())l+=p.value}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}for(l=Ai.findGuardPattern(e,l,!0,Ai.MIDDLE_PATTERN,new Int32Array(Ai.MIDDLE_PATTERN.length).fill(0))[1],u=0;u<4&&l<c;u++){f=Ai.decodeDigit(e,s,l,Ai.L_PATTERNS),n+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var h=(a=void 0,Ti(s)),m=h.next();!m.done;m=h.next())l+=m.value}catch(e){a={error:e}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}}return{rowOffset:l,resultString:n}},t.prototype.getBarcodeFormat=function(){return Ia.EAN_8},t}(Ai),Ri=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Di=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ean13Reader=new Pi,t}return Ri(t,e),t.prototype.getBarcodeFormat=function(){return Ia.UPC_A},t.prototype.decode=function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))},t.prototype.decodeMiddle=function(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)},t.prototype.maybeReturnResult=function(e){var t=e.getText();if("0"===t.charAt(0)){var n=new Na(t.substring(1),null,null,e.getResultPoints(),Ia.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new ma},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Ai),xi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mi=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Li=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return xi(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,a,i=this.decodeMiddleCounters.map((function(e){return e}));i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),c=n[1],l=0,u=0;u<6&&c<s;u++){var f=t.decodeDigit(e,i,c,t.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var d=(o=void 0,Mi(i)),p=d.next();!p.done;p=d.next())c+=p.value}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}f>=10&&(l|=1<<5-u)}return t.determineNumSysAndCheckDigit(new da(r),l),c},t.prototype.decodeEnd=function(e,n){return t.findGuardPatternWithoutCounters(e,n,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Ai.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,t){for(var n=0;n<=1;n++)for(var r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return e.insert(0,"0"+n),void e.append("0"+r);throw ma.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Ia.UPC_E},t.convertUPCEtoUPCA=function(e){var t=e.slice(1,7).split("").map((function(e){return e.charCodeAt(0)})),n=new da;n.append(e.charAt(0));var r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Ai),Bi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ji=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fi=function(e){function t(t){var n=e.call(this)||this,r=null==t?null:t.get(ra.POSSIBLE_FORMATS),o=[];return null!=r&&(r.indexOf(Ia.EAN_13)>-1?o.push(new Pi):r.indexOf(Ia.UPC_A)>-1&&o.push(new Di),r.indexOf(Ia.EAN_8)>-1&&o.push(new Ii),r.indexOf(Ia.UPC_E)>-1&&o.push(new Li)),0===o.length&&(o.push(new Pi),o.push(new Ii),o.push(new Li)),n.readers=o,n}return Bi(t,e),t.prototype.decodeRow=function(e,t,n){var r,o;try{for(var a=ji(this.readers),i=a.next();!i.done;i=a.next()){var s=i.value;try{var c=s.decodeRow(e,t,n),l=c.getBarcodeFormat()===Ia.EAN_13&&"0"===c.getText().charAt(0),u=null==n?null:n.get(ra.POSSIBLE_FORMATS),f=null==u||u.includes(Ia.UPC_A);if(l&&f){var d=c.getRawBytes(),p=new Na(c.getText().substring(1),d,d.length,c.getResultPoints(),Ia.UPC_A);return p.putAllMetadata(c.getResultMetadata()),p}return c}catch(e){}}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}throw new ma},t.prototype.reset=function(){var e,t;try{for(var n=ji(this.readers),r=n.next();!r.done;r=n.next())r.value.reset()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(li),Ui=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hi=function(e){function t(){var t=e.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return Ui(t,e),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,n){for(var r=0;r<n.length;r++)if(li.patternMatchVariance(e,n[r],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return r;throw new ma},t.count=function(e){return Xa.sum(new Int32Array(e))},t.increment=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]>r&&(r=t[o],n=o);e[n]++},t.decrement=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]<r&&(r=t[o],n=o);e[n]--},t.isFinderPattern=function(e){var n,r,o=e[0]+e[1],a=o/(o+e[2]+e[3]);if(a>=t.MIN_FINDER_PATTERN_RATIO&&a<=t.MAX_FINDER_PATTERN_RATIO){var i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;try{for(var c=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),l=c.next();!l.done;l=c.next()){var u=l.value;u>s&&(s=u),u<i&&(i=u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return s<10*i}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(li),Vi=function(){function e(e,t){this.value=e,this.checksumPortion=t}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value&&this.checksumPortion===n.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}(),Ki=function(){function e(e,t,n,r,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new qa(n,o)),this.resultPoints.push(new qa(r,o))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.hashCode=function(){return this.value},e}(),Wi=function(){function e(){}return e.getRSSvalue=function(t,n,r){var o,a,i=0;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),c=s.next();!c.done;c=s.next())i+=c.value}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}for(var l=0,u=0,f=t.length,d=0;d<f-1;d++){var p=void 0;for(p=1,u|=1<<d;p<t[d];p++,u&=~(1<<d)){var h=e.combins(i-p-1,f-d-2);if(r&&0===u&&i-p-(f-d-1)>=f-d-1&&(h-=e.combins(i-p-(f-d),f-d-2)),f-d-1>1){for(var m=0,y=i-p-(f-d-2);y>n;y--)m+=e.combins(i-p-y-1,f-d-3);h-=m*(f-1-d)}else i-p>n&&h--;l+=h}i-=p}return l},e.combins=function(e,t){var n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);for(var o=1,a=1,i=e;i>n;i--)o*=i,a<=r&&(o/=a,a++);for(;a<=r;)o/=a,a++;return o},e}(),zi=function(){function e(){}return e.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var n=new ta(12*t),r=0,o=e[0].getRightChar().getValue(),a=11;a>=0;--a)0!=(o&1<<a)&&n.set(r),r++;for(a=1;a<e.length;++a){for(var i=e[a],s=i.getLeftChar().getValue(),c=11;c>=0;--c)0!=(s&1<<c)&&n.set(r),r++;if(null!=i.getRightChar()){var l=i.getRightChar().getValue();for(c=11;c>=0;--c)0!=(l&1<<c)&&n.set(r),r++}}return n},e}(),Gi=function(){function e(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}(),Xi=function(){function e(e){this.newPosition=e}return e.prototype.getNewPosition=function(){return this.newPosition},e}(),Ji=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return Ji(t,e),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(Xi),Yi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qi=function(e){function t(t,n,r){var o=e.call(this,t)||this;return r?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return Yi(t,e),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(Xi),Zi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$i=function(e){function t(t,n,r){var o=e.call(this,t)||this;if(n<0||n>10||r<0||r>10)throw new aa;return o.firstDigit=n,o.secondDigit=r,o}return Zi(t,e),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(Xi),es=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ts=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var n,r,o,a,i,s,c,l;if(!t)return null;if(t.length<2)throw new ma;var u=t.substring(0,2);try{for(var f=es(e.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next())if((E=d.value)[0]===u)return E[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,E[2],t):e.processFixedAI(2,E[1],t)}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(t.length<3)throw new ma;var p=t.substring(0,3);try{for(var h=es(e.THREE_DIGIT_DATA_LENGTH),m=h.next();!m.done;m=h.next())if((E=m.value)[0]===p)return E[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,E[2],t):e.processFixedAI(3,E[1],t)}catch(e){o={error:e}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}try{for(var y=es(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),g=y.next();!g.done;g=y.next())if((E=g.value)[0]===p)return E[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,E[2],t):e.processFixedAI(4,E[1],t)}catch(e){i={error:e}}finally{try{g&&!g.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(t.length<4)throw new ma;var v=t.substring(0,4);try{for(var b=es(e.FOUR_DIGIT_DATA_LENGTH),w=b.next();!w.done;w=b.next()){var E;if((E=w.value)[0]===v)return E[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,E[2],t):e.processFixedAI(4,E[1],t)}}catch(e){c={error:e}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(c)throw c.error}}throw new ma},e.processFixedAI=function(t,n,r){if(r.length<t)throw new ma;var o=r.substring(0,t);if(r.length<t+n)throw new ma;var a=r.substring(t,t+n),i=r.substring(t+n),s="("+o+")"+a,c=e.parseFieldsInGeneralPurpose(i);return null==c?s:s+c},e.processVariableAI=function(t,n,r){var o,a=r.substring(0,t);o=r.length<t+n?r.length:t+n;var i=r.substring(t,o),s=r.substring(o),c="("+a+")"+i,l=e.parseFieldsInGeneralPurpose(s);return null==l?c:c+l},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}(),ns=function(){function e(e){this.buffer=new da,this.information=e}return e.prototype.decodeAllCodes=function(e,t){for(var n=t,r=null;;){var o=this.decodeGeneralPurposeField(n,r),a=ts.parseFieldsInGeneralPurpose(o.getNewString());if(null!=a&&e.append(a),r=o.isRemaining()?""+o.getRemainingValue():null,n===o.getNewPosition())break;n=o.getNewPosition()}return e.toString()},e.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},e.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new $i(this.information.getSize(),0===t?$i.FNC1:t-1,$i.FNC1)}var n=this.extractNumericValueFromBitArray(e,7);return new $i(e+7,(n-8)/11,(n-8)%11)},e.prototype.extractNumericValueFromBitArray=function(t,n){return e.extractNumericValueFromBitArray(this.information,t,n)},e.extractNumericValueFromBitArray=function(e,t,n){for(var r=0,o=0;o<n;++o)e.get(t+o)&&(r|=1<<n-o-1);return r},e.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return null!=n&&n.isRemaining()?new Qi(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Qi(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new Qi(this.current.getPosition(),this.buffer.toString()):new Qi(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Gi(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return t=new Qi(this.current.getPosition(),this.buffer.toString()),new Gi(!0,t);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Gi(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Qi(this.current.getPosition(),this.buffer.toString());return new Gi(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Gi(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Qi(this.current.getPosition(),this.buffer.toString());return new Gi(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Gi(!1)},e.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253},e.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new qi(e+5,qi.FNC1);if(t>=5&&t<15)return new qi(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new qi(e+7,""+(r+1));if(r>=90&&r<116)return new qi(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new aa}return new qi(e+8,n)},e.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},e.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new qi(e+5,qi.FNC1);if(t>=5&&t<15)return new qi(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new qi(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new Wa("Decoding invalid alphanumeric value: "+r)}return new qi(e+6,n)},e.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},e}(),rs=function(){function e(e){this.information=e,this.generalDecoder=new ns(e)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}(),os=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),as=function(e){function t(t){return e.call(this,t)||this}return os(t,e),t.prototype.encodeCompressedGtin=function(e,t){e.append("(01)");var n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)},t.prototype.encodeCompressedGtinWithoutAI=function(e,n,r){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);a/100==0&&e.append("0"),a/10==0&&e.append("0"),e.append(a)}t.appendCheckDigit(e,r)},t.appendCheckDigit=function(e,t){for(var n=0,r=0;r<13;r++){var o=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0==(1&r)?3*o:o}10==(n=10-n%10)&&(n=0),e.append(n)},t.GTIN_SIZE=40,t}(rs),is=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ss=function(e){function t(t){return e.call(this,t)||this}return is(t,e),t.prototype.parseInformation=function(){var e=new da;e.append("(01)");var n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(as),cs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ls=function(e){function t(t){return e.call(this,t)||this}return cs(t,e),t.prototype.parseInformation=function(){var e=new da;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(rs),us=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fs=function(e){function t(t){return e.call(this,t)||this}return us(t,e),t.prototype.encodeCompressedWeight=function(e,t,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);for(var o=this.checkWeight(r),a=1e5,i=0;i<5;++i)o/a==0&&e.append("0"),a/=10;e.append(o)},t}(as),ds=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ps=function(e){function t(t){return e.call(this,t)||this}return ds(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+fs.GTIN_SIZE+t.WEIGHT_SIZE)throw new ma;var e=new da;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+fs.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(fs),hs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ms=function(e){function t(t){return e.call(this,t)||this}return hs(t,e),t.prototype.addWeightCode=function(e,t){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(ps),ys=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gs=function(e){function t(t){return e.call(this,t)||this}return ys(t,e),t.prototype.addWeightCode=function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(ps),vs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bs=function(e){function t(t){return e.call(this,t)||this}return vs(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+as.GTIN_SIZE)throw new ma;var e=new da;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+as.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");var r=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+as.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(as),ws=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Es=function(e){function t(t){return e.call(this,t)||this}return ws(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+as.GTIN_SIZE)throw new ma;var e=new da;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+as.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+as.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);var o=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+as.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(as),Ss=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cs=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.dateCode=r,o.firstAIdigits=n,o}return Ss(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new ma;var e=new da;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t.DATE_SIZE);if(38400!=r){e.append("("),e.append(this.dateCode),e.append(")");var o=r%32,a=(r/=32)%12+1,i=r/=12;i/10==0&&e.append("0"),e.append(i),a/10==0&&e.append("0"),e.append(a),o/10==0&&e.append("0"),e.append(o)}},t.prototype.addWeightCode=function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(fs),_s=function(){function e(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return null==this.rightchar},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,n){return t instanceof e&&e.equalsOrNull(t.leftchar,n.leftchar)&&e.equalsOrNull(t.rightchar,n.rightchar)&&e.equalsOrNull(t.finderpattern,n.finderpattern)},e.equalsOrNull=function(t,n){return null===t?null===n:e.equals(t,n)},e.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},e}(),As=function(){function e(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,n){return t instanceof e&&this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed},e.prototype.checkEqualitity=function(e,t){var n;if(e&&t)return e.forEach((function(e,r){t.forEach((function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)}))})),n},e}(),ks=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Os=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ps=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.pairs=new Array(t.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return ks(t,e),t.prototype.decodeRow=function(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,n))}catch(e){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,n))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,t){for(var n,r=!1;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(e){if(e instanceof ma){if(!this.pairs.length)throw new ma;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){var o=this.checkRowsBoolean(!1);if(null!=o)return o;if(null!=(o=this.checkRowsBoolean(!0)))return o}throw new ma},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(e){console.log(e)}return e&&(this.rows=this.rows.reverse()),t},t.prototype.checkRows=function(e,n){for(var r,o,a=n;a<this.rows.length;a++){var i=this.rows[a];this.pairs.length=0;try{for(var s=(r=void 0,Os(e)),c=s.next();!c.done;c=s.next()){var l=c.value;this.pairs.push(l.getPairs())}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}if(this.pairs.push(i.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var u=new Array(e);u.push(i);try{return this.checkRows(u,a+1)}catch(e){console.log(e)}}}throw new ma},t.isValidSequence=function(e){var n,r;try{for(var o=Os(t.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var i=a.value;if(!(e.length>i.length)){for(var s=!0,c=0;c<e.length;c++)if(e[c].getFinderPattern().getValue()!=i[c]){s=!1;break}if(s)return!0}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.storeRow=function(e,n){for(var r=0,o=!1,a=!1;r<this.rows.length;){var i=this.rows[r];if(i.getRowNumber()>e){a=i.isEquivalent(this.pairs);break}o=i.isEquivalent(this.pairs),r++}a||o||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new As(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,t){var n,r,o,a,i,s;try{for(var c=Os(t),l=c.next();!l.done;l=c.next()){var u=l.value;if(u.getPairs().length!==e.length)try{for(var f=(o=void 0,Os(u.getPairs())),d=f.next();!d.done;d=f.next()){var p=d.value;try{for(var h=(i=void 0,Os(e)),m=h.next();!m.done;m=h.next()){var y=m.value;if(_s.equals(p,y))break}}catch(e){i={error:e}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(e){o={error:e}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}},t.isPartialRow=function(e,t){var n,r,o,a,i,s;try{for(var c=Os(t),l=c.next();!l.done;l=c.next()){var u=l.value,f=!0;try{for(var d=(o=void 0,Os(e)),p=d.next();!p.done;p=d.next()){var h=p.value,m=!1;try{for(var y=(i=void 0,Os(u.getPairs())),g=y.next();!g.done;g=y.next()){var v=g.value;if(h.equals(v)){m=!0;break}}}catch(e){i={error:e}}finally{try{g&&!g.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(!m){f=!1;break}}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}if(f)return!0}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var t=function(e){try{if(e.get(1))return new ss(e);if(!e.get(2))return new ls(e);switch(ns.extractNumericValueFromBitArray(e,1,4)){case 4:return new ms(e);case 5:return new gs(e)}switch(ns.extractNumericValueFromBitArray(e,1,5)){case 12:return new bs(e);case 13:return new Es(e)}switch(ns.extractNumericValueFromBitArray(e,1,7)){case 56:return new Cs(e,"310","11");case 57:return new Cs(e,"320","11");case 58:return new Cs(e,"310","13");case 59:return new Cs(e,"320","13");case 60:return new Cs(e,"310","15");case 61:return new Cs(e,"320","15");case 62:return new Cs(e,"310","17");case 63:return new Cs(e,"320","17")}}catch(t){throw console.log(t),new Wa("unknown decoder: "+e)}}(zi.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),o=[n[0],n[1],r[0],r[1]];return new Na(t,null,null,o,Ia.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;for(var r=n.getChecksumPortion(),o=2,a=1;a<this.pairs.size();++a){var i=this.pairs.get(a);r+=i.getLeftChar().getChecksumPortion(),o++;var s=i.getRightChar();null!=s&&(r+=s.getChecksumPortion(),o++)}return 211*(o-4)+(r%=211)==t.getValue()},t.getNextSecondBar=function(e,t){var n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n},t.prototype.retrieveNextPair=function(e,n,r){var o,a=n.length%2==0;this.startFromEven&&(a=!a);var i=!0,s=-1;do{this.findNextPair(e,n,s),null==(o=this.parseFoundFinderPattern(e,r,a))?s=t.getNextSecondBar(e,this.startEnd[0]):i=!1}while(i);var c,l=this.decodeDataCharacter(e,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ma;try{c=this.decodeDataCharacter(e,o,a,!1)}catch(e){c=null,console.log(e)}return new _s(l,c,o,!0)},t.prototype.isEmptyPair=function(e){return 0===e.length},t.prototype.findNextPair=function(e,n,r){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a,i=e.getSize();a=r>=0?r:this.isEmptyPair(n)?0:n[n.length-1].getFinderPattern().getStartEnd()[1];var s=n.length%2!=0;this.startFromEven&&(s=!s);for(var c=!1;a<i&&(c=!e.get(a));)a++;for(var l=0,u=a,f=a;f<i;f++)if(e.get(f)!=c)o[l]++;else{if(3==l){if(s&&t.reverseCounters(o),t.isFinderPattern(o))return this.startEnd[0]=u,void(this.startEnd[1]=f);s&&t.reverseCounters(o),u+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,l--}else l++;o[l]=1,c=!c}throw new ma},t.reverseCounters=function(e){for(var t=e.length,n=0;n<t/2;++n){var r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}},t.prototype.parseFoundFinderPattern=function(e,n,r){var o,a,i;if(r){for(var s=this.startEnd[0]-1;s>=0&&!e.get(s);)s--;s++,o=this.startEnd[0]-s,a=s,i=this.startEnd[1]}else a=this.startEnd[0],o=(i=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var c,l=this.getDecodeFinderCounters();Jo.arraycopy(l,0,l,1,l.length-1),l[0]=o;try{c=this.parseFinderValue(l,t.FINDER_PATTERNS)}catch(e){return null}return new Ki(c,[a,i],a,i,n)},t.prototype.decodeDataCharacter=function(e,n,r,o){for(var a=this.getDataCharacterCounters(),i=0;i<a.length;i++)a[i]=0;if(o)t.recordPatternInReverse(e,n.getStartEnd()[0],a);else{t.recordPattern(e,n.getStartEnd()[1],a);for(var s=0,c=a.length-1;s<c;s++,c--){var l=a[s];a[s]=a[c],a[c]=l}}var u=Xa.sum(new Int32Array(a))/17,f=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(u-f)/f>.3)throw new ma;var d=this.getOddCounts(),p=this.getEvenCounts(),h=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(s=0;s<a.length;s++){var y=1*a[s]/u,g=y+.5;if(g<1){if(y<.3)throw new ma;g=1}else if(g>8){if(y>8.7)throw new ma;g=8}var v=s/2;0==(1&s)?(d[v]=g,h[v]=y-g):(p[v]=g,m[v]=y-g)}this.adjustOddEvenCounts(17);var b=4*n.getValue()+(r?0:2)+(o?0:1)-1,w=0,E=0;for(s=d.length-1;s>=0;s--){if(t.isNotA1left(n,r,o)){var S=t.WEIGHTS[b][2*s];E+=d[s]*S}w+=d[s]}var C=0;for(s=p.length-1;s>=0;s--)t.isNotA1left(n,r,o)&&(S=t.WEIGHTS[b][2*s+1],C+=p[s]*S);var _=E+C;if(0!=(1&w)||w>13||w<4)throw new ma;var A=(13-w)/2,k=t.SYMBOL_WIDEST[A],O=9-k,P=Wi.getRSSvalue(d,k,!0),N=Wi.getRSSvalue(p,O,!1),T=t.EVEN_TOTAL_SUBSET[A],I=t.GSUM[A];return new Vi(P*T+N+I,_)},t.isNotA1left=function(e,t,n){return!(0==e.getValue()&&t&&n)},t.prototype.adjustOddEvenCounts=function(e){var n=Xa.sum(new Int32Array(this.getOddCounts())),r=Xa.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);var i=!1,s=!1;r>13?s=!0:r<4&&(i=!0);var c=n+r-e,l=1==(1&n),u=0==(1&r);if(1==c)if(l){if(u)throw new ma;a=!0}else{if(!u)throw new ma;s=!0}else if(-1==c)if(l){if(u)throw new ma;o=!0}else{if(!u)throw new ma;i=!0}else{if(0!=c)throw new ma;if(l){if(!u)throw new ma;n<r?(o=!0,s=!0):(a=!0,i=!0)}else if(u)throw new ma}if(o){if(a)throw new ma;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(s)throw new ma;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Hi),Ns=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ts=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.count=0,o.finderPattern=r,o}return Ns(t,e),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Vi),Is=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rs=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ds=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return Is(t,e),t.prototype.decodeRow=function(e,n,r){var o,a,i,s,c=this.decodePair(n,!1,e,r);t.addOrTally(this.possibleLeftPairs,c),n.reverse();var l=this.decodePair(n,!0,e,r);t.addOrTally(this.possibleRightPairs,l),n.reverse();try{for(var u=Rs(this.possibleLeftPairs),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.getCount()>1)try{for(var p=(i=void 0,Rs(this.possibleRightPairs)),h=p.next();!h.done;h=p.next()){var m=h.value;if(m.getCount()>1&&t.checkChecksum(d,m))return t.constructResult(d,m)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}throw new ma},t.addOrTally=function(e,t){var n,r;if(null!=t){var o=!1;try{for(var a=Rs(e),i=a.next();!i.done;i=a.next()){var s=i.value;if(s.getValue()===t.getValue()){s.incrementCount(),o=!0;break}}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}o||e.push(t)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,t){for(var n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),o=new da,a=13-r.length;a>0;a--)o.append("0");o.append(r);var i=0;for(a=0;a<13;a++){var s=o.charAt(a).charCodeAt(0)-"0".charCodeAt(0);i+=0==(1&a)?3*s:s}10==(i=10-i%10)&&(i=0),o.append(i.toString());var c=e.getFinderPattern().getResultPoints(),l=t.getFinderPattern().getResultPoints();return new Na(o.toString(),null,0,[c[0],c[1],l[0],l[1]],Ia.RSS_14,(new Date).getTime())},t.checkChecksum=function(e,t){var n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r},t.prototype.decodePair=function(e,t,n,r){try{var o=this.findFinderPattern(e,t),a=this.parseFoundFinderPattern(e,n,t,o),i=null==r?null:r.get(ra.NEED_RESULT_POINT_CALLBACK);if(null!=i){var s=(o[0]+o[1])/2;t&&(s=e.getSize()-1-s),i.foundPossibleResultPoint(new qa(s,n))}var c=this.decodeDataCharacter(e,a,!0),l=this.decodeDataCharacter(e,a,!1);return new Ts(1597*c.getValue()+l.getValue(),c.getChecksumPortion()+4*l.getChecksumPortion(),a)}catch(e){return null}},t.prototype.decodeDataCharacter=function(e,n,r){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(r)li.recordPatternInReverse(e,n.getStartEnd()[0],o);else{li.recordPattern(e,n.getStartEnd()[1]+1,o);for(var i=0,s=o.length-1;i<s;i++,s--){var c=o[i];o[i]=o[s],o[s]=c}}var l=r?16:15,u=Xa.sum(new Int32Array(o))/l,f=this.getOddCounts(),d=this.getEvenCounts(),p=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(i=0;i<o.length;i++){var m=o[i]/u,y=Math.floor(m+.5);y<1?y=1:y>8&&(y=8);var g=Math.floor(i/2);0==(1&i)?(f[g]=y,p[g]=m-y):(d[g]=y,h[g]=m-y)}this.adjustOddEvenCounts(r,l);var v=0,b=0;for(i=f.length-1;i>=0;i--)b*=9,b+=f[i],v+=f[i];var w=0,E=0;for(i=d.length-1;i>=0;i--)w*=9,w+=d[i],E+=d[i];var S=b+3*w;if(r){if(0!=(1&v)||v>12||v<4)throw new ma;var C=(12-v)/2,_=9-(N=t.OUTSIDE_ODD_WIDEST[C]),A=Wi.getRSSvalue(f,N,!1),k=Wi.getRSSvalue(d,_,!0),O=t.OUTSIDE_EVEN_TOTAL_SUBSET[C],P=t.OUTSIDE_GSUM[C];return new Vi(A*O+k+P,S)}if(0!=(1&E)||E>10||E<4)throw new ma;C=(10-E)/2,_=9-(N=t.INSIDE_ODD_WIDEST[C]),A=Wi.getRSSvalue(f,N,!0),k=Wi.getRSSvalue(d,_,!1);var N,T=t.INSIDE_ODD_TOTAL_SUBSET[C];return P=t.INSIDE_GSUM[C],new Vi(k*T+A+P,S)},t.prototype.findFinderPattern=function(e,t){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var r=e.getSize(),o=!1,a=0;a<r&&t!==(o=!e.get(a));)a++;for(var i=0,s=a,c=a;c<r;c++)if(e.get(c)!==o)n[i]++;else{if(3===i){if(Hi.isFinderPattern(n))return[s,c];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,i--}else i++;n[i]=1,o=!o}throw new ma},t.prototype.parseFoundFinderPattern=function(e,n,r,o){for(var a=e.get(o[0]),i=o[0]-1;i>=0&&a!==e.get(i);)i--;i++;var s=o[0]-i,c=this.getDecodeFinderCounters(),l=new Int32Array(c.length);Jo.arraycopy(c,0,l,1,c.length-1),l[0]=s;var u=this.parseFinderValue(l,t.FINDER_PATTERNS),f=i,d=o[1];return r&&(f=e.getSize()-1-f,d=e.getSize()-1-d),new Ki(u,[i,o[1]],f,d,n)},t.prototype.adjustOddEvenCounts=function(e,t){var n=Xa.sum(new Int32Array(this.getOddCounts())),r=Xa.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1,i=!1,s=!1;e?(n>12?a=!0:n<4&&(o=!0),r>12?s=!0:r<4&&(i=!0)):(n>11?a=!0:n<5&&(o=!0),r>10?s=!0:r<4&&(i=!0));var c=n+r-t,l=(1&n)==(e?1:0),u=1==(1&r);if(1===c)if(l){if(u)throw new ma;a=!0}else{if(!u)throw new ma;s=!0}else if(-1===c)if(l){if(u)throw new ma;o=!0}else{if(!u)throw new ma;i=!0}else{if(0!==c)throw new ma;if(l){if(!u)throw new ma;n<r?(o=!0,s=!0):(a=!0,i=!0)}else if(u)throw new ma}if(o){if(a)throw new ma;Hi.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Hi.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(s)throw new ma;Hi.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&Hi.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Hi),xs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ms=function(e){function t(t){var n=e.call(this)||this;n.readers=[];var r=t?t.get(ra.POSSIBLE_FORMATS):null,o=t&&void 0!==t.get(ra.ASSUME_CODE_39_CHECK_DIGIT);return r&&((r.includes(Ia.EAN_13)||r.includes(Ia.UPC_A)||r.includes(Ia.EAN_8)||r.includes(Ia.UPC_E))&&n.readers.push(new Fi(t)),r.includes(Ia.CODE_39)&&n.readers.push(new hi(o)),r.includes(Ia.CODE_128)&&n.readers.push(new fi),r.includes(Ia.ITF)&&n.readers.push(new yi),r.includes(Ia.RSS_14)&&n.readers.push(new Ds),r.includes(Ia.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new Ps))),0===n.readers.length&&(n.readers.push(new Fi(t)),n.readers.push(new hi),n.readers.push(new Fi(t)),n.readers.push(new fi),n.readers.push(new yi),n.readers.push(new Ds)),n}return xs(t,e),t.prototype.decodeRow=function(e,t,n){for(var r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(e){}throw new ma},t.prototype.reset=function(){this.readers.forEach((function(e){return e.reset()}))},t}(li),Ls=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Ls((function(t,n){return void 0===t&&(t=500),e.call(this,new Ms(n),t,n)||this}),e)}(Pa);var Bs,js=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fs=function(){function e(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),Us=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),Hs=function(){function e(e,t,n,r,o,a){var i,s;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=o,this.ecBlocks=a;var c=0,l=a.getECCodewords(),u=a.getECBlocks();try{for(var f=js(u),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getCount()*(p.getDataCodewords()+l)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}this.totalCodewords=c}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,n){var r,o;if(0!=(1&t)||0!=(1&n))throw new aa;try{for(var a=js(e.VERSIONS),i=a.next();!i.done;i=a.next()){var s=i.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===n)return s}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}throw new aa},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new Fs(5,new Us(1,3))),new e(2,12,12,10,10,new Fs(7,new Us(1,5))),new e(3,14,14,12,12,new Fs(10,new Us(1,8))),new e(4,16,16,14,14,new Fs(12,new Us(1,12))),new e(5,18,18,16,16,new Fs(14,new Us(1,18))),new e(6,20,20,18,18,new Fs(18,new Us(1,22))),new e(7,22,22,20,20,new Fs(20,new Us(1,30))),new e(8,24,24,22,22,new Fs(24,new Us(1,36))),new e(9,26,26,24,24,new Fs(28,new Us(1,44))),new e(10,32,32,14,14,new Fs(36,new Us(1,62))),new e(11,36,36,16,16,new Fs(42,new Us(1,86))),new e(12,40,40,18,18,new Fs(48,new Us(1,114))),new e(13,44,44,20,20,new Fs(56,new Us(1,144))),new e(14,48,48,22,22,new Fs(68,new Us(1,174))),new e(15,52,52,24,24,new Fs(42,new Us(2,102))),new e(16,64,64,14,14,new Fs(56,new Us(2,140))),new e(17,72,72,16,16,new Fs(36,new Us(4,92))),new e(18,80,80,18,18,new Fs(48,new Us(4,114))),new e(19,88,88,20,20,new Fs(56,new Us(4,144))),new e(20,96,96,22,22,new Fs(68,new Us(4,174))),new e(21,104,104,24,24,new Fs(56,new Us(6,136))),new e(22,120,120,18,18,new Fs(68,new Us(6,175))),new e(23,132,132,20,20,new Fs(62,new Us(8,163))),new e(24,144,144,22,22,new Fs(62,new Us(8,156),new Us(2,155))),new e(25,8,18,6,16,new Fs(7,new Us(1,5))),new e(26,8,32,6,14,new Fs(11,new Us(1,10))),new e(27,12,26,10,24,new Fs(14,new Us(1,16))),new e(28,12,36,10,16,new Fs(18,new Us(1,22))),new e(29,16,36,14,16,new Fs(24,new Us(1,32))),new e(30,16,48,14,22,new Fs(28,new Us(1,49)))]},e.VERSIONS=e.buildVersions(),e}(),Vs=function(){function e(t){var n=t.getHeight();if(n<8||n>144||0!=(1&n))throw new aa;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new pa(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return Hs.getVersionForDimensions(t,n)},e.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),i=!1,s=!1,c=!1,l=!1;do{if(n!==o||0!==r||i)if(n!==o-2||0!==r||0==(3&a)||s)if(n!==o+4||2!==r||0!=(7&a)||c)if(n!==o-2||0!==r||4!=(7&a)||l){do{n<o&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,a)),n-=2,r+=2}while(n>=0&&r<a);n+=1,r+=3;do{n>=0&&r<a&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,a)),n+=2,r-=2}while(n<o&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(o,a),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner3(o,a),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner2(o,a),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(o,a),n-=2,r+=2,i=!0}while(n<o||r<a);if(t!==this.version.getTotalCodewords())throw new aa;return e},e.prototype.readModule=function(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},e.prototype.readUtah=function(e,t,n,r){var o=0;return this.readModule(e-2,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t,n,r)&&(o|=1),o<<=1,this.readModule(e,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e,t,n,r)&&(o|=1),o},e.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ko("Dimension of bitMatrix must match the version size");for(var r=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=t/r|0,i=n/o|0,s=new pa(i*o,a*r),c=0;c<a;++c)for(var l=c*r,u=0;u<i;++u)for(var f=u*o,d=0;d<r;++d)for(var p=c*(r+2)+1+d,h=l+d,m=0;m<o;++m){var y=u*(o+2)+1+m;if(e.get(y,p)){var g=f+m;s.set(g,h)}}return s},e}(),Ks=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ws=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n){var r,o,a,i,s=n.getECBlocks(),c=0,l=s.getECBlocks();try{for(var u=Ks(l),f=u.next();!f.done;f=u.next())c+=(y=f.value).getCount()}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}var d=new Array(c),p=0;try{for(var h=Ks(l),m=h.next();!m.done;m=h.next())for(var y=m.value,g=0;g<y.getCount();g++){var v=y.getDataCodewords(),b=s.getECCodewords()+v;d[p++]=new e(v,new Uint8Array(b))}}catch(e){a={error:e}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}var w=d[0].codewords.length-s.getECCodewords(),E=w-1,S=0;for(g=0;g<E;g++)for(var C=0;C<p;C++)d[C].codewords[g]=t[S++];var _=24===n.getVersionNumber(),A=_?8:p;for(C=0;C<A;C++)d[C].codewords[w-1]=t[S++];var k=d[0].codewords.length;for(g=w;g<k;g++)for(C=0;C<p;C++){var O=_?(C+8)%p:C,P=_&&O>7?g-1:g;d[O].codewords[P]=t[S++]}if(S!==t.length)throw new Ko;return d},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}(),zs=function(){function e(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ko(""+e);var t=0,n=this.bitOffset,r=this.byteOffset,o=this.bytes;if(n>0){var a=8-n,i=e<a?e:a,s=255>>8-i<<(c=a-i);t=(o[r]&s)>>c,e-=i,8===(n+=i)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&o[r],r++,e-=8;var c;e>0&&(s=255>>(c=8-e)<<c,t=t<<e|(o[r]&s)>>c,n+=e)}return this.bitOffset=n,this.byteOffset=r,t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(Bs||(Bs={}));var Gs,Xs=function(){function e(){}return e.decode=function(e){var t=new zs(e),n=new da,r=new da,o=new Array,a=Bs.ASCII_ENCODE;do{if(a===Bs.ASCII_ENCODE)a=this.decodeAsciiSegment(t,n,r);else{switch(a){case Bs.C40_ENCODE:this.decodeC40Segment(t,n);break;case Bs.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Bs.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Bs.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Bs.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new aa}a=Bs.ASCII_ENCODE}}while(a!==Bs.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new xa(e,n.toString(),0===o.length?null:o,null)},e.decodeAsciiSegment=function(e,t,n){var r=!1;do{var o=e.readBits(8);if(0===o)throw new aa;if(o<=128)return r&&(o+=128),t.append(String.fromCharCode(o-1)),Bs.ASCII_ENCODE;if(129===o)return Bs.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&t.append("0"),t.append(""+a)}else switch(o){case 230:return Bs.C40_ENCODE;case 231:return Bs.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Bs.ANSIX12_ENCODE;case 239:return Bs.TEXT_ENCODE;case 240:return Bs.EDIFACT_ENCODE;default:if(254!==o||0!==e.available())throw new aa}}while(e.available()>0);return Bs.ASCII_ENCODE},e.decodeC40Segment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var a=e.readBits(8);if(254===a)return;this.parseTwoBytes(a,e.readBits(8),r);for(var i=0;i<3;i++){var s=r[i];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new aa;var c=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length)c=this.C40_SHIFT2_SET_CHARS[s],n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c);else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new aa}o=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),o=0;break;default:throw new aa}}}while(e.available()>0)},e.decodeTextSegment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var a=e.readBits(8);if(254===a)return;this.parseTwoBytes(a,e.readBits(8),r);for(var i=0;i<3;i++){var s=r[i];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new aa;var c=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length)c=this.TEXT_SHIFT2_SET_CHARS[s],n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c);else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new aa}o=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new aa;c=this.TEXT_SHIFT3_SET_CHARS[s],n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),o=0;break;default:throw new aa}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,t){var n=[];do{if(8===e.available())return;var r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(var o=0;o<3;o++){var a=n[o];switch(a){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(a<14)t.append(String.fromCharCode(a+44));else{if(!(a<40))throw new aa;t.append(String.fromCharCode(a+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,t,n){var r=(e<<8)+t-1,o=Math.floor(r/1600);n[0]=o,r-=1600*o,o=Math.floor(r/40),n[1]=o,n[2]=r-40*o},e.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var r=e.readBits(6);if(31===r){var o=8-e.getBitOffset();return void(8!==o&&e.readBits(o))}0==(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)},e.decodeBase256Segment=function(e,t,n){var r,o=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),o++);if((r=0===a?e.available()/8|0:a<250?a:250*(a-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new aa;for(var i=new Uint8Array(r),s=0;s<r;s++){if(e.available()<8)throw new aa;i[s]=this.unrandomize255State(e.readBits(8),o++)}n.push(i);try{t.append(ua.decode(i,fa.ISO88591))}catch(e){throw new Wa("Platform does not support required encoding: "+e.message)}},e.unrandomize255State=function(e,t){var n=e-(149*t%255+1);return n>=0?n:n+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}(),Js=function(){function e(){this.rsDecoder=new za(Ua.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(e){var t,n,r=new Vs(e),o=r.getVersion(),a=r.readCodewords(),i=Ws.getDataBlocks(a,o),s=0;try{for(var c=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),l=c.next();!l.done;l=c.next())s+=l.value.getNumDataCodewords()}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var u=new Uint8Array(s),f=i.length,d=0;d<f;d++){var p=i[d],h=p.getCodewords(),m=p.getNumDataCodewords();this.correctErrors(h,m);for(var y=0;y<m;y++)u[y*f+d]=h[y]}return Xs.decode(u)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(e){throw new Go}for(var r=0;r<t;r++)e[r]=n[r]},e}(),qs=function(){function e(e){this.image=e,this.rectangleDetector=new $a(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new ma;var r=(n=this.shiftToModuleCenter(n))[0],o=n[1],a=n[2],i=n[3],s=this.transitionsBetween(r,i)+1,c=this.transitionsBetween(a,i)+1;1==(1&s)&&(s+=1),1==(1&c)&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var l=e.sampleGrid(this.image,r,o,a,i,s,c);return new Ya(l,[r,o,a,i])},e.shiftPoint=function(e,t,n){var r=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new qa(e.getX()+r,e.getY()+o)},e.moveAway=function(e,t,n){var r=e.getX(),o=e.getY();return r<t?r-=1:r+=1,o<n?o-=1:o+=1,new qa(r,o)},e.prototype.detectSolid1=function(e){var t=e[0],n=e[1],r=e[3],o=e[2],a=this.transitionsBetween(t,n),i=this.transitionsBetween(n,r),s=this.transitionsBetween(r,o),c=this.transitionsBetween(o,t),l=a,u=[o,t,n,r];return l>i&&(l=i,u[0]=t,u[1]=n,u[2]=r,u[3]=o),l>s&&(l=s,u[0]=n,u[1]=r,u[2]=o,u[3]=t),l>c&&(u[0]=r,u[1]=o,u[2]=t,u[3]=n),u},e.prototype.detectSolid2=function(t){var n=t[0],r=t[1],o=t[2],a=t[3],i=this.transitionsBetween(n,a),s=e.shiftPoint(r,o,4*(i+1)),c=e.shiftPoint(o,r,4*(i+1));return this.transitionsBetween(s,n)<this.transitionsBetween(c,a)?(t[0]=n,t[1]=r,t[2]=o,t[3]=a):(t[0]=r,t[1]=o,t[2]=a,t[3]=n),t},e.prototype.correctTopRight=function(t){var n=t[0],r=t[1],o=t[2],a=t[3],i=this.transitionsBetween(n,a),s=this.transitionsBetween(r,a),c=e.shiftPoint(n,r,4*(s+1)),l=e.shiftPoint(o,r,4*(i+1));i=this.transitionsBetween(c,a),s=this.transitionsBetween(l,a);var u=new qa(a.getX()+(o.getX()-r.getX())/(i+1),a.getY()+(o.getY()-r.getY())/(i+1)),f=new qa(a.getX()+(n.getX()-r.getX())/(s+1),a.getY()+(n.getY()-r.getY())/(s+1));return this.isValid(u)?this.isValid(f)?this.transitionsBetween(c,u)+this.transitionsBetween(l,u)>this.transitionsBetween(c,f)+this.transitionsBetween(l,f)?u:f:u:this.isValid(f)?f:null},e.prototype.shiftToModuleCenter=function(t){var n=t[0],r=t[1],o=t[2],a=t[3],i=this.transitionsBetween(n,a)+1,s=this.transitionsBetween(o,a)+1,c=e.shiftPoint(n,r,4*s),l=e.shiftPoint(o,r,4*i);1==(1&(i=this.transitionsBetween(c,a)+1))&&(i+=1),1==(1&(s=this.transitionsBetween(l,a)+1))&&(s+=1);var u,f,d=(n.getX()+r.getX()+o.getX()+a.getX())/4,p=(n.getY()+r.getY()+o.getY()+a.getY())/4;return n=e.moveAway(n,d,p),r=e.moveAway(r,d,p),o=e.moveAway(o,d,p),a=e.moveAway(a,d,p),c=e.shiftPoint(n,r,4*s),c=e.shiftPoint(c,a,4*i),u=e.shiftPoint(r,n,4*s),u=e.shiftPoint(u,o,4*i),l=e.shiftPoint(o,a,4*s),l=e.shiftPoint(l,r,4*i),f=e.shiftPoint(a,o,4*s),[c,u,l,f=e.shiftPoint(f,n,4*i)]},e.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},e.sampleGrid=function(e,t,n,r,o,a,i){return oi.getInstance().sampleGrid(e,a,i,.5,.5,a-.5,.5,a-.5,i-.5,.5,i-.5,t.getX(),t.getY(),o.getX(),o.getY(),r.getX(),r.getY(),n.getX(),n.getY())},e.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),i=Math.abs(a-r)>Math.abs(o-n);if(i){var s=n;n=r,r=s,s=o,o=a,a=s}for(var c=Math.abs(o-n),l=Math.abs(a-r),u=-c/2,f=r<a?1:-1,d=n<o?1:-1,p=0,h=this.image.get(i?r:n,i?n:r),m=n,y=r;m!==o;m+=d){var g=this.image.get(i?y:m,i?m:y);if(g!==h&&(p++,h=g),(u+=l)>0){if(y===a)break;y+=f,u-=c}}return p},e}(),Ys=function(){function e(){this.decoder=new Js}return e.prototype.decode=function(t,n){var r,o;if(void 0===n&&(n=null),null!=n&&n.has(ra.PURE_BARCODE)){var a=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(a),o=e.NO_POINTS}else{var i=new qs(t.getBlackMatrix()).detect();r=this.decoder.decode(i.getBits()),o=i.getPoints()}var s=r.getRawBytes(),c=new Na(r.getText(),s,8*s.length,o,Ia.DATA_MATRIX,Jo.currentTimeMillis()),l=r.getByteSegments();null!=l&&c.putMetadata(Da.BYTE_SEGMENTS,l);var u=r.getECLevel();return null!=u&&c.putMetadata(Da.ERROR_CORRECTION_LEVEL,u),c},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new ma;var r=this.moduleSize(t,e),o=t[1],a=n[1],i=t[0],s=(n[0]-i+1)/r,c=(a-o+1)/r;if(s<=0||c<=0)throw new ma;var l=r/2;o+=l,i+=l;for(var u=new pa(s,c),f=0;f<c;f++)for(var d=o+f*r,p=0;p<s;p++)e.get(i+p*r,d)&&u.set(p,f);return u},e.moduleSize=function(e,t){for(var n=t.getWidth(),r=e[0],o=e[1];r<n&&t.get(r,o);)r++;if(r===n)throw new ma;var a=r-e[0];if(0===a)throw new ma;return a},e.NO_POINTS=[],e}(),Qs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Qs((function(t){return void 0===t&&(t=500),e.call(this,new Ys,t)||this}),e)}(Pa),function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(Gs||(Gs={}));var Zs,$s=function(){function e(t,n,r){this.value=t,this.stringValue=n,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new Ho(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new Ko;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(Gs.L,"L",1),e.M=new e(Gs.M,"M",0),e.Q=new e(Gs.Q,"Q",3),e.H=new e(Gs.H,"H",2),e}(),ec=function(){function e(e){this.errorCorrectionLevel=$s.forBits(e>>3&3),this.dataMask=7&e}return e.numBitsDiffering=function(e,t){return ea.bitCount(e^t)},e.decodeFormatInformation=function(t,n){var r=e.doDecodeFormatInformation(t,n);return null!==r?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,n^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,n){var r,o,a=Number.MAX_SAFE_INTEGER,i=0;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var l=c.value,u=l[0];if(u===t||u===n)return new e(l[1]);var f=e.numBitsDiffering(t,u);f<a&&(i=l[1],a=f),t!==n&&(f=e.numBitsDiffering(n,u))<a&&(i=l[1],a=f)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a<=3?new e(i):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}(),tc=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var e,t,n=0,r=this.ecBlocks;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=o.next();!a.done;a=o.next())n+=a.value.getCount()}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),nc=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),rc=function(){function e(e,t){for(var n,r,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var i=0,s=o[0].getECCodewordsPerBlock(),c=o[0].getECBlocks();try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),u=l.next();!u.done;u=l.next()){var f=u.value;i+=f.getCount()*(f.getDataCodewords()+s)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}this.totalCodewords=i}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},e.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new aa;try{return this.getVersionForNumber((e-17)/4)}catch(e){throw new aa}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new Ko;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,o=0;o<e.VERSION_DECODE_INFO.length;o++){var a=e.VERSION_DECODE_INFO[o];if(a===t)return e.getVersionForNumber(o+7);var i=ec.numBitsDiffering(t,a);i<n&&(r=o+7,n=i)}return n<=3?e.getVersionForNumber(r):null},e.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new pa(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var o=this.alignmentPatternCenters[r]-2,a=0;a<n;a++)0===r&&(0===a||a===n-1)||r===n-1&&0===a||t.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new tc(7,new nc(1,19)),new tc(10,new nc(1,16)),new tc(13,new nc(1,13)),new tc(17,new nc(1,9))),new e(2,Int32Array.from([6,18]),new tc(10,new nc(1,34)),new tc(16,new nc(1,28)),new tc(22,new nc(1,22)),new tc(28,new nc(1,16))),new e(3,Int32Array.from([6,22]),new tc(15,new nc(1,55)),new tc(26,new nc(1,44)),new tc(18,new nc(2,17)),new tc(22,new nc(2,13))),new e(4,Int32Array.from([6,26]),new tc(20,new nc(1,80)),new tc(18,new nc(2,32)),new tc(26,new nc(2,24)),new tc(16,new nc(4,9))),new e(5,Int32Array.from([6,30]),new tc(26,new nc(1,108)),new tc(24,new nc(2,43)),new tc(18,new nc(2,15),new nc(2,16)),new tc(22,new nc(2,11),new nc(2,12))),new e(6,Int32Array.from([6,34]),new tc(18,new nc(2,68)),new tc(16,new nc(4,27)),new tc(24,new nc(4,19)),new tc(28,new nc(4,15))),new e(7,Int32Array.from([6,22,38]),new tc(20,new nc(2,78)),new tc(18,new nc(4,31)),new tc(18,new nc(2,14),new nc(4,15)),new tc(26,new nc(4,13),new nc(1,14))),new e(8,Int32Array.from([6,24,42]),new tc(24,new nc(2,97)),new tc(22,new nc(2,38),new nc(2,39)),new tc(22,new nc(4,18),new nc(2,19)),new tc(26,new nc(4,14),new nc(2,15))),new e(9,Int32Array.from([6,26,46]),new tc(30,new nc(2,116)),new tc(22,new nc(3,36),new nc(2,37)),new tc(20,new nc(4,16),new nc(4,17)),new tc(24,new nc(4,12),new nc(4,13))),new e(10,Int32Array.from([6,28,50]),new tc(18,new nc(2,68),new nc(2,69)),new tc(26,new nc(4,43),new nc(1,44)),new tc(24,new nc(6,19),new nc(2,20)),new tc(28,new nc(6,15),new nc(2,16))),new e(11,Int32Array.from([6,30,54]),new tc(20,new nc(4,81)),new tc(30,new nc(1,50),new nc(4,51)),new tc(28,new nc(4,22),new nc(4,23)),new tc(24,new nc(3,12),new nc(8,13))),new e(12,Int32Array.from([6,32,58]),new tc(24,new nc(2,92),new nc(2,93)),new tc(22,new nc(6,36),new nc(2,37)),new tc(26,new nc(4,20),new nc(6,21)),new tc(28,new nc(7,14),new nc(4,15))),new e(13,Int32Array.from([6,34,62]),new tc(26,new nc(4,107)),new tc(22,new nc(8,37),new nc(1,38)),new tc(24,new nc(8,20),new nc(4,21)),new tc(22,new nc(12,11),new nc(4,12))),new e(14,Int32Array.from([6,26,46,66]),new tc(30,new nc(3,115),new nc(1,116)),new tc(24,new nc(4,40),new nc(5,41)),new tc(20,new nc(11,16),new nc(5,17)),new tc(24,new nc(11,12),new nc(5,13))),new e(15,Int32Array.from([6,26,48,70]),new tc(22,new nc(5,87),new nc(1,88)),new tc(24,new nc(5,41),new nc(5,42)),new tc(30,new nc(5,24),new nc(7,25)),new tc(24,new nc(11,12),new nc(7,13))),new e(16,Int32Array.from([6,26,50,74]),new tc(24,new nc(5,98),new nc(1,99)),new tc(28,new nc(7,45),new nc(3,46)),new tc(24,new nc(15,19),new nc(2,20)),new tc(30,new nc(3,15),new nc(13,16))),new e(17,Int32Array.from([6,30,54,78]),new tc(28,new nc(1,107),new nc(5,108)),new tc(28,new nc(10,46),new nc(1,47)),new tc(28,new nc(1,22),new nc(15,23)),new tc(28,new nc(2,14),new nc(17,15))),new e(18,Int32Array.from([6,30,56,82]),new tc(30,new nc(5,120),new nc(1,121)),new tc(26,new nc(9,43),new nc(4,44)),new tc(28,new nc(17,22),new nc(1,23)),new tc(28,new nc(2,14),new nc(19,15))),new e(19,Int32Array.from([6,30,58,86]),new tc(28,new nc(3,113),new nc(4,114)),new tc(26,new nc(3,44),new nc(11,45)),new tc(26,new nc(17,21),new nc(4,22)),new tc(26,new nc(9,13),new nc(16,14))),new e(20,Int32Array.from([6,34,62,90]),new tc(28,new nc(3,107),new nc(5,108)),new tc(26,new nc(3,41),new nc(13,42)),new tc(30,new nc(15,24),new nc(5,25)),new tc(28,new nc(15,15),new nc(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new tc(28,new nc(4,116),new nc(4,117)),new tc(26,new nc(17,42)),new tc(28,new nc(17,22),new nc(6,23)),new tc(30,new nc(19,16),new nc(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new tc(28,new nc(2,111),new nc(7,112)),new tc(28,new nc(17,46)),new tc(30,new nc(7,24),new nc(16,25)),new tc(24,new nc(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new tc(30,new nc(4,121),new nc(5,122)),new tc(28,new nc(4,47),new nc(14,48)),new tc(30,new nc(11,24),new nc(14,25)),new tc(30,new nc(16,15),new nc(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new tc(30,new nc(6,117),new nc(4,118)),new tc(28,new nc(6,45),new nc(14,46)),new tc(30,new nc(11,24),new nc(16,25)),new tc(30,new nc(30,16),new nc(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new tc(26,new nc(8,106),new nc(4,107)),new tc(28,new nc(8,47),new nc(13,48)),new tc(30,new nc(7,24),new nc(22,25)),new tc(30,new nc(22,15),new nc(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new tc(28,new nc(10,114),new nc(2,115)),new tc(28,new nc(19,46),new nc(4,47)),new tc(28,new nc(28,22),new nc(6,23)),new tc(30,new nc(33,16),new nc(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new tc(30,new nc(8,122),new nc(4,123)),new tc(28,new nc(22,45),new nc(3,46)),new tc(30,new nc(8,23),new nc(26,24)),new tc(30,new nc(12,15),new nc(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new tc(30,new nc(3,117),new nc(10,118)),new tc(28,new nc(3,45),new nc(23,46)),new tc(30,new nc(4,24),new nc(31,25)),new tc(30,new nc(11,15),new nc(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new tc(30,new nc(7,116),new nc(7,117)),new tc(28,new nc(21,45),new nc(7,46)),new tc(30,new nc(1,23),new nc(37,24)),new tc(30,new nc(19,15),new nc(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new tc(30,new nc(5,115),new nc(10,116)),new tc(28,new nc(19,47),new nc(10,48)),new tc(30,new nc(15,24),new nc(25,25)),new tc(30,new nc(23,15),new nc(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new tc(30,new nc(13,115),new nc(3,116)),new tc(28,new nc(2,46),new nc(29,47)),new tc(30,new nc(42,24),new nc(1,25)),new tc(30,new nc(23,15),new nc(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new tc(30,new nc(17,115)),new tc(28,new nc(10,46),new nc(23,47)),new tc(30,new nc(10,24),new nc(35,25)),new tc(30,new nc(19,15),new nc(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new tc(30,new nc(17,115),new nc(1,116)),new tc(28,new nc(14,46),new nc(21,47)),new tc(30,new nc(29,24),new nc(19,25)),new tc(30,new nc(11,15),new nc(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new tc(30,new nc(13,115),new nc(6,116)),new tc(28,new nc(14,46),new nc(23,47)),new tc(30,new nc(44,24),new nc(7,25)),new tc(30,new nc(59,16),new nc(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new tc(30,new nc(12,121),new nc(7,122)),new tc(28,new nc(12,47),new nc(26,48)),new tc(30,new nc(39,24),new nc(14,25)),new tc(30,new nc(22,15),new nc(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new tc(30,new nc(6,121),new nc(14,122)),new tc(28,new nc(6,47),new nc(34,48)),new tc(30,new nc(46,24),new nc(10,25)),new tc(30,new nc(2,15),new nc(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new tc(30,new nc(17,122),new nc(4,123)),new tc(28,new nc(29,46),new nc(14,47)),new tc(30,new nc(49,24),new nc(10,25)),new tc(30,new nc(24,15),new nc(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new tc(30,new nc(4,122),new nc(18,123)),new tc(28,new nc(13,46),new nc(32,47)),new tc(30,new nc(48,24),new nc(14,25)),new tc(30,new nc(42,15),new nc(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new tc(30,new nc(20,117),new nc(4,118)),new tc(28,new nc(40,47),new nc(7,48)),new tc(30,new nc(43,24),new nc(22,25)),new tc(30,new nc(10,15),new nc(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new tc(30,new nc(19,118),new nc(6,119)),new tc(28,new nc(18,47),new nc(31,48)),new tc(30,new nc(34,24),new nc(34,25)),new tc(30,new nc(20,15),new nc(61,16)))],e}();!function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Zs||(Zs={}));var oc,ac=function(){function e(e,t){this.value=e,this.isMasked=t}return e.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},e.values=new Map([[Zs.DATA_MASK_000,new e(Zs.DATA_MASK_000,(function(e,t){return 0==(e+t&1)}))],[Zs.DATA_MASK_001,new e(Zs.DATA_MASK_001,(function(e,t){return 0==(1&e)}))],[Zs.DATA_MASK_010,new e(Zs.DATA_MASK_010,(function(e,t){return t%3==0}))],[Zs.DATA_MASK_011,new e(Zs.DATA_MASK_011,(function(e,t){return(e+t)%3==0}))],[Zs.DATA_MASK_100,new e(Zs.DATA_MASK_100,(function(e,t){return 0==(Math.floor(e/2)+Math.floor(t/3)&1)}))],[Zs.DATA_MASK_101,new e(Zs.DATA_MASK_101,(function(e,t){return e*t%6==0}))],[Zs.DATA_MASK_110,new e(Zs.DATA_MASK_110,(function(e,t){return e*t%6<3}))],[Zs.DATA_MASK_111,new e(Zs.DATA_MASK_111,(function(e,t){return 0==(e+t+e*t%3&1)}))]]),e}(),ic=function(){function e(e){var t=e.getHeight();if(t<21||1!=(3&t))throw new aa;this.bitMatrix=e}return e.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);var r=this.bitMatrix.getHeight(),o=0,a=r-7;for(n=r-1;n>=a;n--)o=this.copyBit(8,n,o);for(t=r-8;t<r;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=ec.decodeFormatInformation(e,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new aa},e.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return rc.getVersionForNumber(t);for(var n=0,r=e-11,o=5;o>=0;o--)for(var a=e-9;a>=r;a--)n=this.copyBit(a,o,n);var i=rc.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;for(n=0,a=5;a>=0;a--)for(o=e-9;o>=r;o--)n=this.copyBit(a,o,n);if(null!==(i=rc.decodeVersionInformation(n))&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new aa},e.prototype.copyBit=function(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1},e.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=ac.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);for(var o=t.buildFunctionPattern(),a=!0,i=new Uint8Array(t.getTotalCodewords()),s=0,c=0,l=0,u=r-1;u>0;u-=2){6===u&&u--;for(var f=0;f<r;f++)for(var d=a?r-1-f:f,p=0;p<2;p++)o.get(u-p,d)||(l++,c<<=1,this.bitMatrix.get(u-p,d)&&(c|=1),8===l&&(i[s++]=c,l=0,c=0));a=!a}if(s!==t.getTotalCodewords())throw new aa;return i},e.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=ac.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},e.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},e.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var r=t+1,o=e.getHeight();r<o;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))},e}(),sc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cc=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n,r){var o,a,i,s;if(t.length!==n.getTotalCodewords())throw new Ko;var c=n.getECBlocksForLevel(r),l=0,u=c.getECBlocks();try{for(var f=sc(u),d=f.next();!d.done;d=f.next())l+=(g=d.value).getCount()}catch(e){o={error:e}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}var p=new Array(l),h=0;try{for(var m=sc(u),y=m.next();!y.done;y=m.next())for(var g=y.value,v=0;v<g.getCount();v++){var b=g.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;p[h++]=new e(b,new Uint8Array(w))}}catch(e){i={error:e}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}for(var E=p[0].codewords.length,S=p.length-1;S>=0&&p[S].codewords.length!==E;)S--;S++;var C=E-c.getECCodewordsPerBlock(),_=0;for(v=0;v<C;v++)for(var A=0;A<h;A++)p[A].codewords[v]=t[_++];for(A=S;A<h;A++)p[A].codewords[C]=t[_++];var k=p[0].codewords.length;for(v=C;v<k;v++)for(A=0;A<h;A++){var O=A<S?v:v+1;p[A].codewords[O]=t[_++]}return p},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(oc||(oc={}));var lc,uc,fc=function(){function e(t,n,r,o){this.value=t,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=o,e.FOR_BITS.set(o,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var n=e.FOR_BITS.get(t);if(void 0===n)throw new Ko;return n},e.prototype.getCharacterCountBits=function(e){var t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(oc.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(oc.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(oc.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(oc.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(oc.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(oc.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(oc.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(oc.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(oc.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(oc.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}(),dc=function(){function e(){}return e.decode=function(t,n,r,o){var a=new zs(t),i=new da,s=new Array,c=-1,l=-1;try{var u=null,f=!1,d=void 0;do{if(a.available()<4)d=fc.TERMINATOR;else{var p=a.readBits(4);d=fc.forBits(p)}switch(d){case fc.TERMINATOR:break;case fc.FNC1_FIRST_POSITION:case fc.FNC1_SECOND_POSITION:f=!0;break;case fc.STRUCTURED_APPEND:if(a.available()<16)throw new aa;c=a.readBits(8),l=a.readBits(8);break;case fc.ECI:var h=e.parseECIValue(a);if(null===(u=sa.getCharacterSetECIByValue(h)))throw new aa;break;case fc.HANZI:var m=a.readBits(4),y=a.readBits(d.getCharacterCountBits(n));m===e.GB2312_SUBSET&&e.decodeHanziSegment(a,i,y);break;default:var g=a.readBits(d.getCharacterCountBits(n));switch(d){case fc.NUMERIC:e.decodeNumericSegment(a,i,g);break;case fc.ALPHANUMERIC:e.decodeAlphanumericSegment(a,i,g,f);break;case fc.BYTE:e.decodeByteSegment(a,i,g,u,s,o);break;case fc.KANJI:e.decodeKanjiSegment(a,i,g);break;default:throw new aa}}}while(d!==fc.TERMINATOR)}catch(e){throw new aa}return new xa(t,i.toString(),0===s.length?null:s,null===r?null:r.toString(),c,l)},e.decodeHanziSegment=function(e,t,n){if(13*n>e.available())throw new aa;for(var r=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),i=a/96<<8&4294967295|a%96;i+=i<959?41377:42657,r[o]=i>>8&255,r[o+1]=255&i,o+=2,n--}try{t.append(ua.decode(r,fa.GB2312))}catch(e){throw new aa(e)}},e.decodeKanjiSegment=function(e,t,n){if(13*n>e.available())throw new aa;for(var r=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),i=a/192<<8&4294967295|a%192;i+=i<7936?33088:49472,r[o]=i>>8,r[o+1]=i,o+=2,n--}try{t.append(ua.decode(r,fa.SHIFT_JIS))}catch(e){throw new aa(e)}},e.decodeByteSegment=function(e,t,n,r,o,a){if(8*n>e.available())throw new aa;for(var i,s=new Uint8Array(n),c=0;c<n;c++)s[c]=e.readBits(8);i=null===r?fa.guessEncoding(s,a):r.getName();try{t.append(ua.decode(s,i))}catch(e){throw new aa(e)}o.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new aa;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,n,r,o){for(var a=n.length();r>1;){if(t.available()<11)throw new aa;var i=t.readBits(11);n.append(e.toAlphaNumericChar(Math.floor(i/45))),n.append(e.toAlphaNumericChar(i%45)),r-=2}if(1===r){if(t.available()<6)throw new aa;n.append(e.toAlphaNumericChar(t.readBits(6)))}if(o)for(var s=a;s<n.length();s++)"%"===n.charAt(s)&&(s<n.length()-1&&"%"===n.charAt(s+1)?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,n,r){for(;r>=3;){if(t.available()<10)throw new aa;var o=t.readBits(10);if(o>=1e3)throw new aa;n.append(e.toAlphaNumericChar(Math.floor(o/100))),n.append(e.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(e.toAlphaNumericChar(o%10)),r-=3}if(2===r){if(t.available()<7)throw new aa;var a=t.readBits(7);if(a>=100)throw new aa;n.append(e.toAlphaNumericChar(Math.floor(a/10))),n.append(e.toAlphaNumericChar(a%10))}else if(1===r){if(t.available()<4)throw new aa;var i=t.readBits(4);if(i>=10)throw new aa;n.append(e.toAlphaNumericChar(i))}},e.parseECIValue=function(e){var t=e.readBits(8);if(0==(128&t))return 127&t;if(128==(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192==(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new aa},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}(),pc=function(){function e(e){this.mirrored=e}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},e}(),hc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mc=function(){function e(){this.rsDecoder=new za(Ua.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(pa.parseFromBooleanArray(e),t)},e.prototype.decodeBitMatrix=function(e,t){var n=new ic(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(e){r=e}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new pc(!0)),o}catch(e){if(null!==r)throw r;throw e}},e.prototype.decodeBitMatrixParser=function(e,t){var n,r,o,a,i=e.readVersion(),s=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),l=cc.getDataBlocks(c,i,s),u=0;try{for(var f=hc(l),d=f.next();!d.done;d=f.next())u+=(g=d.value).getNumDataCodewords()}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}var p=new Uint8Array(u),h=0;try{for(var m=hc(l),y=m.next();!y.done;y=m.next()){var g,v=(g=y.value).getCodewords(),b=g.getNumDataCodewords();this.correctErrors(v,b);for(var w=0;w<b;w++)p[h++]=v[w]}}catch(e){o={error:e}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}return dc.decode(p,i,s,t)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(e){throw new Go}for(var r=0;r<t;r++)e[r]=n[r]},e}(),yc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gc=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.estimatedModuleSize=r,o}return yc(t,e),t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){return new t((this.getX()+n)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)},t}(qa),vc=function(){function e(e,t,n,r,o,a,i){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=o,this.moduleSize=a,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,o=new Int32Array(3),a=this.image,i=0;i<t;i++){var s=r+(0==(1&i)?Math.floor((i+1)/2):-Math.floor((i+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var c=e;c<n&&!a.get(c,s);)c++;for(var l=0;c<n;){if(a.get(c,s))if(1===l)o[1]++;else if(2===l){var u;if(this.foundPatternCross(o)&&null!==(u=this.handlePossibleCenter(o,s,c)))return u;o[0]=o[2],o[1]=1,o[2]=0,l=1}else o[++l]++;else 1===l&&l++,o[l]++;c++}if(this.foundPatternCross(o)&&null!==(u=this.handlePossibleCenter(o,s,n)))return u}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new ma},e.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},e.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},e.prototype.crossCheckVertical=function(t,n,r,o){var a=this.image,i=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=t;c>=0&&a.get(n,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&!a.get(n,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=t+1;c<i&&a.get(n,c)&&s[1]<=r;)s[1]++,c++;if(c===i||s[1]>r)return NaN;for(;c<i&&!a.get(n,c)&&s[2]<=r;)s[2]++,c++;if(s[2]>r)return NaN;var l=s[0]+s[1]+s[2];return 5*Math.abs(l-o)>=2*o?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,c):NaN},e.prototype.handlePossibleCenter=function(t,n,r){var o,a,i=t[0]+t[1]+t[2],s=e.centerFromEnd(t,r),c=this.crossCheckVertical(n,s,2*t[1],i);if(!isNaN(c)){var l=(t[0]+t[1]+t[2])/3;try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.aboutEquals(l,c,s))return d.combineEstimate(c,s,l)}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}var p=new gc(s,c,l);this.possibleCenters.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},e}(),bc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wc=function(e){function t(t,n,r,o){var a=e.call(this,t,n)||this;return a.estimatedModuleSize=r,a.count=o,void 0===o&&(a.count=1),a}return bc(t,e),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){var o=this.count+1;return new t((this.count*this.getX()+n)/o,(this.count*this.getY()+e)/o,(this.count*this.estimatedModuleSize+r)/o,o)},t}(qa),Ec=function(){function e(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}(),Sc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Cc=function(){function e(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var n=null!=t&&void 0!==t.get(ra.TRY_HARDER),r=null!=t&&void 0!==t.get(ra.PURE_BARCODE),o=this.image,a=o.getHeight(),i=o.getWidth(),s=Math.floor(3*a/(4*e.MAX_MODULES));(s<e.MIN_SKIP||n)&&(s=e.MIN_SKIP);for(var c=!1,l=new Int32Array(5),u=s-1;u<a&&!c;u+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var f=0,d=0;d<i;d++)if(o.get(d,u))1==(1&f)&&f++,l[f]++;else if(0==(1&f))if(4===f)if(e.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,d,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,f=3;continue}if(s=2,!0===this.hasSkipped)c=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>l[2]&&(u+=p-l[2]-s,d=i-1)}f=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,f=3;else l[++f]++;else l[f]++;e.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,i,r)&&(s=l[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}var h=this.selectBestPatterns();return qa.orderBestPatterns(h),new Ec(h)},e.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},e.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var o=t/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},e.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},e.prototype.crossCheckDiagonal=function(t,n,r,o){for(var a=this.getCrossCheckStateCount(),i=0,s=this.image;t>=i&&n>=i&&s.get(n-i,t-i);)a[2]++,i++;if(t<i||n<i)return!1;for(;t>=i&&n>=i&&!s.get(n-i,t-i)&&a[1]<=r;)a[1]++,i++;if(t<i||n<i||a[1]>r)return!1;for(;t>=i&&n>=i&&s.get(n-i,t-i)&&a[0]<=r;)a[0]++,i++;if(a[0]>r)return!1;var c=s.getHeight(),l=s.getWidth();for(i=1;t+i<c&&n+i<l&&s.get(n+i,t+i);)a[2]++,i++;if(t+i>=c||n+i>=l)return!1;for(;t+i<c&&n+i<l&&!s.get(n+i,t+i)&&a[3]<r;)a[3]++,i++;if(t+i>=c||n+i>=l||a[3]>=r)return!1;for(;t+i<c&&n+i<l&&s.get(n+i,t+i)&&a[4]<r;)a[4]++,i++;if(a[4]>=r)return!1;var u=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(u-o)<2*o&&e.foundPatternCross(a)},e.prototype.crossCheckVertical=function(t,n,r,o){for(var a=this.image,i=a.getHeight(),s=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(n,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(n,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(n,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=t+1;c<i&&a.get(n,c);)s[2]++,c++;if(c===i)return NaN;for(;c<i&&!a.get(n,c)&&s[3]<r;)s[3]++,c++;if(c===i||s[3]>=r)return NaN;for(;c<i&&a.get(n,c)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-o)>=2*o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,c):NaN},e.prototype.crossCheckHorizontal=function(t,n,r,o){for(var a=this.image,i=a.getWidth(),s=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(c,n);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,n)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&a.get(c,n)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=t+1;c<i&&a.get(c,n);)s[2]++,c++;if(c===i)return NaN;for(;c<i&&!a.get(c,n)&&s[3]<r;)s[3]++,c++;if(c===i||s[3]>=r)return NaN;for(;c<i&&a.get(c,n)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-o)>=o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,c):NaN},e.prototype.handlePossibleCenter=function(t,n,r,o){var a=t[0]+t[1]+t[2]+t[3]+t[4],i=e.centerFromEnd(t,r),s=this.crossCheckVertical(n,Math.floor(i),t[2],a);if(!isNaN(s)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(s),t[2],a),!isNaN(i)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(i),t[2],a)))){for(var c=a/7,l=!1,u=this.possibleCenters,f=0,d=u.length;f<d;f++){var p=u[f];if(p.aboutEquals(c,s,i)){u[f]=p.combineEstimate(s,i,c),l=!0;break}}if(!l){var h=new wc(i,s,c);u.push(h),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(h)}return!0}return!1},e.prototype.findRowSkip=function(){var t,n;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var o=Sc(this.possibleCenters),a=o.next();!a.done;a=o.next()){var i=a.value;if(i.getCount()>=e.CENTER_QUORUM){if(null!=r)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-i.getX())-Math.abs(r.getY()-i.getY()))/2);r=i}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,n,r,o,a=0,i=0,s=this.possibleCenters.length;try{for(var c=Sc(this.possibleCenters),l=c.next();!l.done;l=c.next())(h=l.value).getCount()>=e.CENTER_QUORUM&&(a++,i+=h.getEstimatedModuleSize())}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(a<3)return!1;var u=i/s,f=0;try{for(var d=Sc(this.possibleCenters),p=d.next();!p.done;p=d.next()){var h=p.value;f+=Math.abs(h.getEstimatedModuleSize()-u)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return f<=.05*i},e.prototype.selectBestPatterns=function(){var e,t,n,r,o=this.possibleCenters.length;if(o<3)throw new ma;var a,i=this.possibleCenters;if(o>3){var s=0,c=0;try{for(var l=Sc(this.possibleCenters),u=l.next();!u.done;u=l.next()){var f=u.value.getEstimatedModuleSize();s+=f,c+=f*f}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}a=s/o;var d=Math.sqrt(c/o-a*a);i.sort((function(e,t){var n=Math.abs(t.getEstimatedModuleSize()-a),r=Math.abs(e.getEstimatedModuleSize()-a);return n<r?-1:n>r?1:0}));for(var p=Math.max(.2*a,d),h=0;h<i.length&&i.length>3;h++){var m=i[h];Math.abs(m.getEstimatedModuleSize()-a)>p&&(i.splice(h,1),h--)}}if(i.length>3){s=0;try{for(var y=Sc(i),g=y.next();!g.done;g=y.next())s+=g.value.getEstimatedModuleSize()}catch(e){n={error:e}}finally{try{g&&!g.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}a=s/i.length,i.sort((function(e,t){if(t.getCount()===e.getCount()){var n=Math.abs(t.getEstimatedModuleSize()-a),r=Math.abs(e.getEstimatedModuleSize()-a);return n<r?1:n>r?-1:0}return t.getCount()-e.getCount()})),i.splice(3)}return[i[0],i[1],i[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}(),_c=function(){function e(e){this.image=e}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(e){this.resultPointCallback=null==e?null:e.get(ra.NEED_RESULT_POINT_CALLBACK);var t=new Cc(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},e.prototype.processFinderPatternInfo=function(t){var n=t.getTopLeft(),r=t.getTopRight(),o=t.getBottomLeft(),a=this.calculateModuleSize(n,r,o);if(a<1)throw new ma("No pattern found in proccess finder.");var i=e.computeDimension(n,r,o,a),s=rc.getProvisionalVersionForDimension(i),c=s.getDimensionForVersion()-7,l=null;if(s.getAlignmentPatternCenters().length>0)for(var u=r.getX()-n.getX()+o.getX(),f=r.getY()-n.getY()+o.getY(),d=1-3/c,p=Math.floor(n.getX()+d*(u-n.getX())),h=Math.floor(n.getY()+d*(f-n.getY())),m=4;m<=16;m<<=1)try{l=this.findAlignmentInRegion(a,p,h,m);break}catch(e){if(!(e instanceof ma))throw e}var y=e.createTransform(n,r,o,l,i),g=e.sampleGrid(this.image,y,i);return new Ya(g,null===l?[o,n,r]:[o,n,r,l])},e.createTransform=function(e,t,n,r,o){var a,i,s,c,l=o-3.5;return null!==r?(a=r.getX(),i=r.getY(),c=s=l-3):(a=t.getX()-e.getX()+n.getX(),i=t.getY()-e.getY()+n.getY(),s=l,c=l),ti.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,s,c,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),a,i,n.getX(),n.getY())},e.sampleGrid=function(e,t,n){return oi.getInstance().sampleGridWithTransform(e,n,n,t)},e.computeDimension=function(e,t,n,r){var o=Xa.round(qa.distance(e,t)/r),a=Xa.round(qa.distance(e,n)/r),i=Math.floor((o+a)/2)+7;switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw new ma("Dimensions could be not found.")}return i},e.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},e.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,r){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,r),a=1,i=e-(n-e);i<0?(a=e/(e-i),i=0):i>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(i-e),i=this.image.getWidth()-1);var s=Math.floor(t-(r-t)*a);return a=1,s<0?(a=t/(t-s),s=0):s>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),i=Math.floor(e+(i-e)*a),(o+=this.sizeOfBlackWhiteBlackRun(e,t,i,s))-1},e.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,r){var o=Math.abs(r-t)>Math.abs(n-e);if(o){var a=e;e=t,t=a,a=n,n=r,r=a}for(var i=Math.abs(n-e),s=Math.abs(r-t),c=-i/2,l=e<n?1:-1,u=t<r?1:-1,f=0,d=n+l,p=e,h=t;p!==d;p+=l){var m=o?h:p,y=o?p:h;if(1===f===this.image.get(m,y)){if(2===f)return Xa.distance(p,h,e,t);f++}if((c+=s)>0){if(h===r)break;h+=u,c-=i}}return 2===f?Xa.distance(n+l,r,e,t):NaN},e.prototype.findAlignmentInRegion=function(e,t,n,r){var o=Math.floor(r*e),a=Math.max(0,t-o),i=Math.min(this.image.getWidth()-1,t+o);if(i-a<3*e)throw new ma("Alignment top exceeds estimated module size.");var s=Math.max(0,n-o),c=Math.min(this.image.getHeight()-1,n+o);if(c-s<3*e)throw new ma("Alignment bottom exceeds estimated module size.");return new vc(this.image,a,s,i-a,c-s,e,this.resultPointCallback).find()},e}(),Ac=function(){function e(){this.decoder=new mc}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,n){var r,o;if(null!=n&&void 0!==n.get(ra.PURE_BARCODE)){var a=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,n),o=e.NO_POINTS}else{var i=new _c(t.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(i.getBits(),n),o=i.getPoints()}r.getOther()instanceof pc&&r.getOther().applyMirroredCorrection(o);var s=new Na(r.getText(),r.getRawBytes(),void 0,o,Ia.QR_CODE,void 0),c=r.getByteSegments();null!==c&&s.putMetadata(Da.BYTE_SEGMENTS,c);var l=r.getECLevel();return null!==l&&s.putMetadata(Da.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(s.putMetadata(Da.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(Da.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new ma;var r=this.moduleSize(t,e),o=t[1],a=n[1],i=t[0],s=n[0];if(i>=s||o>=a)throw new ma;if(a-o!=s-i&&(s=i+(a-o))>=e.getWidth())throw new ma;var c=Math.round((s-i+1)/r),l=Math.round((a-o+1)/r);if(c<=0||l<=0)throw new ma;if(l!==c)throw new ma;var u=Math.floor(r/2);o+=u;var f=(i+=u)+Math.floor((c-1)*r)-s;if(f>0){if(f>u)throw new ma;i-=f}var d=o+Math.floor((l-1)*r)-a;if(d>0){if(d>u)throw new ma;o-=d}for(var p=new pa(c,l),h=0;h<l;h++)for(var m=o+Math.floor(h*r),y=0;y<c;y++)e.get(i+Math.floor(y*r),m)&&p.set(y,h);return p},e.moduleSize=function(e,t){for(var n=t.getHeight(),r=t.getWidth(),o=e[0],a=e[1],i=!0,s=0;o<r&&a<n;){if(i!==t.get(o,a)){if(5==++s)break;i=!i}o++,a++}if(o===r||a===n)throw new ma;return(o-e[0])/7},e.NO_POINTS=new Array,e}(),kc=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(e){return Xa.sum(e)},e.toIntArray=function(t){var n,r;if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var o=new Int32Array(t.length),a=0;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),s=i.next();!s.done;s=i.next()){var c=s.value;o[a++]=c}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},e.getCodeword=function(t){var n=$o.binarySearch(e.SYMBOL_TABLE,262143&t);return n<0?-1:(e.CODEWORD_TABLE[n]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}(),Oc=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),Pc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nc=function(){function e(){}return e.detectMultiple=function(t,n,r){var o=t.getBlackMatrix(),a=e.detect(r,o);return a.length||((o=o.clone()).rotate180(),a=e.detect(r,o)),new Oc(o,a)},e.detect=function(t,n){for(var r,o,a=new Array,i=0,s=0,c=!1;i<n.getHeight();){var l=e.findVertices(n,i,s);if(null!=l[0]||null!=l[3]){if(c=!0,a.push(l),!t)break;null!=l[2]?(s=Math.trunc(l[2].getX()),i=Math.trunc(l[2].getY())):(s=Math.trunc(l[4].getX()),i=Math.trunc(l[4].getY()))}else{if(!c)break;c=!1,s=0;try{for(var u=(r=void 0,Pc(a)),f=u.next();!f.done;f=u.next()){var d=f.value;null!=d[1]&&(i=Math.trunc(Math.max(i,d[1].getY()))),null!=d[3]&&(i=Math.max(i,Math.trunc(d[3].getY())))}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}i+=e.ROW_STEP}}return a},e.findVertices=function(t,n,r){var o=t.getHeight(),a=t.getWidth(),i=new Array(8);return e.copyToResult(i,e.findRowsWithPattern(t,o,a,n,r,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=i[4]&&(r=Math.trunc(i[4].getX()),n=Math.trunc(i[4].getY())),e.copyToResult(i,e.findRowsWithPattern(t,o,a,n,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),i},e.copyToResult=function(e,t,n){for(var r=0;r<n.length;r++)e[n[r]]=t[r]},e.findRowsWithPattern=function(t,n,r,o,a,i){for(var s=new Array(4),c=!1,l=new Int32Array(i.length);o<n;o+=e.ROW_STEP)if(null!=(p=e.findGuardPattern(t,a,o,r,!1,i,l))){for(;o>0;){if(null==(d=e.findGuardPattern(t,a,--o,r,!1,i,l))){o++;break}p=d}s[0]=new qa(p[0],o),s[1]=new qa(p[1],o),c=!0;break}var u=o+1;if(c){for(var f=0,d=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);u<n;u++){var p;if(null!=(p=e.findGuardPattern(t,d[0],u,r,!1,i,l))&&Math.abs(d[0]-p[0])<e.MAX_PATTERN_DRIFT&&Math.abs(d[1]-p[1])<e.MAX_PATTERN_DRIFT)d=p,f=0;else{if(f>e.SKIPPED_ROW_COUNT_MAX)break;f++}}u-=f+1,s[2]=new qa(d[0],u),s[3]=new qa(d[1],u)}return u-o<e.BARCODE_MIN_HEIGHT&&$o.fill(s,null),s},e.findGuardPattern=function(t,n,r,o,a,i,s){$o.fillWithin(s,0,s.length,0);for(var c=n,l=0;t.get(c,r)&&c>0&&l++<e.MAX_PIXEL_DRIFT;)c--;for(var u=c,f=0,d=i.length,p=a;u<o;u++)if(t.get(u,r)!==p)s[f]++;else{if(f===d-1){if(e.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([c,u]);c+=s[0]+s[1],Jo.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,p=!p}return f===d-1&&e.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([c,u-1]):null},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,a=0,i=0;i<r;i++)o+=e[i],a+=t[i];if(o<a)return 1/0;var s=o/a;n*=s;for(var c=0,l=0;l<r;l++){var u=e[l],f=t[l]*s,d=u>f?u-f:f-u;if(d>n)return 1/0;c+=d}return c/o},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}(),Tc=function(){function e(e,t){if(0===t.length)throw new Ko;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),Jo.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){var t,n;if(0===e)return this.getCoefficient(0);if(1===e){var r=0;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),a=o.next();!a.done;a=o.next()){var i=a.value;r=this.field.add(r,i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}for(var s=this.coefficients[0],c=this.coefficients.length,l=1;l<c;l++)s=this.field.add(this.field.multiply(e,s),this.coefficients[l]);return s},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new Ko("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var a=new Int32Array(r.length),i=r.length-n.length;Jo.arraycopy(r,0,a,0,i);for(var s=i;s<r.length;s++)a[s]=this.field.add(n[s-i],r[s]);return new e(this.field,a)},e.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ko("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new Ko("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,o=t.coefficients,a=o.length,i=new Int32Array(r+a-1),s=0;s<r;s++)for(var c=n[s],l=0;l<a;l++)i[s+l]=this.field.add(i[s+l],this.field.multiply(c,o[l]));return new e(this.field,i)},e.prototype.negative=function(){for(var t=this.coefficients.length,n=new Int32Array(t),r=0;r<t;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,n)},e.prototype.multiplyScalar=function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,r=new Int32Array(n),o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new e(this.field,r)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Ko;if(0===n)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,o=new Int32Array(r+t),a=0;a<r;a++)o[a]=this.field.multiply(this.coefficients[a],n);return new e(this.field,o)},e.prototype.toString=function(){for(var e=new da,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},e}(),Ic=function(){function e(){}return e.prototype.add=function(e,t){return(e+t)%this.modulus},e.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new Ko;return this.logTable[e]},e.prototype.inverse=function(e){if(0===e)throw new ja;return this.expTable[this.modulus-this.logTable[e]-1]},e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(e){return e===this},e}(),Rc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dc=function(e){function t(t,n){var r=e.call(this)||this;r.modulus=t,r.expTable=new Int32Array(t),r.logTable=new Int32Array(t);for(var o=1,a=0;a<t;a++)r.expTable[a]=o,o=o*n%t;for(a=0;a<t-1;a++)r.logTable[r.expTable[a]]=a;return r.zero=new Tc(r,new Int32Array([0])),r.one=new Tc(r,new Int32Array([1])),r}return Rc(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new Ko;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new Tc(this,n)},t.PDF417_GF=new t(kc.NUMBER_OF_CODEWORDS,3),t}(Ic),xc=function(){function e(){this.field=Dc.PDF417_GF}return e.prototype.decode=function(e,t,n){for(var r,o,a=new Tc(this.field,e),i=new Int32Array(t),s=!1,c=t;c>0;c--){var l=a.evaluateAt(this.field.exp(c));i[t-c]=l,0!==l&&(s=!0)}if(!s)return 0;var u=this.field.getOne();if(null!=n)try{for(var f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),d=f.next();!d.done;d=f.next()){var p=d.value,h=this.field.exp(e.length-1-p),m=new Tc(this.field,new Int32Array([this.field.subtract(0,h),1]));u=u.multiply(m)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}var y=new Tc(this.field,i),g=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),y,t),v=g[0],b=g[1],w=this.findErrorLocations(v),E=this.findErrorMagnitudes(b,v,w);for(c=0;c<w.length;c++){var S=e.length-1-this.field.log(w[c]);if(S<0)throw Go.getChecksumInstance();e[S]=this.field.subtract(e[S],E[c])}return w.length},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=e,a=t,i=this.field.getZero(),s=this.field.getOne();a.getDegree()>=Math.round(n/2);){var c=o,l=i;if(i=s,(o=a).isZero())throw Go.getChecksumInstance();a=c;for(var u=this.field.getZero(),f=o.getCoefficient(o.getDegree()),d=this.field.inverse(f);a.getDegree()>=o.getDegree()&&!a.isZero();){var p=a.getDegree()-o.getDegree(),h=this.field.multiply(a.getCoefficient(a.getDegree()),d);u=u.add(this.field.buildMonomial(p,h)),a=a.subtract(o.multiplyByMonomial(p,h))}s=u.multiply(i).subtract(l).negative()}var m=s.getCoefficient(0);if(0===m)throw Go.getChecksumInstance();var y=this.field.inverse(m);return[s.multiply(y),a.multiply(y)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),r=0,o=1;o<this.field.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=this.field.inverse(o),r++);if(r!==t)throw Go.getChecksumInstance();return n},e.prototype.findErrorMagnitudes=function(e,t,n){for(var r=t.getDegree(),o=new Int32Array(r),a=1;a<=r;a++)o[r-a]=this.field.multiply(a,t.getCoefficient(a));var i=new Tc(this.field,o),s=n.length,c=new Int32Array(s);for(a=0;a<s;a++){var l=this.field.inverse(n[a]),u=this.field.subtract(0,e.evaluateAt(l)),f=this.field.inverse(i.evaluateAt(l));c[a]=this.field.multiply(u,f)}return c},e}(),Mc=function(){function e(t,n,r,o,a){t instanceof e?this.constructor_2(t):this.constructor_1(t,n,r,o,a)}return e.prototype.constructor_1=function(e,t,n,r,o){var a=null==t||null==n,i=null==r||null==o;if(a&&i)throw new ma;a?(t=new qa(0,r.getY()),n=new qa(0,o.getY())):i&&(r=new qa(e.getWidth()-1,t.getY()),o=new qa(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},e.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},e.merge=function(t,n){return null==t?n:null==n?t:new e(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)},e.prototype.addMissingRows=function(t,n,r){var o=this.topLeft,a=this.bottomLeft,i=this.topRight,s=this.bottomRight;if(t>0){var c=r?this.topLeft:this.topRight,l=Math.trunc(c.getY()-t);l<0&&(l=0);var u=new qa(c.getX(),l);r?o=u:i=u}if(n>0){var f=r?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+n);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new qa(f.getX(),d);r?a=p:s=p}return new e(this.image,o,a,i,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}(),Lc=function(){function e(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}(),Bc=function(){function e(){this.buffer=""}return e.form=function(e,t){var n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,(function(e,r,o,a,i,s){if("%%"===e)return"%";if(void 0!==t[++n]){e=a?parseInt(a.substr(1)):void 0;var c,l=i?parseInt(i.substr(1)):void 0;switch(s){case"s":c=t[n];break;case"c":c=t[n][0];break;case"f":c=parseFloat(t[n]).toFixed(e);break;case"p":c=parseFloat(t[n]).toPrecision(e);break;case"e":c=parseFloat(t[n]).toExponential(e);break;case"x":c=parseInt(t[n]).toString(l||16);break;case"d":c=parseFloat(parseInt(t[n],l||10).toPrecision(e)).toFixed(0)}c="object"==typeof c?JSON.stringify(c):(+c).toString(l);for(var u=parseInt(o),f=o&&o[0]+""=="0"?"0":" ";c.length<u;)c=void 0!==r?c+f:f+c;return c}}))},e.prototype.format=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=e.form(t,n)},e.prototype.toString=function(){return this.buffer},e}(),jc=function(){function e(e){this.boundingBox=new Mc(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var o=this.imageRowToCodewordIndex(t)-r;if(o>=0&&null!=(n=this.codewords[o]))return n;if((o=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(n=this.codewords[o]))return n}return null},e.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},e.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},e.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var e,t,n=new Bc,r=0;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),a=o.next();!a.done;a=o.next()){var i=a.value;null!=i?n.format("%3d: %3d|%3d%n",r++,i.getRowNumber(),i.getValue()):n.format("%3d:    |   %n",r++)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},e.MAX_NEARBY_DISTANCE=5,e}(),Fc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Uc=function(){function e(){this.values=new Map}return e.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},e.prototype.getValue=function(){var e,t,n=-1,r=new Array,o=function(e,t){var o=function(){return e},a=function(){return t};a()>n?(n=a(),(r=[]).push(o())):a()===n&&r.push(o())};try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),i=a.next();!i.done;i=a.next()){var s=Fc(i.value,2);o(s[0],s[1])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return kc.toIntArray(r)},e.prototype.getConfidence=function(e){return this.values.get(e)},e}(),Hc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kc=function(e){function t(t,n){var r=e.call(this,t)||this;return r._isLeft=n,r}return Hc(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var n=Vc(this.getCodewords()),r=n.next();!r.done;r=n.next()){var o=r.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,c=1,l=0,u=a;u<i;u++)if(null!=t[u]){var f=t[u],d=f.getRowNumber()-s;if(0===d)l++;else if(1===d)c=Math.max(c,l),l=1,s=f.getRowNumber();else if(d<0||f.getRowNumber()>=e.getRowCount()||d>u)t[u]=null;else{for(var p,h=(p=c>2?(c-2)*d:d)>=u,m=1;m<=p&&!h;m++)h=null!=t[u-m];h?t[u]=null:(s=f.getRowNumber(),l=1)}}},t.prototype.getRowHeights=function(){var e,t,n=this.getBarcodeMetadata();if(null==n)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);var r=new Int32Array(n.getRowCount());try{for(var o=Vc(this.getCodewords()),a=o.next();!a.done;a=o.next()){var i=a.value;if(null!=i){var s=i.getRowNumber();if(s>=r.length)continue;r[s]++}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.getCodewords(),s=-1,c=o;c<a;c++)if(null!=i[c]){var l=i[c];l.setRowNumberAsRowIndicatorColumn();var u=l.getRowNumber()-s;0===u||(1===u?s=l.getRowNumber():l.getRowNumber()>=e.getRowCount()?i[c]=null:s=l.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,t,n=this.getCodewords(),r=new Uc,o=new Uc,a=new Uc,i=new Uc;try{for(var s=Vc(n),c=s.next();!c.done;c=s.next()){var l=c.value;if(null!=l){l.setRowNumberAsRowIndicatorColumn();var u=l.getValue()%30,f=l.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:o.setValue(3*u+1);break;case 1:i.setValue(u/3),a.setValue(u%3);break;case 2:r.setValue(u+1)}}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}if(0===r.getValue().length||0===o.getValue().length||0===a.getValue().length||0===i.getValue().length||r.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<kc.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>kc.MAX_ROWS_IN_BARCODE)return null;var d=new Lc(r.getValue()[0],o.getValue()[0],a.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(n,d),d},t.prototype.removeIncorrectCodewords=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(null!=e[n]){var o=r.getValue()%30,a=r.getRowNumber();if(a>t.getRowCount())e[n]=null;else switch(this._isLeft||(a+=2),a%3){case 0:3*o+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(o/3)===t.getErrorCorrectionLevel()&&o%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:o+1!==t.getColumnCount()&&(e[n]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(jc),Wc=function(){function e(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=kc.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n));return e},e.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(var r=1;r<=this.barcodeColumnCount;r++){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}},e.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),a=0,i=this.barcodeColumnCount+1;i>0&&a<this.ADJUST_ROW_NUMBER_SKIP;i--){var s=this.detectionResultColumns[i].getCodewords()[r];null!=s&&(a=e.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),a=0,i=1;i<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;i++){var s=this.detectionResultColumns[i].getCodewords()[r];null!=s&&(a=e.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},e.prototype.adjustRowNumbers=function(t,n,r){var o,a,i=r[n],s=this.detectionResultColumns[t-1].getCodewords(),c=s;null!=this.detectionResultColumns[t+1]&&(c=this.detectionResultColumns[t+1].getCodewords());var l=new Array(14);l[2]=s[n],l[3]=c[n],n>0&&(l[0]=r[n-1],l[4]=s[n-1],l[5]=c[n-1]),n>1&&(l[8]=r[n-2],l[10]=s[n-2],l[11]=c[n-2]),n<r.length-1&&(l[1]=r[n+1],l[6]=s[n+1],l[7]=c[n+1]),n<r.length-2&&(l[9]=r[n+2],l[12]=s[n+2],l[13]=c[n+2]);try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),f=u.next();!f.done;f=u.next()){var d=f.value;if(e.adjustRowNumber(i,d))return}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}},e.adjustRowNumber=function(e,t){return!(null==t||!t.hasValidRowNumber()||t.getBucket()!==e.getBucket()||(e.setRowNumber(t.getRowNumber()),0))},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(e){this.boundingBox=e},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},e.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},e.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Bc,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var r=0;r<this.barcodeColumnCount+2;r++)if(null!=this.detectionResultColumns[r]){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o?t.format(" %3d|%3d",o.getRowNumber(),o.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},e}(),zc=function(){function e(t,n,r,o){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(o)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(e){this.rowNumber=e},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}(),Gc=function(){function e(){}return e.initialize=function(){for(var t=0;t<kc.SYMBOL_TABLE.length;t++)for(var n=kc.SYMBOL_TABLE[t],r=1&n,o=0;o<kc.BARS_IN_MODULE;o++){for(var a=0;(1&n)===r;)a+=1,n>>=1;r=1&n,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(kc.BARS_IN_MODULE)),e.RATIOS_TABLE[t][kc.BARS_IN_MODULE-o-1]=Math.fround(a/kc.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var n=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==n?n:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(e){for(var t=Xa.sum(e),n=new Int32Array(kc.BARS_IN_MODULE),r=0,o=0,a=0;a<kc.MODULES_IN_CODEWORD;a++){var i=t/(2*kc.MODULES_IN_CODEWORD)+a*t/kc.MODULES_IN_CODEWORD;o+e[r]<=i&&(o+=e[r],r++),n[r]++}return n},e.getDecodedCodewordValue=function(t){var n=e.getBitValue(t);return-1===kc.getCodeword(n)?-1:n},e.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n];r++)t=t<<1|(n%2==0?1:0);return Math.trunc(t)},e.getClosestDecodedValue=function(t){var n=Xa.sum(t),r=new Array(kc.BARS_IN_MODULE);if(n>1)for(var o=0;o<r.length;o++)r[o]=Math.fround(t[o]/n);var a=Ja.MAX_VALUE,i=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var c=0,l=e.RATIOS_TABLE[s],u=0;u<kc.BARS_IN_MODULE;u++){var f=Math.fround(l[u]-r[u]);if((c+=Math.fround(f*f))>=a)break}c<a&&(a=c,i=kc.SYMBOL_TABLE[s])}return i},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(kc.SYMBOL_TABLE.length).map((function(e){return new Array(kc.BARS_IN_MODULE)})),e}(),Xc=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(e){this.segmentIndex=e},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(e){this.fileId=e},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(e){this.optionalData=e},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(e){this.lastSegment=e},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(e){this.segmentCount=e},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(e){this.sender=e},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(e){this.addressee=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(e){this.checksum=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e}(),Jc=function(){function e(){}return e.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e}(),qc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qc(t,e),t.kind="NullPointerException",t}(Fo),Qc=function(){function e(){}return e.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},e.prototype.writeBytesOffset=function(e,t,n){if(null==e)throw new Yc;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Yo;if(0!==n)for(var r=0;r<n;r++)this.write(e[t+r])},e.prototype.flush=function(){},e.prototype.close=function(){},e}(),Zc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zc(t,e),t}(Fo),el=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tl=function(e){function t(t){void 0===t&&(t=32);var n=e.call(this)||this;if(n.count=0,t<0)throw new Ko("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return el(t,e),t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new $c;t=ea.MAX_VALUE}this.buf=$o.copyOfUint8Array(this.buf,t)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new Yo;this.ensureCapacity(this.count+n),Jo.arraycopy(e,t,this.buf,this.count,n),this.count+=n},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return $o.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(Qc);function nl(){if("undefined"!=typeof window)return window.BigInt||null;if(void 0!==n.g)return n.g.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function rl(e){if(void 0===uc&&(uc=nl()),null===uc)throw new Error("BigInt is not supported!");return uc(e)}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(lc||(lc={}));var ol=function(){function e(){}return e.decode=function(t,n){var r=new da(""),o=sa.ISO8859_1;r.enableDecoding(o);for(var a=1,i=t[a++],s=new Xc;a<t[0];){switch(i){case e.TEXT_COMPACTION_MODE_LATCH:a=e.textCompaction(t,a,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:a=e.byteCompaction(i,t,o,a,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:a=e.numericCompaction(t,a,r);break;case e.ECI_CHARSET:sa.getCharacterSetECIByValue(t[a++]);break;case e.ECI_GENERAL_PURPOSE:a+=2;break;case e.ECI_USER_DEFINED:a++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=e.decodeMacroBlock(t,a,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new aa;default:a--,a=e.textCompaction(t,a,r)}if(!(a<t.length))throw aa.getFormatInstance();i=t[a++]}if(0===r.length())throw aa.getFormatInstance();var c=new xa(null,r.toString(),null,n);return c.setOther(s),c},e.decodeMacroBlock=function(t,n,r){if(n+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw aa.getFormatInstance();for(var o=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<e.NUMBER_OF_SEQUENCE_CODEWORDS;a++,n++)o[a]=t[n];r.setSegmentIndex(ea.parseInt(e.decodeBase900toBase10(o,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new da;n=e.textCompaction(t,n,i),r.setFileId(i.toString());var s=-1;for(t[n]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<t[0];)switch(t[n]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new da;n=e.textCompaction(t,n+1,c),r.setFileName(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new da;n=e.textCompaction(t,n+1,l),r.setSender(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new da;n=e.textCompaction(t,n+1,u),r.setAddressee(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new da;n=e.numericCompaction(t,n+1,f),r.setSegmentCount(ea.parseInt(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new da;n=e.numericCompaction(t,n+1,d),r.setTimestamp(Jc.parseLong(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new da;n=e.numericCompaction(t,n+1,p),r.setChecksum(ea.parseInt(p.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var h=new da;n=e.numericCompaction(t,n+1,h),r.setFileSize(Jc.parseLong(h.toString()));break;default:throw aa.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw aa.getFormatInstance()}if(-1!==s){var m=n-s;r.isLastSegment()&&m--,r.setOptionalData($o.copyOfRange(t,s,s+m))}return n},e.textCompaction=function(t,n,r){for(var o=new Int32Array(2*(t[0]-n)),a=new Int32Array(2*(t[0]-n)),i=0,s=!1;n<t[0]&&!s;){var c=t[n++];if(c<e.TEXT_COMPACTION_MODE_LATCH)o[i]=c/30,o[i+1]=c%30,i+=2;else switch(c){case e.TEXT_COMPACTION_MODE_LATCH:o[i++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[i]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=t[n++],a[i]=c,i++}}return e.decodeTextCompaction(o,a,i,r),n},e.decodeTextCompaction=function(t,n,r,o){for(var a=lc.ALPHA,i=lc.ALPHA,s=0;s<r;){var c=t[s],l="";switch(a){case lc.ALPHA:if(c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case e.LL:a=lc.LOWER;break;case e.ML:a=lc.MIXED;break;case e.PS:i=a,a=lc.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=lc.ALPHA}break;case lc.LOWER:if(c<26)l=String.fromCharCode(97+c);else switch(c){case 26:l=" ";break;case e.AS:i=a,a=lc.ALPHA_SHIFT;break;case e.ML:a=lc.MIXED;break;case e.PS:i=a,a=lc.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=lc.ALPHA}break;case lc.MIXED:if(c<e.PL)l=e.MIXED_CHARS[c];else switch(c){case e.PL:a=lc.PUNCT;break;case 26:l=" ";break;case e.LL:a=lc.LOWER;break;case e.AL:a=lc.ALPHA;break;case e.PS:i=a,a=lc.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=lc.ALPHA}break;case lc.PUNCT:if(c<e.PAL)l=e.PUNCT_CHARS[c];else switch(c){case e.PAL:a=lc.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=lc.ALPHA}break;case lc.ALPHA_SHIFT:if(a=i,c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:a=lc.ALPHA}break;case lc.PUNCT_SHIFT:if(a=i,c<e.PAL)l=e.PUNCT_CHARS[c];else switch(c){case e.PAL:a=lc.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=lc.ALPHA}}""!==l&&o.append(l),s++}},e.byteCompaction=function(t,n,r,o,a){var i=new tl,s=0,c=0,l=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),f=n[o++];o<n[0]&&!l;)switch(u[s++]=f,c=900*c+f,f=n[o++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,l=!0;break;default:if(s%5==0&&s>0){for(var d=0;d<6;++d)i.write(Number(rl(c)>>rl(8*(5-d))));c=0,s=0}}o===n[0]&&f<e.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=f);for(var p=0;p<s;p++)i.write(u[p]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;o<n[0]&&!l;){var h=n[o++];if(h<e.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+h;else switch(h){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,l=!0}if(s%5==0&&s>0){for(d=0;d<6;++d)i.write(Number(rl(c)>>rl(8*(5-d))));c=0,s=0}}}return a.append(ua.decode(i.toByteArray(),r)),o},e.numericCompaction=function(t,n,r){for(var o=0,a=!1,i=new Int32Array(e.MAX_NUMERIC_CODEWORDS);n<t[0]&&!a;){var s=t[n++];if(n===t[0]&&(a=!0),s<e.TEXT_COMPACTION_MODE_LATCH)i[o]=s,o++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,a=!0}(o%e.MAX_NUMERIC_CODEWORDS==0||s===e.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(r.append(e.decodeBase900toBase10(i,o)),o=0)}return n},e.decodeBase900toBase10=function(t,n){for(var r=rl(0),o=0;o<n;o++)r+=e.EXP900[n-o-1]*rl(t[o]);var a=r.toString();if("1"!==a.charAt(0))throw new aa;return a.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",e.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",e.EXP900=nl()?function(){var e=[];e[0]=rl(1);var t=rl(900);e[1]=t;for(var n=2;n<16;n++)e[n]=e[n-1]*t;return e}():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}(),al=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},il=function(){function e(){}return e.decode=function(t,n,r,o,a,i,s){for(var c,l=new Mc(t,n,r,o,a),u=null,f=null,d=!0;;d=!1){if(null!=n&&(u=e.getRowIndicatorColumn(t,l,n,!0,i,s)),null!=o&&(f=e.getRowIndicatorColumn(t,l,o,!1,i,s)),null==(c=e.merge(u,f)))throw ma.getNotFoundInstance();var p=c.getBoundingBox();if(!d||null==p||!(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))break;l=p}c.setBoundingBox(l);var h=c.getBarcodeColumnCount()+1;c.setDetectionResultColumn(0,u),c.setDetectionResultColumn(h,f);for(var m=null!=u,y=1;y<=h;y++){var g=m?y:h-y;if(void 0===c.getDetectionResultColumn(g)){var v=void 0;v=0===g||g===h?new Kc(l,0===g):new jc(l),c.setDetectionResultColumn(g,v);for(var b=-1,w=b,E=l.getMinY();E<=l.getMaxY();E++){if((b=e.getStartColumn(c,g,E,m))<0||b>l.getMaxX()){if(-1===w)continue;b=w}var S=e.detectCodeword(t,l.getMinX(),l.getMaxX(),m,b,E,i,s);null!=S&&(v.setCodeword(E,S),w=b,i=Math.min(i,S.getWidth()),s=Math.max(s,S.getWidth()))}}}return e.createDecoderResult(c)},e.merge=function(t,n){if(null==t&&null==n)return null;var r=e.getBarcodeMetadata(t,n);if(null==r)return null;var o=Mc.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(n));return new Wc(r,o)},e.adjustBoundingBox=function(t){var n,r;if(null==t)return null;var o=t.getRowHeights();if(null==o)return null;var a=e.getMax(o),i=0;try{for(var s=al(o),c=s.next();!c.done;c=s.next()){var l=c.value;if(i+=a-l,l>0)break}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var u=t.getCodewords(),f=0;i>0&&null==u[f];f++)i--;var d=0;for(f=o.length-1;f>=0&&(d+=a-o[f],!(o[f]>0));f--);for(f=u.length-1;d>0&&null==u[f];f--)d--;return t.getBoundingBox().addMissingRows(i,d,t.isLeft())},e.getMax=function(e){var t,n,r=-1;try{for(var o=al(e),a=o.next();!a.done;a=o.next()){var i=a.value;r=Math.max(r,i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.getBarcodeMetadata=function(e,t){var n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n},e.getRowIndicatorColumn=function(t,n,r,o,a,i){for(var s=new Kc(n,o),c=0;c<2;c++)for(var l=0===c?1:-1,u=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=n.getMaxY()&&f>=n.getMinY();f+=l){var d=e.detectCodeword(t,0,t.getWidth(),o,u,f,a,i);null!=d&&(s.setCodeword(f,d),u=o?d.getStartX():d.getEndX())}return s},e.adjustCodewordCount=function(t,n){var r=n[0][1],o=r.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===o.length){if(a<1||a>kc.MAX_CODEWORDS_IN_BARCODE)throw ma.getNotFoundInstance();r.setValue(a)}else o[0]!==a&&r.setValue(a)},e.createDecoderResult=function(t){var n=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,n);for(var r=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],i=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var c=0;c<t.getBarcodeColumnCount();c++){var l=n[s][c+1].getValue(),u=s*t.getBarcodeColumnCount()+c;0===l.length?r.push(u):1===l.length?o[u]=l[0]:(i.push(u),a.push(l))}for(var f=new Array(a.length),d=0;d<f.length;d++)f[d]=a[d];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,kc.toIntArray(r),kc.toIntArray(i),f)},e.createDecoderResultFromAmbiguousValues=function(t,n,r,o,a){for(var i=new Int32Array(o.length),s=100;s-- >0;){for(var c=0;c<i.length;c++)n[o[c]]=a[c][i[c]];try{return e.decodeCodewords(n,t,r)}catch(e){if(!(e instanceof Go))throw e}if(0===i.length)throw Go.getChecksumInstance();for(c=0;c<i.length;c++){if(i[c]<a[c].length-1){i[c]++;break}if(i[c]=0,c===i.length-1)throw Go.getChecksumInstance()}}throw Go.getChecksumInstance()},e.createBarcodeMatrix=function(e){for(var t,n,r,o,a=Array.from({length:e.getBarcodeRowCount()},(function(){return new Array(e.getBarcodeColumnCount()+2)})),i=0;i<a.length;i++)for(var s=0;s<a[i].length;s++)a[i][s]=new Uc;var c=0;try{for(var l=al(e.getDetectionResultColumns()),u=l.next();!u.done;u=l.next()){var f=u.value;if(null!=f)try{for(var d=(r=void 0,al(f.getCodewords())),p=d.next();!p.done;p=d.next()){var h=p.value;if(null!=h){var m=h.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][c].setValue(h.getValue())}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}c++}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a},e.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},e.getStartColumn=function(t,n,r,o){var a,i,s=o?1:-1,c=null;if(e.isValidBarcodeColumn(t,n-s)&&(c=t.getDetectionResultColumn(n-s).getCodeword(r)),null!=c)return o?c.getEndX():c.getStartX();if(null!=(c=t.getDetectionResultColumn(n).getCodewordNearby(r)))return o?c.getStartX():c.getEndX();if(e.isValidBarcodeColumn(t,n-s)&&(c=t.getDetectionResultColumn(n-s).getCodewordNearby(r)),null!=c)return o?c.getEndX():c.getStartX();for(var l=0;e.isValidBarcodeColumn(t,n-s);){n-=s;try{for(var u=(a=void 0,al(t.getDetectionResultColumn(n).getCodewords())),f=u.next();!f.done;f=u.next()){var d=f.value;if(null!=d)return(o?d.getEndX():d.getStartX())+s*l*(d.getEndX()-d.getStartX())}}catch(e){a={error:e}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}l++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,n,r,o,a,i,s,c){a=e.adjustCodewordStartColumn(t,n,r,o,a,i);var l,u=e.getModuleBitCount(t,n,r,o,a,i);if(null==u)return null;var f=Xa.sum(u);if(o)l=a+f;else{for(var d=0;d<u.length/2;d++){var p=u[d];u[d]=u[u.length-1-d],u[u.length-1-d]=p}a=(l=a)-f}if(!e.checkCodewordSkew(f,s,c))return null;var h=Gc.getDecodedValue(u),m=kc.getCodeword(h);return-1===m?null:new zc(a,l,e.getCodewordBucketNumber(h),m)},e.getModuleBitCount=function(e,t,n,r,o,a){for(var i=o,s=new Int32Array(8),c=0,l=r?1:-1,u=r;(r?i<n:i>=t)&&c<s.length;)e.get(i,a)===u?(s[c]++,i+=l):(c++,u=!u);return c===s.length||i===(r?n:t)&&c===s.length-1?s:null},e.getNumberOfECCodeWords=function(e){return 2<<e},e.adjustCodewordStartColumn=function(t,n,r,o,a,i){for(var s=a,c=o?-1:1,l=0;l<2;l++){for(;(o?s>=n:s<r)&&o===t.get(s,i);){if(Math.abs(a-s)>e.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,o=!o}return s},e.checkCodewordSkew=function(t,n,r){return n-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,n,r){if(0===t.length)throw aa.getFormatInstance();var o=1<<n+1,a=e.correctErrors(t,r,o);e.verifyCodewordCount(t,o);var i=ol.decode(t,""+n);return i.setErrorsCorrected(a),i.setErasures(r.length),i},e.correctErrors=function(t,n,r){if(null!=n&&n.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw Go.getChecksumInstance();return e.errorCorrection.decode(t,r,n)},e.verifyCodewordCount=function(e,t){if(e.length<4)throw aa.getFormatInstance();var n=e[0];if(n>e.length)throw aa.getFormatInstance();if(0===n){if(!(t<e.length))throw aa.getFormatInstance();e[0]=e.length-t}},e.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,r=t.length-1;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t},e.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},e.toString=function(e){for(var t=new Bc,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var r=0;r<e[n].length;r++){var o=e[n][r];0===o.getValue().length?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new xc,e}(),sl=function(){function e(){}return e.prototype.decode=function(t,n){void 0===n&&(n=null);var r=e.decode(t,n,!1);if(null==r||0===r.length||null==r[0])throw ma.getNotFoundInstance();return r[0]},e.prototype.decodeMultiple=function(t,n){void 0===n&&(n=null);try{return e.decode(t,n,!0)}catch(e){if(e instanceof aa||e instanceof Go)throw ma.getNotFoundInstance();throw e}},e.decode=function(t,n,r){var o,a,i=new Array,s=Nc.detectMultiple(t,n,r);try{for(var c=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s.getPoints()),l=c.next();!l.done;l=c.next()){var u=l.value,f=il.decode(s.getBits(),u[4],u[5],u[6],u[7],e.getMinCodewordWidth(u),e.getMaxCodewordWidth(u)),d=new Na(f.getText(),f.getRawBytes(),void 0,u,Ia.PDF_417);d.putMetadata(Da.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();null!=p&&d.putMetadata(Da.PDF417_EXTRA_METADATA,p),i.push(d)}}catch(e){o={error:e}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}return i.map((function(e){return e}))},e.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMinWidth=function(e,t){return null==e||null==t?ea.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*kc.MODULES_IN_CODEWORD/kc.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*kc.MODULES_IN_CODEWORD/kc.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*kc.MODULES_IN_CODEWORD/kc.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*kc.MODULES_IN_CODEWORD/kc.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}(),cl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ll=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cl(t,e),t.kind="ReaderException",t}(Fo),ul=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fl=function(){function e(){}return e.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},e.prototype.decodeWithState=function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)},e.prototype.setHints=function(e){this.hints=e;var t=null!=e&&void 0!==e.get(ra.TRY_HARDER),n=null==e?null:e.get(ra.POSSIBLE_FORMATS),r=new Array;if(null!=n){var o=n.some((function(e){return e===Ia.UPC_A||e===Ia.UPC_E||e===Ia.EAN_13||e===Ia.EAN_8||e===Ia.CODABAR||e===Ia.CODE_39||e===Ia.CODE_93||e===Ia.CODE_128||e===Ia.ITF||e===Ia.RSS_14||e===Ia.RSS_EXPANDED}));o&&!t&&r.push(new Ms(e)),n.includes(Ia.QR_CODE)&&r.push(new Ac),n.includes(Ia.DATA_MATRIX)&&r.push(new Ys),n.includes(Ia.AZTEC)&&r.push(new si),n.includes(Ia.PDF_417)&&r.push(new sl),o&&t&&r.push(new Ms(e))}0===r.length&&(t||r.push(new Ms(e)),r.push(new Ac),r.push(new Ys),r.push(new si),r.push(new sl),t&&r.push(new Ms(e))),this.readers=r},e.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var n=ul(this.readers),r=n.next();!r.done;r=n.next())r.value.reset()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.decodeInternal=function(e){var t,n;if(null===this.readers)throw new ll("No readers where selected, nothing can be read.");try{for(var r=ul(this.readers),o=r.next();!o.done;o=r.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(e){if(e instanceof ll)continue}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new ma("No MultiFormat Readers were able to detect the code.")},e}(),dl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=500);var r=new fl;return r.setHints(t),e.call(this,r,n)||this}dl(t,e),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)}}(Pa);var pl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){pl((function(t){return void 0===t&&(t=500),e.call(this,new sl,t)||this}),e)}(Pa);var hl,ml=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){ml((function(t){return void 0===t&&(t=500),e.call(this,new Ac,t)||this}),e)}(Pa),function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(hl||(hl={}));var yl=hl,gl=function(){function e(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new La(e,Int32Array.from([1])))}return e.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],r=this.field,o=t.length;o<=e;o++){var a=n.multiply(new La(r,Int32Array.from([1,r.exp(o-1+r.getGeneratorBase())])));t.push(a),n=a}return t[e]},e.prototype.encode=function(e,t){if(0===t)throw new Ko("No error correction bytes");var n=e.length-t;if(n<=0)throw new Ko("No data bytes provided");var r=this.buildGenerator(t),o=new Int32Array(n);Jo.arraycopy(e,0,o,0,n);for(var a=new La(this.field,o),i=(a=a.multiplyByMonomial(t,1)).divide(r)[1].getCoefficients(),s=t-i.length,c=0;c<s;c++)e[n+c]=0;Jo.arraycopy(i,0,e,n+s,i.length)},e}(),vl=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),a=t.getHeight(),i=0;i<a-1;i++)for(var s=r[i],c=0;c<o-1;c++){var l=s[c];l===s[c+1]&&l===r[i+1][c]&&l===r[i+1][c+1]&&n++}return e.N2*n},e.applyMaskPenaltyRule3=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),a=t.getHeight(),i=0;i<a;i++)for(var s=0;s<o;s++){var c=r[i];s+6<o&&1===c[s]&&0===c[s+1]&&1===c[s+2]&&1===c[s+3]&&1===c[s+4]&&0===c[s+5]&&1===c[s+6]&&(e.isWhiteHorizontal(c,s-4,s)||e.isWhiteHorizontal(c,s+7,s+11))&&n++,i+6<a&&1===r[i][s]&&0===r[i+1][s]&&1===r[i+2][s]&&1===r[i+3][s]&&1===r[i+4][s]&&0===r[i+5][s]&&1===r[i+6][s]&&(e.isWhiteVertical(r,s,i-4,i)||e.isWhiteVertical(r,s,i+7,i+11))&&n++}return n*e.N3},e.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var r=t;r<n;r++)if(1===e[r])return!1;return!0},e.isWhiteVertical=function(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var o=n;o<r;o++)if(1===e[o][t])return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),a=t.getHeight(),i=0;i<a;i++)for(var s=r[i],c=0;c<o;c++)1===s[c]&&n++;var l=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-l)/l)*e.N4},e.getDataMaskBit=function(e,t,n){var r,o;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(o=n*t))+o%3;break;case 6:r=(1&(o=n*t))+o%3&1;break;case 7:r=(o=n*t)%3+(n+t&1)&1;break;default:throw new Ko("Invalid mask pattern: "+e)}return 0===r},e.applyMaskPenaltyRule1Internal=function(t,n){for(var r=0,o=n?t.getHeight():t.getWidth(),a=n?t.getWidth():t.getHeight(),i=t.getArray(),s=0;s<o;s++){for(var c=0,l=-1,u=0;u<a;u++){var f=n?i[s][u]:i[u][s];f===l?c++:(c>=5&&(r+=e.N1+(c-5)),c=1,l=f)}c>=5&&(r+=e.N1+(c-5))}return r},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}(),bl=function(){function e(e,t){this.width=e,this.height=t;for(var n=new Array(t),r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(e,t){return this.bytes[t][e]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},e.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},e.prototype.clear=function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),o=r.next();!o.done;o=r.next()){var a=o.value;$o.fill(a,e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.width!==n.width)return!1;if(this.height!==n.height)return!1;for(var r=0,o=this.height;r<o;++r)for(var a=this.bytes[r],i=n.bytes[r],s=0,c=this.width;s<c;++s)if(a[s]!==i[s])return!1;return!0},e.prototype.toString=function(){for(var e=new da,t=0,n=this.height;t<n;++t){for(var r=this.bytes[t],o=0,a=this.width;o<a;++o)switch(r[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},e}(),wl=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var e=new da;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},e.prototype.setMode=function(e){this.mode=e},e.prototype.setECLevel=function(e){this.ecLevel=e},e.prototype.setVersion=function(e){this.version=e},e.prototype.setMaskPattern=function(e){this.maskPattern=e},e.prototype.setMatrix=function(e){this.matrix=e},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}(),El=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return El(t,e),t.kind="WriterException",t}(Fo),Cl=function(){function e(){}return e.clearMatrix=function(e){e.clear(255)},e.buildMatrix=function(t,n,r,o,a){e.clearMatrix(a),e.embedBasicPatterns(r,a),e.embedTypeInfo(n,o,a),e.maybeEmbedVersionInfo(r,a),e.embedDataBits(t,o,a)},e.embedBasicPatterns=function(t,n){e.embedPositionDetectionPatternsAndSeparators(n),e.embedDarkDotAtLeftBottomCorner(n),e.maybeEmbedPositionAdjustmentPatterns(t,n),e.embedTimingPatterns(n)},e.embedTypeInfo=function(t,n,r){var o=new ta;e.makeTypeInfoBits(t,n,o);for(var a=0,i=o.getSize();a<i;++a){var s=o.get(o.getSize()-1-a),c=e.TYPE_INFO_COORDINATES[a],l=c[0],u=c[1];if(r.setBoolean(l,u,s),a<8){var f=r.getWidth()-a-1,d=8;r.setBoolean(f,d,s)}else f=8,d=r.getHeight()-7+(a-8),r.setBoolean(f,d,s)}},e.maybeEmbedVersionInfo=function(t,n){if(!(t.getVersionNumber()<7)){var r=new ta;e.makeVersionInfoBits(t,r);for(var o=17,a=0;a<6;++a)for(var i=0;i<3;++i){var s=r.get(o);o--,n.setBoolean(a,n.getHeight()-11+i,s),n.setBoolean(n.getHeight()-11+i,a,s)}}},e.embedDataBits=function(t,n,r){for(var o=0,a=-1,i=r.getWidth()-1,s=r.getHeight()-1;i>0;){for(6===i&&(i-=1);s>=0&&s<r.getHeight();){for(var c=0;c<2;++c){var l=i-c;if(e.isEmpty(r.get(l,s))){var u=void 0;o<t.getSize()?(u=t.get(o),++o):u=!1,255!==n&&vl.getDataMaskBit(n,l,s)&&(u=!u),r.setBoolean(l,s,u)}}s+=a}s+=a=-a,i-=2}if(o!==t.getSize())throw new Sl("Not all bits consumed: "+o+"/"+t.getSize())},e.findMSBSet=function(e){return 32-ea.numberOfLeadingZeros(e)},e.calculateBCHCode=function(t,n){if(0===n)throw new Ko("0 polynomial");var r=e.findMSBSet(n);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=n<<e.findMSBSet(t)-r;return t},e.makeTypeInfoBits=function(t,n,r){if(!wl.isValidMaskPattern(n))throw new Sl("Invalid mask pattern");var o=t.getBits()<<3|n;r.appendBits(o,5);var a=e.calculateBCHCode(o,e.TYPE_INFO_POLY);r.appendBits(a,10);var i=new ta;if(i.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(i),15!==r.getSize())throw new Sl("should not happen but we got: "+r.getSize())},e.makeVersionInfoBits=function(t,n){n.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(n.appendBits(r,12),18!==n.getSize())throw new Sl("should not happen but we got: "+n.getSize())},e.isEmpty=function(e){return 255===e},e.embedTimingPatterns=function(t){for(var n=8;n<t.getWidth()-8;++n){var r=(n+1)%2;e.isEmpty(t.get(n,6))&&t.setNumber(n,6,r),e.isEmpty(t.get(6,n))&&t.setNumber(6,n,r)}},e.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new Sl;e.setNumber(8,e.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,n,r){for(var o=0;o<8;++o){if(!e.isEmpty(r.get(t+o,n)))throw new Sl;r.setNumber(t+o,n,0)}},e.embedVerticalSeparationPattern=function(t,n,r){for(var o=0;o<7;++o){if(!e.isEmpty(r.get(t,n+o)))throw new Sl;r.setNumber(t,n+o,0)}},e.embedPositionAdjustmentPattern=function(t,n,r){for(var o=0;o<5;++o)for(var a=e.POSITION_ADJUSTMENT_PATTERN[o],i=0;i<5;++i)r.setNumber(t+i,n+o,a[i])},e.embedPositionDetectionPattern=function(t,n,r){for(var o=0;o<7;++o)for(var a=e.POSITION_DETECTION_PATTERN[o],i=0;i<7;++i)r.setNumber(t+i,n+o,a[i])},e.embedPositionDetectionPatternsAndSeparators=function(t){var n=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-n,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-n,t),e.embedHorizontalSeparationPattern(0,7,t),e.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),e.embedVerticalSeparationPattern(7,0,t),e.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),e.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,n){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,o=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,i=o.length;a!==i;a++){var s=o[a];if(s>=0)for(var c=0;c!==i;c++){var l=o[c];l>=0&&e.isEmpty(n.get(l,s))&&e.embedPositionAdjustmentPattern(l-2,s-2,n)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e}(),_l=function(){function e(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e}(),Al=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(){function e(){}e.calculateMaskPenalty=function(e){return vl.applyMaskPenaltyRule1(e)+vl.applyMaskPenaltyRule2(e)+vl.applyMaskPenaltyRule3(e)+vl.applyMaskPenaltyRule4(e)},e.encode=function(t,n,r){void 0===r&&(r=null);var o=e.DEFAULT_BYTE_MODE_ENCODING,a=null!==r&&void 0!==r.get(yl.CHARACTER_SET);a&&(o=r.get(yl.CHARACTER_SET).toString());var i=this.chooseMode(t,o),s=new ta;if(i===fc.BYTE&&(a||e.DEFAULT_BYTE_MODE_ENCODING!==o)){var c=sa.getCharacterSetECIByName(o);void 0!==c&&this.appendECI(c,s)}this.appendModeInfo(i,s);var l,u=new ta;if(this.appendBytes(t,i,u,o),null!==r&&void 0!==r.get(yl.QR_VERSION)){var f=Number.parseInt(r.get(yl.QR_VERSION).toString(),10);l=rc.getVersionForNumber(f);var d=this.calculateBitsNeeded(i,s,u,l);if(!this.willFit(d,l,n))throw new Sl("Data too big for requested version")}else l=this.recommendVersion(n,i,s,u);var p=new ta;p.appendBitArray(s);var h=i===fc.BYTE?u.getSizeInBytes():t.length;this.appendLengthInfo(h,l,i,p),p.appendBitArray(u);var m=l.getECBlocksForLevel(n),y=l.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(y,p);var g=this.interleaveWithECBytes(p,l.getTotalCodewords(),y,m.getNumBlocks()),v=new wl;v.setECLevel(n),v.setMode(i),v.setVersion(l);var b=l.getDimensionForVersion(),w=new bl(b,b),E=this.chooseMaskPattern(g,n,l,w);return v.setMaskPattern(E),Cl.buildMatrix(g,n,l,E,w),v.setMatrix(w),v},e.recommendVersion=function(e,t,n,r){var o=this.calculateBitsNeeded(t,n,r,rc.getVersionForNumber(1)),a=this.chooseVersion(o,e),i=this.calculateBitsNeeded(t,n,r,a);return this.chooseVersion(i,e)},e.calculateBitsNeeded=function(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,n){if(void 0===n&&(n=null),sa.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(t))return fc.KANJI;for(var r=!1,o=!1,a=0,i=t.length;a<i;++a){var s=t.charAt(a);if(e.isDigit(s))r=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return fc.BYTE;o=!0}}return o?fc.ALPHANUMERIC:r?fc.NUMERIC:fc.BYTE},e.isOnlyDoubleByteKanji=function(e){var t;try{t=ua.encode(e,sa.SJIS)}catch(e){return!1}var n=t.length;if(n%2!=0)return!1;for(var r=0;r<n;r+=2){var o=255&t[r];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},e.chooseMaskPattern=function(e,t,n,r){for(var o=Number.MAX_SAFE_INTEGER,a=-1,i=0;i<wl.NUM_MASK_PATTERNS;i++){Cl.buildMatrix(e,t,n,i,r);var s=this.calculateMaskPenalty(r);s<o&&(o=s,a=i)}return a},e.chooseVersion=function(t,n){for(var r=1;r<=40;r++){var o=rc.getVersionForNumber(r);if(e.willFit(t,o,n))return o}throw new Sl("Data too big")},e.willFit=function(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8},e.terminateBits=function(e,t){var n=8*e;if(t.getSize()>n)throw new Sl("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var r=0;r<4&&t.getSize()<n;++r)t.appendBit(!1);var o=7&t.getSize();if(o>0)for(r=o;r<8;r++)t.appendBit(!1);var a=e-t.getSizeInBytes();for(r=0;r<a;++r)t.appendBits(0==(1&r)?236:17,8);if(t.getSize()!==n)throw new Sl("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,r,o,a){if(r>=n)throw new Sl("Block ID too large");var i=e%n,s=n-i,c=Math.floor(e/n),l=c+1,u=Math.floor(t/n),f=u+1,d=c-u,p=l-f;if(d!==p)throw new Sl("EC bytes mismatch");if(n!==s+i)throw new Sl("RS blocks mismatch");if(e!==(u+d)*s+(f+p)*i)throw new Sl("Total bytes mismatch");r<s?(o[0]=u,a[0]=d):(o[0]=f,a[0]=p)},e.interleaveWithECBytes=function(t,n,r,o){var a,i,s,c;if(t.getSizeInBytes()!==r)throw new Sl("Number of bits and data bytes does not match");for(var l=0,u=0,f=0,d=new Array,p=0;p<o;++p){var h=new Int32Array(1),m=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(n,r,o,p,h,m);var y=h[0],g=new Uint8Array(y);t.toBytes(8*l,g,0,y);var v=e.generateECBytes(g,m[0]);d.push(new _l(g,v)),u=Math.max(u,y),f=Math.max(f,v.length),l+=h[0]}if(r!==l)throw new Sl("Data bytes does not match offset");var b=new ta;for(p=0;p<u;++p)try{for(var w=(a=void 0,Al(d)),E=w.next();!E.done;E=w.next())p<(g=E.value.getDataBytes()).length&&b.appendBits(g[p],8)}catch(e){a={error:e}}finally{try{E&&!E.done&&(i=w.return)&&i.call(w)}finally{if(a)throw a.error}}for(p=0;p<f;++p)try{for(var S=(s=void 0,Al(d)),C=S.next();!C.done;C=S.next())p<(v=C.value.getErrorCorrectionBytes()).length&&b.appendBits(v[p],8)}catch(e){s={error:e}}finally{try{C&&!C.done&&(c=S.return)&&c.call(S)}finally{if(s)throw s.error}}if(n!==b.getSizeInBytes())throw new Sl("Interleaving error: "+n+" and "+b.getSizeInBytes()+" differ.");return b},e.generateECBytes=function(e,t){for(var n=e.length,r=new Int32Array(n+t),o=0;o<n;o++)r[o]=255&e[o];new gl(Ua.QR_CODE_FIELD_256).encode(r,t);var a=new Uint8Array(t);for(o=0;o<t;o++)a[o]=r[n+o];return a},e.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},e.appendLengthInfo=function(e,t,n,r){var o=n.getCharacterCountBits(t);if(e>=1<<o)throw new Sl(e+" is bigger than "+((1<<o)-1));r.appendBits(e,o)},e.appendBytes=function(t,n,r,o){switch(n){case fc.NUMERIC:e.appendNumericBytes(t,r);break;case fc.ALPHANUMERIC:e.appendAlphanumericBytes(t,r);break;case fc.BYTE:e.append8BitBytes(t,r,o);break;case fc.KANJI:e.appendKanjiBytes(t,r);break;default:throw new Sl("Invalid mode: "+n)}},e.getDigit=function(e){return e.charCodeAt(0)-48},e.isDigit=function(t){var n=e.getDigit(t);return n>=0&&n<=9},e.appendNumericBytes=function(t,n){for(var r=t.length,o=0;o<r;){var a=e.getDigit(t.charAt(o));if(o+2<r){var i=e.getDigit(t.charAt(o+1)),s=e.getDigit(t.charAt(o+2));n.appendBits(100*a+10*i+s,10),o+=3}else o+1<r?(i=e.getDigit(t.charAt(o+1)),n.appendBits(10*a+i,7),o+=2):(n.appendBits(a,4),o++)}},e.appendAlphanumericBytes=function(t,n){for(var r=t.length,o=0;o<r;){var a=e.getAlphanumericCode(t.charCodeAt(o));if(-1===a)throw new Sl;if(o+1<r){var i=e.getAlphanumericCode(t.charCodeAt(o+1));if(-1===i)throw new Sl;n.appendBits(45*a+i,11),o+=2}else n.appendBits(a,6),o++}},e.append8BitBytes=function(e,t,n){var r;try{r=ua.encode(e,n)}catch(e){throw new Sl(e)}for(var o=0,a=r.length;o!==a;o++){var i=r[o];t.appendBits(i,8)}},e.appendKanjiBytes=function(e,t){var n;try{n=ua.encode(e,sa.SJIS)}catch(e){throw new Sl(e)}for(var r=n.length,o=0;o<r;o+=2){var a=(255&n[o])<<8&4294967295|255&n[o+1],i=-1;if(a>=33088&&a<=40956?i=a-33088:a>=57408&&a<=60351&&(i=a-49472),-1===i)throw new Sl("Invalid byte sequence");var s=192*(i>>8)+(255&i);t.appendBits(s,13)}},e.appendECI=function(e,t){t.appendBits(fc.ECI.getBits(),4),t.appendBits(e.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=sa.UTF8.getName()}();var kl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,a,i,s,c){var l=e.call(this,i,s)||this;if(l.yuvData=t,l.dataWidth=n,l.dataHeight=r,l.left=o,l.top=a,o+i>n||a+s>r)throw new Ko("Crop rectangle does not fit within image data.");return c&&l.reverseHorizontal(i,s),l}kl(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Ko("Requested row is outside the image: "+e);var n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return Jo.arraycopy(this.yuvData,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Jo.arraycopy(this.yuvData,o,r,0,n),r;for(var a=0;a<t;a++){var i=a*e;Jo.arraycopy(this.yuvData,o,r,i,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,o,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),o=this.yuvData,a=this.top*this.dataWidth+this.left,i=0;i<n;i++){for(var s=i*e,c=0;c<e;c++){var l=255&o[a+c*t.THUMBNAIL_SCALE_FACTOR];r[s+c]=4278190080|65793*l}a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return r},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,t){for(var n=this.yuvData,r=0,o=this.top*this.dataWidth+this.left;r<t;r++,o+=this.dataWidth)for(var a=o+e/2,i=o,s=o+e-1;i<a;i++,s--){var c=n[i];n[i]=n[s],n[s]=c}},t.prototype.invert=function(){return new Sa(this)},t.THUMBNAIL_SCALE_FACTOR=2}(wa);var Ol=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,a,i,s){var c=e.call(this,n,r)||this;if(c.dataWidth=o,c.dataHeight=a,c.left=i,c.top=s,4===t.BYTES_PER_ELEMENT){for(var l=n*r,u=new Uint8ClampedArray(l),f=0;f<l;f++){var d=t[f],p=d>>16&255,h=d>>7&510,m=255&d;u[f]=(p+h+m)/4&255}c.luminances=u}else c.luminances=t;if(void 0===o&&(c.dataWidth=n),void 0===a&&(c.dataHeight=r),void 0===i&&(c.left=0),void 0===s&&(c.top=0),c.left+n>c.dataWidth||c.top+r>c.dataHeight)throw new Ko("Crop rectangle does not fit within image data.");return c}Ol(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Ko("Requested row is outside the image: "+e);var n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return Jo.arraycopy(this.luminances,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Jo.arraycopy(this.luminances,o,r,0,n),r;for(var a=0;a<t;a++){var i=a*e;Jo.arraycopy(this.luminances,o,r,i,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.luminances,r,o,this.dataWidth,this.dataHeight,this.left+e,this.top+n)},t.prototype.invert=function(){return new Sa(this)}}(wa);var Pl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Pl(t,e),t.forName=function(e){return this.getCharacterSetECIByName(e)}}(sa);var Nl=function(){function e(e){this.previous=e}return e.prototype.getPrevious=function(){return this.previous},e}(),Tl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Il=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.value=n,o.bitCount=r,o}return Tl(t,e),t.prototype.appendTo=function(e,t){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,n){return new t(this,e,n)},t.prototype.addBinaryShift=function(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,n)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ea.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(Nl),Rl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r){var o=e.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=r,o}Rl(t,e),t.prototype.appendTo=function(e,t){for(var n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)},t.prototype.addBinaryShift=function(e,n){return new t(this,e,n)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}(Il),new Il(null,0,0),function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=r.next();!o.done;o=r.next()){var a=o.value;$o.fill(a,-1)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15}($o.createInt32Array(6,6)),function(e){var t=fa.getCharCode(" "),n=fa.getCharCode("."),r=fa.getCharCode(",");e[0][t]=1;for(var o=fa.getCharCode("Z"),a=fa.getCharCode("A"),i=a;i<=o;i++)e[0][i]=i-a+2;e[1][t]=1;var s=fa.getCharCode("z"),c=fa.getCharCode("a");for(i=c;i<=s;i++)e[1][i]=i-c+2;e[2][t]=1;var l=fa.getCharCode("9"),u=fa.getCharCode("0");for(i=u;i<=l;i++)e[2][i]=i-u+2;e[2][r]=12,e[2][n]=13;for(var f=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""],d=0;d<f.length;d++)e[3][fa.getCharCode(f[d])]=d;var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(d=0;d<p.length;d++)fa.getCharCode(p[d])>0&&(e[4][fa.getCharCode(p[d])]=d)}($o.createInt32Array(5,256));var Dl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xl=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.buffer=t.makeBufferFromCanvasImageData(n),r}return Dl(t,e),t.makeBufferFromCanvasImageData=function(e){var n=e.getContext("2d");if(!n)throw new Error("Couldn't get canvas context.");var r=n.getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(r.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,n){for(var r=new Uint8ClampedArray(t*n),o=0,a=0,i=e.length;o<i;o+=4,a++){var s;s=0===e[o+3]?255:306*e[o]+601*e[o+1]+117*e[o+2]+512>>10,r[a]=s}return r},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Ko("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,o){return e.prototype.crop.call(this,t,n,r,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.invert=function(){return new Sa(this)},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var r=e*t.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,i=Math.ceil(Math.abs(Math.cos(r))*o+Math.abs(Math.sin(r))*a),s=Math.ceil(Math.abs(Math.sin(r))*o+Math.abs(Math.cos(r))*a);n.width=i,n.height=s;var c=n.getContext("2d");if(!c)throw new Error("Could not create a Convas Context element.");return c.translate(i/2,s/2),c.rotate(r),c.drawImage(this.canvas,o/-2,a/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.DEGREE_TO_RADIANS=Math.PI/180,t}(wa);function Ml(){return"undefined"!=typeof navigator}var Ll=function(){return Ll=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ll.apply(this,arguments)},Bl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},jl=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Fl=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ul={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Hl=function(){function e(e,t,n){void 0===t&&(t=new Map),void 0===n&&(n={}),this.reader=e,this.hints=t,this.options=Ll(Ll({},Ul),n)}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(e){this.hints.set(ra.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),e.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.mediaStreamSetTorch=function(e,t){return Bl(this,void 0,void 0,(function(){return jl(this,(function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}}))}))},e.mediaStreamIsTorchCompatible=function(t){var n,r,o=t.getVideoTracks();try{for(var a=Fl(o),i=a.next();!i.done;i=a.next()){var s=i.value;if(e.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!1},e.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(e){return console.error(e),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},e.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},e.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Ho("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Ho("element with id '"+e+"' must be an "+t+" element");return n},e.createVideoElement=function(t){if(t instanceof HTMLVideoElement)return t;if("string"==typeof t)return e.getMediaElement(t,"video");if(!t&&"undefined"!=typeof document){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},e.prepareImageElement=function(t){if(t instanceof HTMLImageElement)return t;if("string"==typeof t)return e.getMediaElement(t,"img");if(void 0===t){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},e.prepareVideoElement=function(t){var n=e.createVideoElement(t);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},e.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.createBinaryBitmapFromCanvas=function(e){var t=new xl(e),n=new ba(t);return new Wo(n)},e.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},e.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimentions!")},e.createCaptureCanvas=function(t){if(!t)throw new Ho("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),r=e.getMediaElementDimensions(t),o=r.width,a=r.height;return n.style.width=o+"px",n.style.height=a+"px",n.width=o,n.height=a,n},e.tryPlayVideo=function(t){return Bl(this,void 0,void 0,(function(){var n;return jl(this,(function(r){switch(r.label){case 0:if(null==t?void 0:t.ended)return console.error("Trying to play video that has ended."),[2,!1];if(e.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}}))}))},e.createCanvasFromMediaElement=function(t){var n=e.createCaptureCanvas(t),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return e.drawImageOnCanvas(r,t),n},e.createBinaryBitmapFromMediaElem=function(t){var n=e.createCanvasFromMediaElement(t);return e.createBinaryBitmapFromCanvas(n)},e.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},e.listVideoInputDevices=function(){return Bl(this,void 0,void 0,(function(){var e,t,n,r,o,a,i,s,c,l,u,f;return jl(this,(function(d){switch(d.label){case 0:if(!Ml())throw new Error("Can't enumerate devices, navigator is not present.");if(!(Ml()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices))throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=d.sent(),t=[];try{for(n=Fl(e),r=n.next();!r.done;r=n.next())o=r.value,"videoinput"===(a="video"===o.kind?"videoinput":o.kind)&&(i=o.deviceId||o.id,s=o.label||"Video device "+(t.length+1),c=o.groupId,l={deviceId:i,label:s,kind:a,groupId:c},t.push(l))}catch(e){u={error:e}}finally{try{r&&!r.done&&(f=n.return)&&f.call(n)}finally{if(u)throw u.error}}return[2,t]}}))}))},e.findDeviceById=function(t){return Bl(this,void 0,void 0,(function(){var n;return jl(this,(function(r){switch(r.label){case 0:return[4,e.listVideoInputDevices()];case 1:return(n=r.sent())?[2,n.find((function(e){return e.deviceId===t}))]:[2]}}))}))},e.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch(t){e.src=""}e&&e.removeAttribute("src")}},e.playVideoOnLoadAsync=function(t,n){return Bl(this,void 0,void 0,(function(){return jl(this,(function(r){switch(r.label){case 0:return[4,e.tryPlayVideo(t)];case 1:return r.sent()?[2,!0]:[2,new Promise((function(r,o){var a=setTimeout((function(){e.isVideoPlaying(t)||(o(!1),t.removeEventListener("canplay",i))}),n),i=function(){e.tryPlayVideo(t).then((function(e){clearTimeout(a),t.removeEventListener("canplay",i),r(e)}))};t.addEventListener("canplay",i)}))]}}))}))},e.attachStreamToVideo=function(t,n,r){return void 0===r&&(r=5e3),Bl(this,void 0,void 0,(function(){var o;return jl(this,(function(a){switch(a.label){case 0:return o=e.prepareVideoElement(n),e.addVideoSource(o,t),[4,e.playVideoOnLoadAsync(o,r)];case 1:return a.sent(),[2,o]}}))}))},e._waitImageLoad=function(t){return new Promise((function(n,r){var o=setTimeout((function(){e.isImageLoaded(t)||(t.removeEventListener("load",a),r())}),1e4),a=function(){clearTimeout(o),t.removeEventListener("load",a),n()};t.addEventListener("load",a)}))},e.checkCallbackFnOrThrow=function(e){if(!e)throw new Ho("`callbackFn` is a required parameter, you cannot capture results without it.")},e.disposeMediaStream=function(e){e.getVideoTracks().forEach((function(e){return e.stop()})),e=void 0},e.prototype.decode=function(t){var n=e.createCanvasFromMediaElement(t);return this.decodeFromCanvas(n)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},e.prototype.decodeFromCanvas=function(t){var n=e.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(n)},e.prototype.decodeFromImageElement=function(t){return Bl(this,void 0,void 0,(function(){var n;return jl(this,(function(r){switch(r.label){case 0:if(!t)throw new Ho("An image element must be provided.");return n=e.prepareImageElement(t),[4,this._decodeOnLoadImage(n)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeFromImageUrl=function(t){return Bl(this,void 0,void 0,(function(){var n;return jl(this,(function(r){switch(r.label){case 0:if(!t)throw new Ho("An URL must be provided.");(n=e.prepareImageElement()).src=t,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,r.sent()];case 3:return e.destroyImageElement(n),[7];case 4:return[2]}}))}))},e.prototype.decodeFromConstraints=function(t,n,r){return Bl(this,void 0,void 0,(function(){var o,a;return jl(this,(function(i){switch(i.label){case 0:return e.checkCallbackFnOrThrow(r),[4,navigator.mediaDevices.getUserMedia(t)];case 1:o=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(o,n,r)];case 3:return[2,i.sent()];case 4:throw a=i.sent(),e.disposeMediaStream(o),a;case 5:return[2]}}))}))},e.prototype.decodeFromStream=function(t,n,r){return Bl(this,void 0,void 0,(function(){var o,a,i,s,c,l,u,f,d,p,h=this;return jl(this,(function(m){switch(m.label){case 0:return e.checkCallbackFnOrThrow(r),o=this.options.tryPlayVideoTimeout,[4,e.attachStreamToVideo(t,n,o)];case 1:return a=m.sent(),i=function(){var e,n;try{for(var r=Fl(t.getVideoTracks()),o=r.next();!o.done;o=r.next())o.value.stop()}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t=void 0},s=function(){i(),e.cleanVideoSource(a)},c=this.scan(a,r,s),l=t.getVideoTracks(),u=Ll(Ll({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(e,t){return Bl(this,void 0,void 0,(function(){var n,r,o,a,i,s;return jl(this,(function(c){switch(c.label){case 0:n=t?l.filter(t):l,c.label=1;case 1:c.trys.push([1,6,7,8]),r=Fl(n),o=r.next(),c.label=2;case 2:return o.done?[3,5]:[4,o.value.applyConstraints(e)];case 3:c.sent(),c.label=4;case 4:return o=r.next(),[3,2];case 5:return[3,8];case 6:return a=c.sent(),i={error:a},[3,8];case 7:try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(i)throw i.error}return[7];case 8:return[2]}}))}))},streamVideoConstraintsGet:function(e){return l.find(e).getConstraints()},streamVideoSettingsGet:function(e){return l.find(e).getSettings()},streamVideoCapabilitiesGet:function(e){return l.find(e).getCapabilities()}}),e.mediaStreamIsTorchCompatible(t)&&(f=null==l?void 0:l.find((function(t){return e.mediaStreamIsTorchCompatibleTrack(t)})),d=function(t){return Bl(h,void 0,void 0,(function(){return jl(this,(function(n){switch(n.label){case 0:return[4,e.mediaStreamSetTorch(f,t)];case 1:return n.sent(),[2]}}))}))},u.switchTorch=d,p=function(){c.stop(),d(!1)},u.stop=p),[2,u]}}))}))},e.prototype.decodeFromVideoDevice=function(t,n,r){return Bl(this,void 0,void 0,(function(){var o;return jl(this,(function(a){switch(a.label){case 0:return e.checkCallbackFnOrThrow(r),o={video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,a.sent()]}}))}))},e.prototype.decodeFromVideoElement=function(t,n){return Bl(this,void 0,void 0,(function(){var r,o;return jl(this,(function(a){switch(a.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new Ho("A video element must be provided.");return r=e.prepareVideoElement(t),o=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),[2,this.scan(r,n)]}}))}))},e.prototype.decodeFromVideoUrl=function(t,n){return Bl(this,void 0,void 0,(function(){var r,o,a;return jl(this,(function(i){switch(i.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new Ho("An URL must be provided.");return(r=e.prepareVideoElement()).src=t,o=function(){e.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,a)];case 1:return i.sent(),[2,this.scan(r,n,o)]}}))}))},e.prototype.decodeOnceFromConstraints=function(e,t){return Bl(this,void 0,void 0,(function(){var n;return jl(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromStream=function(t,n){return Bl(this,void 0,void 0,(function(){var r,o;return jl(this,(function(a){switch(a.label){case 0:return r=Boolean(n),[4,e.attachStreamToVideo(t,n)];case 1:o=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(o)];case 3:return[2,a.sent()];case 4:return r||e.cleanVideoSource(o),[7];case 5:return[2]}}))}))},e.prototype.decodeOnceFromVideoDevice=function(e,t){return Bl(this,void 0,void 0,(function(){var n;return jl(this,(function(r){switch(r.label){case 0:return n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromVideoElement=function(t){return Bl(this,void 0,void 0,(function(){var n,r;return jl(this,(function(o){switch(o.label){case 0:if(!t)throw new Ho("A video element must be provided.");return n=e.prepareVideoElement(t),r=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,r)];case 1:return o.sent(),[4,this.scanOneResult(n)];case 2:return[2,o.sent()]}}))}))},e.prototype.decodeOnceFromVideoUrl=function(t){return Bl(this,void 0,void 0,(function(){var n,r;return jl(this,(function(o){switch(o.label){case 0:if(!t)throw new Ho("An URL must be provided.");(n=e.prepareVideoElement()).src=t,r=this.decodeOnceFromVideoElement(n),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,r];case 2:return[2,o.sent()];case 3:return e.cleanVideoSource(n),[7];case 4:return[2]}}))}))},e.prototype.scanOneResult=function(e,t,n,r){var o=this;return void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),new Promise((function(a,i){o.scan(e,(function(e,o,s){if(e)return a(e),void s.stop();if(o){if(o instanceof ma&&t)return;if(o instanceof Go&&n)return;if(o instanceof aa&&r)return;s.stop(),i(o)}}))}))},e.prototype.scan=function(t,n,r){var o=this;e.checkCallbackFnOrThrow(n);var a=e.createCaptureCanvas(t),i=a.getContext("2d");if(!i)throw new Error("Couldn't create canvas for visual element scan.");var s,c=function(){i=void 0,a=void 0},l=!1,u={stop:function(){l=!0,clearTimeout(s),c(),r&&r()}},f=function(){if(!l)try{e.drawImageOnCanvas(i,t);var d=o.decodeFromCanvas(a);n(d,void 0,u),s=setTimeout(f,o.options.delayBetweenScanSuccess)}catch(e){if(n(void 0,e,u),e instanceof Go||e instanceof aa||e instanceof ma)return void(s=setTimeout(f,o.options.delayBetweenScanAttempts));c(),r&&r(e)}};return f(),u},e.prototype._decodeOnLoadImage=function(t){return Bl(this,void 0,void 0,(function(){return jl(this,(function(n){switch(n.label){case 0:return e.isImageLoaded(t)?[3,2]:[4,e._waitImageLoad(t)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(t)]}}))}))},e}(),Vl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Vl((function(t,n){return e.call(this,new si,t,n)||this}),e)}(Hl);var Kl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Kl((function(t,n){return e.call(this,new Ms(t),t,n)||this}),e)}(Hl);var Wl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Wl((function(t,n){return e.call(this,new Ys,t,n)||this}),e)}(Hl);var zl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n){var r=this,o=new fl;return o.setHints(t),(r=e.call(this,o,t,n)||this).reader=o,r}zl(t,e),Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(ra.POSSIBLE_FORMATS,e),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t.prototype.setHints=function(e){this.hints=e,this.reader.setHints(this.hints)}}(Hl);var Gl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Gl((function(t,n){return e.call(this,new sl,t,n)||this}),e)}(Hl);var Xl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jl=function(e){function t(t,n){return e.call(this,new Ac,t,n)||this}return Xl(t,e),t}(Hl),ql=function(e,t,n){var r=typeof e===n;return r||console.warn('[ReactQrReader]: Expected "'.concat(t,'" to be a of type "').concat(n,'".')),r},Yl=function(){return Yl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yl.apply(this,arguments)},Ql={width:"100%",paddingTop:"100%",overflow:"hidden",position:"relative"},Zl={top:0,left:0,width:"100%",height:"100%",display:"block",overflow:"hidden",position:"absolute",transform:void 0},$l=function(e){var t=e.videoContainerStyle,n=e.containerStyle,o=e.videoStyle,a=e.constraints,i=e.ViewFinder,s=e.scanDelay,c=e.className,l=e.onResult,u=e.videoId;return function(e){var t=e.scanDelay,n=e.constraints,o=e.onResult,a=e.videoId,i=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=new Jl(null,{delayBetweenScanAttempts:t});return!function(){var e="undefined"!=typeof navigator&&!!navigator.mediaDevices;return e||console.warn('[ReactQrReader]: MediaDevices API has no support for your browser. You can fix this by running "npm i webrtc-adapter"'),e}()&&ql(o,"onResult","function")&&o(null,new Error('MediaDevices API has no support for your browser. You can fix this by running "npm i webrtc-adapter"'),e),ql(n,"constraints","object")&&e.decodeFromConstraints({video:n},a,(function(t,n){ql(o,"onResult","function")&&o(t,n,e)})).then((function(e){return i.current=e})).catch((function(t){ql(o,"onResult","function")&&o(null,t,e)})),function(){var e;null===(e=i.current)||void 0===e||e.stop()}}),[])}({constraints:a,scanDelay:s,onResult:l,videoId:u}),r.createElement("section",{className:c,style:n},r.createElement("div",{style:Yl(Yl({},Ql),t)},!!i&&r.createElement(i,null),r.createElement("video",{muted:!0,id:u,style:Yl(Yl(Yl({},Zl),o),{transform:"user"===(null==a?void 0:a.facingMode)&&"scaleX(-1)"})})))};$l.displayName="QrReader",$l.defaultProps={constraints:{facingMode:"user"},videoId:"video",scanDelay:500};var eu=n(192),tu=n.n(eu);function nu(e){return nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(e)}function ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==nu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==nu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===nu(o)?o:String(o)),r)}var o}function ou(e,t){return ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ou(e,t)}function au(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iu(e){return iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iu(e)}var su=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ou(e,t)}(s,e);var t,n,o,a,i=(o=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=iu(o);if(a){var n=iu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===nu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return au(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).state={config:e.config,safe:e.safe,content:e.content,id:e.id,name:e.name,exportSafeWithSecurity:!1,exportSecurityType:"password",pwdScore:-1,password:"",confirmPassword:"",prefixPassword:"",confirmPrefixPassword:"",exportInvalid:!1,exportJwk:"",qrCode:!1},t.toggleExportSafeWithSecurity=t.toggleExportSafeWithSecurity.bind(au(t)),t.changeExportSecurityType=t.changeExportSecurityType.bind(au(t)),t.changePassword=t.changePassword.bind(au(t)),t.changeConfirmPassword=t.changeConfirmPassword.bind(au(t)),t.changePrefixPassword=t.changePrefixPassword.bind(au(t)),t.changeConfirmPrefixPassword=t.changeConfirmPrefixPassword.bind(au(t)),t.exportSafe=t.exportSafe.bind(au(t)),t.editExportJwk=t.editExportJwk.bind(au(t)),t.generateExport=t.generateExport.bind(au(t)),t.exportToClipboard=t.exportToClipboard.bind(au(t)),t.showQrCode=t.showQrCode.bind(au(t)),t}return t=s,n=[{key:"toggleExportSafeWithSecurity",value:function(){var e=this;this.setState({exportSafeWithSecurity:!this.state.exportSafeWithSecurity,importData:!1,importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1,qrCode:!1},(function(){e.setState({exportInvalid:e.isExportInvalid()})}))}},{key:"changeExportSecurityType",value:function(e){var t=this;this.setState({exportSecurityType:e.target.value,qrCode:!1},(function(){t.setState({exportInvalid:t.isExportInvalid()})}))}},{key:"changePassword",value:function(e){var t=this,n=-1;e.target.value&&(n=zxcvbn(e.target.value).score),this.setState({password:e.target.value,pwdScore:n},(function(){t.setState({exportInvalid:t.isExportInvalid()})}))}},{key:"changeConfirmPassword",value:function(e){var t=this;this.setState({confirmPassword:e.target.value},(function(){t.setState({exportInvalid:t.isExportInvalid()})}))}},{key:"changePrefixPassword",value:function(e){var t=this;this.setState({prefixPassword:e.target.value},(function(){t.setState({exportInvalid:t.isExportInvalid()})}))}},{key:"changeConfirmPrefixPassword",value:function(e){var t=this;this.setState({confirmPrefixPassword:e.target.value},(function(){t.setState({exportInvalid:t.isExportInvalid()})}))}},{key:"editExportJwk",value:function(e){var t=this;this.setState({exportJwk:e},(function(){t.setState({exportInvalid:t.isExportInvalid()})}))}},{key:"isExportInvalid",value:function(){if(this.state.exportSafeWithSecurity)if("password"===this.state.exportSecurityType){if(!this.state.password||this.state.password!==this.state.confirmPassword)return!0}else if("master-password"===this.state.exportSecurityType){if(!this.state.password)return!0;if(this.state.prefixPassword&&this.state.prefixPassword!==this.state.confirmPrefixPassword)return!0}else if("jwk"===this.state.exportSecurityType)try{if(!this.state.exportJwk||!JSON.parse(this.state.exportJwk).alg)return!0}catch(e){return!0}return!1}},{key:"generateExport",value:function(){var e=this,t=[];if(this.state.content.forEach((function(e){var n=Object.assign({},e.data);n.name=e.name,t.push(n)})),!this.state.exportSafeWithSecurity)return Promise.resolve(JSON.stringify(t));if("password"===this.state.exportSecurityType||"master-password"===this.state.exportSecurityType){var n=(new TextEncoder).encode(this.state.prefixPassword+this.state.password),r="PBES2-HS512+A256KW";return"A192KW"===this.state.safe.alg_type||"A192GCMKW"===this.state.safe.alg_type||"PBES2-HS384+A192KW"===this.state.safe.alg_type?r="PBES2-HS384+A192KW":"A128KW"!==this.state.safe.alg_type&&"A128GCMKW"!==this.state.safe.alg_type&&"PBES2-HS256+A128KW"!==this.state.safe.alg_type||(r="PBES2-HS256+A128KW"),new Cn({data:t}).setProtectedHeader({alg:r,enc:this.state.safe.enc_type||"A256GCM",sign_key:this.state.config.sign_thumb}).encrypt(n)}if("jwk"===this.state.exportSecurityType){var o=JSON.parse(this.state.exportJwk);return o.use="enc",kt(o,o.alg).then((function(n){if("public"===n.type||"secret"===n.type)return new Cn({data:t}).setProtectedHeader({alg:o.alg,enc:e.state.safe.enc_type,sign_key:e.state.config.sign_thumb}).encrypt(n);e.setState({exportInvalid:1})}))}}},{key:"exportToClipboard",value:function(e){var t=this;e.preventDefault(),this.generateExport().then((function(e){navigator.clipboard.writeText(e).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}));try{var n=bootstrap.Modal.getOrCreateInstance(document.querySelector("#manageSafe"));n&&n.hide()}catch(e){}try{var r=bootstrap.Modal.getOrCreateInstance(document.querySelector("#exportCoinModal"));r&&r.hide()}catch(e){}t.setState({exportSafeWithSecurity:!1,exportSecurityType:"password",pwdScore:-1,password:"",prefixPassword:"",confirmPrefixPassword:"",exportInvalid:!1,exportJwk:"",qrCode:!1})}))}},{key:"exportSafe",value:function(e){var t=this;e.preventDefault(),this.generateExport().then((function(e){var n=$("#"+t.state.id+"-download");n.attr("href","data:application/octet-stream;base64,"+btoa(e)),n.attr("download",t.state.name+".jwt"),n[0].click(),t.state.safe.offline?Rn.sendMessage("App",{action:"offlineSafeExported",safeName:t.state.safe.name}):Rn.sendMessage("Notification",{type:"info",message:pe.t("exportSuccess")});try{var r=bootstrap.Modal.getOrCreateInstance(document.querySelector("#manageSafe"));r&&r.hide()}catch(e){}try{var o=bootstrap.Modal.getOrCreateInstance(document.querySelector("#exportCoinModal"));o&&o.hide()}catch(e){}t.setState({exportSafeWithSecurity:!1,exportSecurityType:"password",pwdScore:-1,password:"",prefixPassword:"",confirmPrefixPassword:"",exportInvalid:!1,exportJwk:"",qrCode:!1})}))}},{key:"showQrCode",value:function(e){var t=this;e.preventDefault(),this.generateExport().then((function(e){t.setState({qrCode:e})}))}},{key:"render",value:function(){var e,t,n,o,a=this;if(this.state.exportSafeWithSecurity)if(e=r.createElement("select",{className:"form-select",value:this.state.exportSecurityType,onChange:this.changeExportSecurityType},r.createElement("option",{value:"password"},pe.t("securityTypePassword")),r.createElement("option",{value:"master-password"},pe.t("securityTypeMasterPassword")),r.createElement("option",{value:"jwk"},pe.t("securityTypeJwk"))),"password"===this.state.exportSecurityType)0===this.state.pwdScore?o=r.createElement("span",{className:"badge bg-danger"},pe.t("pwdScoreTooGuessable")):1===this.state.pwdScore?o=r.createElement("span",{className:"badge bg-warning"},pe.t("pwdScoreVeryGuessable")):2===this.state.pwdScore?o=r.createElement("span",{className:"badge bg-secondary"},pe.t("pwdScoreSomewhatGuessable")):3===this.state.pwdScore?o=r.createElement("span",{className:"badge bg-primary"},pe.t("pwdScoreSafelyUnguessable")):4===this.state.pwdScore&&(o=r.createElement("span",{className:"badge bg-success"},pe.t("pwdScoreVeryUnguessable"))),t=r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"newPassword",className:"form-label"},pe.t("newPassword")),r.createElement("input",{type:"password",autoComplete:"new-password",className:"form-control",id:"newPassword",value:this.state.password,onChange:this.changePassword}),o),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"confirmNewPassword",className:"form-label"},pe.t("confirmNewPassword")),r.createElement("input",{type:"password",autoComplete:"new-password",className:"form-control",id:"confirmNewPassword",value:this.state.confirmPassword,onChange:this.changeConfirmPassword})));else if("master-password"===this.state.exportSecurityType)t=r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"prefixPassword",className:"form-label"},pe.t("prefixPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"prefixPassword",placeholder:pe.t("prefixPasswordPh"),value:this.state.prefixPassword,onChange:function(e){return a.changePrefixPassword(e)}}),o),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"confirmPrefixPassword",className:"form-label"},pe.t("confirmPrefixPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"confirmPrefixPassword",placeholder:pe.t("confirmPrefixPasswordPh"),value:this.state.confirmPrefixPassword,onChange:function(e){return a.changeConfirmPrefixPassword(e)}})),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"newPassword",className:"form-label"},pe.t("masterPassword")),r.createElement("input",{type:"password",autoComplete:"off",className:"form-control",id:"newPassword",placeholder:pe.t("masterPasswordPh"),value:this.state.password,onChange:function(e){return a.changePassword(e)}})));else if("jwk"===this.state.exportSecurityType){var i;this.state.exportInvalid&&(i=r.createElement("div",{className:"invalid-feedback"},pe.t("jwkError"))),t=r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"exportJwk",className:"form-label"},pe.t("exportJwk")),r.createElement(no,{isError:this.state.exportInvalid,errorMessage:pe.t("safeSecretError"),ph:pe.t("safeKeyJwkPh"),cb:this.editExportJwk}),i)}if(this.state.qrCode){var s=tu()(0,"L");this.state.qrCode.length<23648?(s.addData(this.state.qrCode),s.make(),n=r.createElement("div",{className:"text-center"},r.createElement("img",{className:"img-fluid",src:s.createDataURL(4),alt:"qrcode"}))):n=r.createElement("div",{className:"alert alert-warning",role:"alert"},pe.t("exportShowQrCodeTooLarge"))}return r.createElement("div",{className:"mb-3"},r.createElement("div",{className:"form-check"},r.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:this.state.id+"-exportSafeWithSecurity",checked:this.state.exportSafeWithSecurity,onChange:this.toggleExportSafeWithSecurity}),r.createElement("label",{className:"form-check-label",htmlFor:this.state.id+"-exportSafeWithSecurity"},pe.t("exportSafeWithSecurity"))),e,r.createElement("form",{onSubmit:function(e){return a.exportSafe(e)}},t,r.createElement("div",{className:"btn-group"},r.createElement("button",{type:"submit",className:"btn btn-secondary",onClick:this.exportSafe,title:pe.t("downloadExport"),disabled:this.state.exportInvalid},r.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.exportToClipboard,title:pe.t("exportSafeToClipboard"),disabled:this.state.exportInvalid},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.showQrCode,title:pe.t("exportShowQrCode"),disabled:this.state.exportInvalid},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"}))),r.createElement("a",{className:"upload",id:this.state.id+"-download"}),n))}}],n&&ru(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component);const cu=su;function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function uu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==lu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==lu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===lu(o)?o:String(o)),r)}var o}function fu(e,t){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fu(e,t)}function du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pu(e){return pu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pu(e)}function hu(e){return e.safeContent&&e.safe.name&&e.safeContent[e.safe.name]?e.safeContent[e.safe.name].unlockedCoinList:[]}var mu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fu(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pu(a);if(i){var n=pu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===lu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return du(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,oidcStatus:e.oidcStatus,safe:e.safe,safeContent:e.safeContent,cbSaveCoin:e.cbSaveCoin,cbClose:e.cbClose,unlockedCoinList:hu(e),exportSafeWithSecurity:!1,exportSecurityType:"password",prefixPassword:"",password:"",confirmPassword:"",pwdScore:-1,importText:"",importJwk:"",errorExportJwk:!1,exportInvalid:!1,importData:!1,importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1,importRunning:!1,showProgress:!1,coinMax:0,coinNow:0,merge:!0,showScanQr:!1,importDataJson:!1},t.changePassword=t.changePassword.bind(du(t)),t.changePrefixPassword=t.changePrefixPassword.bind(du(t)),t.changeImportText=t.changeImportText.bind(du(t)),t.getImportFile=t.getImportFile.bind(du(t)),t.parseContent=t.parseContent.bind(du(t)),t.importContent=t.importContent.bind(du(t)),t.completeImportContent=t.completeImportContent.bind(du(t)),t.editImportJwk=t.editImportJwk.bind(du(t)),t.changeMerge=t.changeMerge.bind(du(t)),t.toggleScanQr=t.toggleScanQr.bind(du(t)),t.handleQrCodeScan=t.handleQrCodeScan.bind(du(t)),t}return t=c,n=[{key:"changePassword",value:function(e){var t=this,n=-1;e.target.value&&(n=zxcvbn(e.target.value).score),this.setState({password:e.target.value,pwdScore:n},(function(){t.setState({exportInvalid:t.isImportInvalid()})}))}},{key:"changePrefixPassword",value:function(e){this.setState({prefixPassword:e.target.value})}},{key:"isImportInvalid",value:function(){if(this.state.exportSafeWithSecurity)if("password"===this.state.exportSecurityType){if(!this.state.password||this.state.password!==this.state.confirmPassword)return!0}else if("jwk"===this.state.exportSecurityType)try{if(!this.state.importJwk||!JSON.parse(this.state.importJwk).alg)return!0}catch(e){return!0}return!1}},{key:"editImportJwk",value:function(e){var t=this;this.setState({importJwk:e},(function(){t.setState({exportInvalid:t.isImportInvalid()})}))}},{key:"getImportFile",value:function(e){var t=this;this.setState({exportSafeWithSecurity:!1,importData:!1,importText:"",importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1},(function(){var n=e.target.files[0],r=new FileReader;r.onload=function(e){t.setState({importData:e.target.result},(function(){t.parseContent()}))},r.readAsText(n)}))}},{key:"changeImportText",value:function(e){var t=this;this.setState({importText:e.target.value,importData:e.target.value,importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1,safeName:"import"},(function(){t.parseContent()}))}},{key:"parseContent",value:function(){if(this.state.importData){var e=!1;try{e=JSON.parse(this.state.importData)}catch(e){}if(e&&Array.isArray(e))this.setState({importSecurityType:"none",importDataJson:e});else{var t=!1;try{t=kn(this.state.importData)}catch(e){this.setState({importDataResult:"invalidData"})}t&&("PBES2-HS256+A128KW"===t.alg||"PBES2-HS384+A192KW"===t.alg||"PBES2-HS512+A256KW"===t.alg?this.setState({importSecurityType:"password"}):this.setState({importSecurityType:"jwk"}))}}else this.setState({importDataResult:"invalidData"})}},{key:"completeImportContent",value:function(e){var t=this;if(e&&e.preventDefault(),"password"===this.state.importSecurityType){var n=new TextEncoder;Pn(this.state.importData,n.encode((this.state.prefixPassword||"")+this.state.password)).then((function(e){t.importContent(e.payload.data)})).catch((function(){t.setState({importDataResult:"invalidPassword"})}))}else if("jwk"===this.state.importSecurityType)try{var r=JSON.parse(this.state.importJwk);r.use="enc",kt(r,r.alg).then((function(e){Pn(t.state.importData,e).then((function(e){t.importContent(e.payload.data)})).catch((function(){t.setState({importDataResult:"invalidJwk"})}))}))}catch(e){this.setState({importDataResult:"invalidJwk"})}else"none"===this.state.importSecurityType&&this.importContent(this.state.importDataJson)}},{key:"importContent",value:function(e){var t=this,n=0,r=0;this.setState({importRunning:!0,showProgress:!0,coinMax:e.length,coinNow:0},(function(){var o=t.state.safeContent[t.state.safe.name].coinList||[];e.forEach((function(a){var i=!1,s=!1,c=!0;a.name&&(o.forEach((function(e){e.name===a.name&&(i=e,s=e.name)})),delete a.name,i&&t.state.merge&&i.last_updated&&a.lastUpdated&&(c=!1,i.last_updated<a.lastUpdated&&(c=!0)));try{t.state.cbSaveCoin(c,s,a).then((function(){n++})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorCoinSave")})})).finally((function(){r++,t.setState({coinNow:t.state.coinNow+1},(function(){r===e.length&&(r===n?t.setState({importDataResult:"importComplete",importTotalCount:n,importRunning:!1,showProgress:!1,importDataJson:!1},(function(){})):t.setState({importDataResult:"importIncomplete",importTotalCount:n,importTotalSuccess:r,importRunning:!1,showProgress:!1,importDataJson:!1}))}))}))}catch(o){r++,t.setState({coinNow:t.state.coinNow+1},(function(){r===e.length&&(r===n?t.setState({importDataResult:"importComplete",importTotalCount:n,importRunning:!1,showProgress:!1,importDataJson:!1},(function(){})):t.setState({importDataResult:"importIncomplete",importTotalCount:n,importTotalSuccess:r,importRunning:!1,showProgress:!1,importDataJson:!1}))}))}}))}))}},{key:"closeModal",value:function(e,t){this.state.cbClose&&this.state.cbClose()}},{key:"changeMerge",value:function(){this.setState({merge:!this.state.merge})}},{key:"toggleScanQr",value:function(){this.setState({showScanQr:!this.state.showScanQr})}},{key:"handleQrCodeScan",value:function(e,t){var n=this;e&&e.text&&this.setState({importText:e.text,importData:e.text,importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1,safeName:"import",showScanQr:!1},(function(){n.parseContent()}))}},{key:"render",value:function(){var e,t,n,o,a,i,s,c=this;if("invalidData"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-danger",role:"alert"},pe.t("importInvalidData")):"importComplete"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-success",role:"alert"},pe.t("importComplete",{count:this.state.importTotalCount})):"importIncomplete"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-warning",role:"alert"},pe.t("importIncomplete",{count:this.state.importTotalCount,total:this.state.importTotalSuccess})):"invalidPassword"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-danger",role:"alert"},pe.t("importInvalidPassword")):"invalidJwk"===this.state.importDataResult&&(e=r.createElement("div",{className:"alert alert-danger",role:"alert"},pe.t("importInvalidKey"))),this.state.importSecurityType){var l;this.state.importRunning&&(l=r.createElement("i",{className:"fa fa-spinner fa-spin fa-fw btn-icon-right"}));var u="password"===this.state.importSecurityType&&!this.state.password||"jwk"===this.state.importSecurityType&&!this.state.importJwk;n=r.createElement("button",{type:"submit",className:"btn btn-secondary",onClick:this.completeImportContent,title:pe.t("modalOk"),disabled:u||this.state.importRunning},pe.t("modalOk"),l)}return"password"===this.state.importSecurityType?t=r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"prefix-password",className:"form-label"},pe.t("importPrefixPassword")),r.createElement("input",{type:"password",className:"form-control",id:"prefix-password",autoComplete:"new-password",value:this.state.prefixPassword,onChange:this.changePrefixPassword})),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"password",className:"form-label"},pe.t("importPassword")),r.createElement("input",{type:"password",className:"form-control",id:"password",autoComplete:"new-password",value:this.state.password,onChange:this.changePassword}))):"jwk"===this.state.importSecurityType&&(t=r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"importJwk",className:"form-label"},pe.t("importJwk")),r.createElement(no,{isError:!1,ph:pe.t("safeKeyJwkPh"),cb:this.editImportJwk}))),this.state.showProgress&&(o=r.createElement("code",{className:"btn-icon-right"},this.state.coinNow,"/",this.state.coinMax)),this.state.safe&&(s=this.state.safe.offline?Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15):this.state.safe.name,a=r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("div",{className:"alert alert-primary",role:"alert"},pe.t("exportSafe"))),r.createElement(cu,{config:this.state.config,safe:this.state.safe,content:this.state.unlockedCoinList,id:s,name:this.state.safe.display_name}),r.createElement("hr",null))),this.state.showScanQr&&(i=r.createElement($l,{onResult:this.handleQrCodeScan,style:{width:"100%"},constraints:{facingMode:"environment"}})),r.createElement("div",{className:"modal",tabIndex:"-1",id:"manageSafe"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("manageSafe")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(e){return c.closeModal(e,!1)}})),r.createElement("div",{className:"modal-body"},a,r.createElement("div",{className:"mb-3"},r.createElement("div",{className:"alert alert-primary",role:"alert"},pe.t("importSafe"))),r.createElement("div",{className:"mb-3"},r.createElement("input",{className:"form-check-input btn-icon",type:"checkbox",id:"importMerge",onChange:this.changeMerge,checked:this.state.merge}),r.createElement("label",{className:"form-check-label",htmlFor:"importMerge"},pe.t("importMerge"))),r.createElement("div",{className:"mb-3"},r.createElement("input",{type:"file",className:"upload",id:"importSafeFileInput",disabled:"connected"!==this.state.oidcStatus,onChange:this.getImportFile}),r.createElement("label",{htmlFor:"importSafeFileInput",className:"btn btn-secondary",disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"}))),pe.t("or"),r.createElement("hr",null),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"importText",className:"form-label"},pe.t("importText")),r.createElement("textarea",{className:"form-control",id:"importText",value:this.state.importText,placeholder:pe.t("importTextPh"),onChange:this.changeImportText}),r.createElement("div",{className:"btn-group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return c.closeModal(e,!1)},disabled:!this.state.importText},r.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.toggleScanQr,title:pe.t("importQrCode")},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})))),r.createElement("div",{className:"mb-3"},i),r.createElement("div",{className:"mb-3"},r.createElement("form",{onSubmit:this.completeImportContent},t,n),o,e),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return c.closeModal(e,!1)},disabled:this.state.importRunning},pe.t("modalClose")))))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&uu(t.prototype,n),o&&uu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const yu=mu;function gu(e){return gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gu(e)}function vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==gu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==gu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===gu(o)?o:String(o)),r)}var o}function bu(e,t){return bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bu(e,t)}function wu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eu(e){return Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eu(e)}var Su=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bu(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Eu(a);if(i){var n=Eu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wu(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,element:e.element,index:e.index,cbSave:e.cbSave,cbCancel:e.cbCancel,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver},t.changeValue=t.changeValue.bind(wu(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"changeValue",value:function(e){var t=this.state.element;t.value=e.target.value,this.setState({element:t})}},{key:"render",value:function(){var e=this;return r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("form",{onSubmit:function(t){return e.state.cbSave(t,e.state.element,e.state.index)}},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:this.state.coin.name+"-"+this.state.index,className:"form-label"},pe.t("coinElementUrl")),r.createElement("input",{type:"text",className:"form-control",id:this.state.coin.name+"-"+this.state.index,value:this.state.element.value,placeholder:pe.t("coinElementUrlPh"),onChange:this.changeValue})),r.createElement("div",{className:"mb-3 btn-group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.state.cbCancel(t,e.state.index)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return e.state.cbSave(t,e.state.element,e.state.index)},disabled:!this.state.element.value},pe.t("modalOk")))))}}])&&vu(t.prototype,n),o&&vu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Cu=Su;function _u(e){return _u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(e)}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_u(o)?o:String(o)),r)}var o}function ku(e,t){return ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ku(e,t)}function Ou(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pu(e){return Pu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pu(e)}var Nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ku(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pu(a);if(i){var n=Pu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ou(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,element:e.element,index:e.index,cbSave:e.cbSave,cbCancel:e.cbCancel,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver},t.changeValue=t.changeValue.bind(Ou(t)),t.changeHideMenu=t.changeHideMenu.bind(Ou(t)),t.changeHide=t.changeHide.bind(Ou(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"changeValue",value:function(e){var t=this.state.element;t.value=e.target.value,this.setState({element:t})}},{key:"changeHideMenu",value:function(){var e=this.state.element;e.hideMenu=!e.hideMenu,this.setState({element:e})}},{key:"changeHide",value:function(){var e=this.state.element;e.hide=!e.hide,this.setState({element:e})}},{key:"render",value:function(){var e=this;return r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("form",{onSubmit:function(t){return e.state.cbSave(t,e.state.element,e.state.index)}},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:this.state.coin.name+"-"+this.state.index,className:"form-label"},pe.t("coinElementLogin")),r.createElement("input",{type:"text",className:"form-control",id:this.state.coin.name+"-"+this.state.index,value:this.state.element.value,placeholder:pe.t("coinElementLoginPh"),onChange:this.changeValue})),r.createElement("div",{className:"mb-3"},r.createElement("input",{className:"form-check-input btn-icon",type:"checkbox",id:this.state.coin.name+"-"+this.state.index+"-hideMenu",onChange:this.changeHideMenu,checked:!this.state.element.hideMenu}),r.createElement("label",{className:"form-check-label",htmlFor:this.state.coin.name+"-"+this.state.index+"-hideMenu"},pe.t("coinElementShowShortcut"))),r.createElement("div",{className:"mb-3"},r.createElement("input",{className:"form-check-input btn-icon",type:"checkbox",id:this.state.coin.name+"-"+this.state.index+"-hide",onChange:this.changeHide,checked:!!this.state.element.hide}),r.createElement("label",{className:"form-check-label",htmlFor:this.state.coin.name+"-"+this.state.index+"-hide"},pe.t("coinElementHide"))),r.createElement("div",{className:"mb-3 btn-group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.state.cbCancel(t,e.state.index)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return e.state.cbSave(t,e.state.element,e.state.index)},disabled:!this.state.element.value},pe.t("modalOk")))))}}])&&Au(t.prototype,n),o&&Au(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Tu=Nu;function Iu(e){return Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(e)}function Ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Iu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Iu(o)?o:String(o)),r)}var o}function Du(e,t){return Du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Du(e,t)}function xu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mu(e){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mu(e)}var Lu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Du(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mu(a);if(i){var n=Mu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Iu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xu(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={private:e.private,jwk:e.jwk,showQrCode:!1},t.copyToClipboard=t.copyToClipboard.bind(xu(t)),t.downloadAsFile=t.downloadAsFile.bind(xu(t)),t.toggleQrCode=t.toggleQrCode.bind(xu(t)),t}return t=c,n=[{key:"toggleQrCode",value:function(){this.setState({showQrCode:!this.state.showQrCode})}},{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(JSON.stringify(this.state.jwk)).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"downloadAsFile",value:function(){if(this.state.jwk){var e=$("#download-"+(this.state.private?"priv":"pub"));e.attr("href","data:application/octet-stream;base64,"+btoa(JSON.stringify(this.state.jwk))),e[0].click()}}},{key:"render",value:function(){var e,t;if(e=this.state.private?r.createElement("h5",null,pe.t("keyTypePrivate")):r.createElement("h5",null,pe.t("keyTypePublic")),this.state.showQrCode){var n=tu()(0,"L");n.addData(JSON.stringify(this.state.jwk)),n.make(),t=r.createElement("img",{className:"img-fluid",src:n.createDataURL(4),alt:"qrcode"})}else t=JSON.stringify(this.state.jwk,null,2);return r.createElement("div",null,r.createElement("div",null,e,r.createElement("div",{className:"btn-group float-end btn-icon"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementCopy"),onClick:this.copyToClipboard},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementDownload"),onClick:this.downloadAsFile},r.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementShowQrCode"),onClick:this.toggleQrCode},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})))),r.createElement("pre",null,t),r.createElement("a",{className:"upload",id:"download-"+(this.state.private?"priv":"pub"),download:this.state.private?"private.jwk":"public.jwk"}))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&Ru(t.prototype,n),o&&Ru(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Bu=Lu;function ju(e){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(e)}function Fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ju(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ju(o)?o:String(o)),r)}var o}function Uu(e,t){return Uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uu(e,t)}function Hu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vu(e){return Vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vu(e)}var Ku=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uu(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vu(a);if(i){var n=Vu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ju(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hu(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,cb:e.callback,element:e.element,originalPassword:e.originalPassword,hideSaveAndClose:e.hideSaveAndClose,wordsLists:{},showPassword:!1,passwordGenerated:!1,keyType:"AS-ES256",keyAlg:"ECDH-ES+A128KW",keyPair:{private:!1,public:!1},qrcode:!1,qrCodeError:!1,showImportQrCode:!1,qrcodeImported:!1},t.toggleShowPassword=t.toggleShowPassword.bind(Hu(t)),t.toggleParam=t.toggleParam.bind(Hu(t)),t.changePasswordLength=t.changePasswordLength.bind(Hu(t)),t.generateRandomChars=t.generateRandomChars.bind(Hu(t)),t.changePasswordWordsNumber=t.changePasswordWordsNumber.bind(Hu(t)),t.changePasswordWordsSeparator=t.changePasswordWordsSeparator.bind(Hu(t)),t.generateRandomWords=t.generateRandomWords.bind(Hu(t)),t.generateKey=t.generateKey.bind(Hu(t)),t.copyOriginalPassword=t.copyOriginalPassword.bind(Hu(t)),t.copyNewPassword=t.copyNewPassword.bind(Hu(t)),t.changeKeyType=t.changeKeyType.bind(Hu(t)),t.changeKeyAlg=t.changeKeyAlg.bind(Hu(t)),t.showQrCode=t.showQrCode.bind(Hu(t)),t.handleQrCodeScan=t.handleQrCodeScan.bind(Hu(t)),t.toggleQrReader=t.toggleQrReader.bind(Hu(t)),t.state.config.frontend.lang.forEach((function(e){Xn.request("words-"+e+".json").then((function(n){var r=t.state.wordsLists;r[e]=n,t.setState({wordsLists:r})}))})),t}return t=c,n=[{key:"toggleShowPassword",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"showQrCode",value:function(){if(this.state.qrcode)this.setState({qrcode:!1,qrCodeError:!1});else{var e=tu()(0,"L");this.state.element.value.length<23648?(e.addData(this.state.element.value),e.make(),this.setState({qrcode:e.createDataURL(4),qrCodeError:!1})):this.setState({qrcode:!1,qrCodeError:!0})}}},{key:"toggleParam",value:function(e,t){var n=this.state.element;n.params[t]=!n.params[t],this.setState({element:n})}},{key:"changePasswordLength",value:function(e){var t=this.state.element;e.target.value?t.params.passwordCharLength=parseInt(e.target.value):t.params.passwordCharLength=0,this.setState({element:t})}},{key:"closeModal",value:function(e,t){this.state.cb&&this.state.cb(t,this.state.element)}},{key:"randomCharsRangeList",value:function(e,t){var n=new Uint8Array(e);window.crypto.getRandomValues(n);for(var r=0;r<e;r++)for(;n[r]>=t;){var o=new Uint8Array(1);window.crypto.getRandomValues(o),n[r]=o[0]}return n}},{key:"randomWordsRangeList",value:function(e,t){var n=new Uint32Array(e);window.crypto.getRandomValues(n);for(var r=0;r<e;r++)for(;n[r]>=t;){var o=new Uint32Array(1);window.crypto.getRandomValues(o),n[r]=o[0]}return n}},{key:"generateRandomChars",value:function(){var e="";this.state.element.params.lowercase&&(e+="abcdefghijklmnopqrstuvwxyz"),this.state.element.params.upprcase&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),this.state.element.params.numbers&&(e+="0123456789"),this.state.element.params.special&&(e+="!\"#$%&\\'()*+,-./:;<=>?@[]^_`{|}~"),this.state.element.params.spaces&&(e+=" ");var t=this.randomCharsRangeList(this.state.element.params.passwordCharLength,e.length);if(this.state.element.params.noSimilarFollowingChars)for(var n=1;n<this.state.element.params.passwordCharLength;n++)for(;t[n]===t[n-1];){var r=this.randomCharsRangeList(1,e.length);t[n]=r[0]}var o="";for(n=0;n<this.state.element.params.passwordCharLength;n++)o+=e[t[n]];var a=this.state.element;a.params.type="chars",a.value=o,this.setState({element:a,passwordGenerated:!0,qrcodeImported:!1,qrcode:!1,qrCodeError:!1})}},{key:"changePasswordWordsNumber",value:function(e){var t=this.state.element;e.target.value?t.params.wordsNumber=parseInt(e.target.value):t.params.wordsNumber=0,this.setState({element:t})}},{key:"toggleWordsLang",value:function(e,t){var n=this.state.element;-1!==n.params.wordsLangsList.indexOf(t)?n.params.wordsLangsList.splice(n.params.wordsLangsList.indexOf(t),1):n.params.wordsLangsList.push(t),this.setState({element:n})}},{key:"changePasswordWordsSeparator",value:function(e){var t=this.state.element;t.params.wordSeparator=e.target.value,this.setState({element:t})}},{key:"generateRandomWords",value:function(){var e=this,t=[];this.state.element.params.wordsLangsList.forEach((function(n){t=t.concat(e.state.wordsLists[n])}));for(var n=this.randomWordsRangeList(this.state.element.params.wordsNumber,t.length),r=[],o=0;o<this.state.element.params.wordsNumber;o++)r.push(t[n[o]]);var a=this.state.element;a.params.type="words",a.value=r.join(this.state.element.params.wordSeparator),this.setState({element:a,passwordGenerated:!0,qrcodeImported:!1,qrcode:!1,qrCodeError:!1})}},{key:"generateKey",value:function(){var e=this,t={extractable:!0};"AS-RSA2048"===this.state.keyType?t.modulusLength=2048:"AS-RSA4096"===this.state.keyType?t.modulusLength=4096:"AS-ES256"===this.state.keyType?t.crv="P-256":"AS-ES384"===this.state.keyType?t.crv="P-384":"AS-ES512"===this.state.keyType&&(t.crv="P-512"),async function(e,t){return async function(e,t){var n,r,o;let a,i;switch(e){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Yt(t)},i=["sign","verify"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Yt(t)},i=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Yt(t)},i=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},i=["sign","verify"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},i=["sign","verify"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},i=["sign","verify"];break;case"EdDSA":i=["sign","verify"];const o=null!==(n=null==t?void 0:t.crv)&&void 0!==n?n:"Ed25519";switch(o){case"Ed25519":case"Ed448":a={name:o};break;default:throw new pt("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{i=["deriveKey","deriveBits"];const e=null!==(r=null==t?void 0:t.crv)&&void 0!==r?r:"P-256";switch(e){case"P-256":case"P-384":case"P-521":a={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":a={name:e};break;default:throw new pt("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new pt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Ye.subtle.generateKey(a,null!==(o=null==t?void 0:t.extractable)&&void 0!==o&&o,i)}(e,t)}(this.state.keyAlg,t).then((function(t){gn(t.publicKey).then((function(t){t.alg=e.state.keyAlg;var n=e.state.keyPair;n.public=t,e.setState({keyPair:n,qrcode:!1,qrCodeError:!1})})),gn(t.privateKey).then((function(t){t.alg=e.state.keyAlg;var n=e.state.keyPair;n.private=t,e.setState({keyPair:n})}))})).catch((function(e){console.error("generateKeyPair",e)}))}},{key:"copyOriginalPassword",value:function(){navigator.clipboard.writeText(this.state.originalPassword).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyOriginalPasswordToClipboard")})}))}},{key:"copyNewPassword",value:function(){navigator.clipboard.writeText(this.state.element.value).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyNewPasswordToClipboard")})}))}},{key:"changeKeyType",value:function(e){var t=this.state.keyAlg;e.target.value.startsWith("AS-RSA")&&!t.startsWith("RSA")?t="RSA-OAEP-256":e.target.value.startsWith("AS-ES")&&!t.startsWith("ECDH")&&(t="ECDH-ES+A128KW"),this.setState({keyType:e.target.value,keyAlg:t})}},{key:"changeKeyAlg",value:function(e){this.setState({keyAlg:e.target.value})}},{key:"handleQrCodeScan",value:function(e,t){if(e&&e.text){var n=this.state.element;n.value=e.text,this.setState({showImportQrCode:!1,passwordGenerated:!1,qrcodeImported:!0,element:n})}}},{key:"toggleQrReader",value:function(){this.setState({showImportQrCode:!this.state.showImportQrCode})}},{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"alert alert-primary",role:"alert"},pe.t("newPassword"));this.state.showPassword&&(this.state.passwordGenerated||this.state.qrcodeImported)?t=r.createElement("div",{className:"alert alert-secondary",role:"alert"},r.createElement("code",null,this.state.element.value)):this.state.passwordGenerated?t=r.createElement("div",{className:"alert alert-success",role:"alert"},pe.t("messagePasswordGenerated")):this.state.qrcodeImported&&(t=r.createElement("div",{className:"alert alert-success",role:"alert"},pe.t("messageQrCodeImported")));var n,o,a,i,s=[];if(this.state.config.frontend.lang.forEach((function(t){s.push(r.createElement("div",{className:"form-group form-check",key:t},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"passwordWordsLangs-"+t,onChange:function(n){return e.toggleWordsLang(n,t)},checked:-1!==e.state.element.params.wordsLangsList.indexOf(t)}),r.createElement("label",{className:"form-check-label",htmlFor:"passwordWordsLangs-"+t},pe.t("passwordWordsLangs-"+t))))})),this.state.hideSaveAndClose){var c,l,u=[];this.state.keyType.startsWith("AS-RSA")?(u.push(r.createElement("option",{key:0,value:"RSA1_5"},"RSA1_5")),u.push(r.createElement("option",{key:1,value:"RSA-OAEP"},"RSA-OAEP")),u.push(r.createElement("option",{key:2,value:"RSA-OAEP-256"},"RSA-OAEP-256"))):this.state.keyType.startsWith("AS-ES")&&(u.push(r.createElement("option",{key:0,value:"ECDH-ES"},"ECDH-ES")),u.push(r.createElement("option",{key:1,value:"ECDH-ES+A128KW"},"ECDH-ES+A128KW")),u.push(r.createElement("option",{key:2,value:"ECDH-ES+A192KW"},"ECDH-ES+A192KW")),u.push(r.createElement("option",{key:3,value:"ECDH-ES+A256KW"},"ECDH-ES+A256KW"))),this.state.keyPair.private&&(c=r.createElement(Bu,{jwk:this.state.keyPair.private,private:!0})),this.state.keyPair.public&&(l=r.createElement(Bu,{jwk:this.state.keyPair.public,private:!1})),o=r.createElement("div",{className:"accordion-item"},r.createElement("h2",{className:"accordion-header",id:"headingThree"},r.createElement("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#keyGenerator","aria-expanded":"true","aria-controls":"keyGenerator"},pe.t("keyGenerator"))),r.createElement("div",{id:"keyGenerator",className:"accordion-collapse collapse","data-bs-parent":"#secretGeneratorAccordion"},r.createElement("div",{className:"accordion-body"},r.createElement("div",{className:"input-group mb-3"},r.createElement("label",{className:"input-group-text",htmlFor:"keyType"},pe.t("keyType")),r.createElement("select",{className:"form-select",id:"keyType",value:this.state.keyType,onChange:this.changeKeyType},r.createElement("option",{value:"AS-RSA2048"},pe.t("keyTypeAsymmetricRSA2048")),r.createElement("option",{value:"AS-RSA4096"},pe.t("keyTypeAsymmetricRSA4096")),r.createElement("option",{value:"AS-ES256"},pe.t("keyTypeAsymmetricES256")),r.createElement("option",{value:"AS-ES384"},pe.t("keyTypeAsymmetricES384")))),r.createElement("div",{className:"input-group mb-3"},r.createElement("label",{className:"input-group-text",htmlFor:"keyAlg"},pe.t("keyAlg")),r.createElement("select",{className:"form-select",id:"keyAlg",value:this.state.keyAlg,onChange:this.changeKeyAlg},u)),r.createElement("div",{className:"mb-3"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.generateKey},pe.t("keyGenerate"))),r.createElement("div",{className:"mb-3"},c),r.createElement("div",{className:"mb-3"},l))))}else n=r.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){return e.closeModal(t,!0)},disabled:!this.state.passwordGenerated&&!this.state.qrcodeImported},pe.t("modalCloseAndSave"));return a=this.state.showImportQrCode?r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.toggleQrReader},pe.t("hideQrCode"))),r.createElement("div",{className:"mb-3"},r.createElement($l,{onResult:this.handleQrCodeScan,style:{width:"100%"},constraints:{facingMode:"environment"}}))):r.createElement("div",{className:"mb-3"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.toggleQrReader},pe.t("showQrCode"))),this.state.qrcode?i=r.createElement("img",{className:"img-fluid",src:this.state.qrcode,alt:"qrcode"}):this.state.qrCodeError&&(i=r.createElement("div",{className:"alert alert-warning",role:"alert"},pe.t("exportShowQrCodeTooLarge"))),r.createElement("div",{className:"modal",tabIndex:"-1",id:"modalGeneratePassword"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("modalGeneratePassword")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(t){return e.closeModal(t,!1)}})),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"accordion",id:"secretGeneratorAccordion"},r.createElement("div",{className:"accordion-item"},r.createElement("h2",{className:"accordion-header",id:"headingOne"},r.createElement("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#passwordRandomCharacters","aria-expanded":"true","aria-controls":"passwordRandomCharacters"},pe.t("passwordRandomCharacters"))),r.createElement("div",{id:"passwordRandomCharacters",className:"accordion-collapse collapse show","data-bs-parent":"#secretGeneratorAccordion"},r.createElement("div",{className:"accordion-body"},r.createElement("div",{className:"form-group form-check"},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"lowercase",onChange:function(t){return e.toggleParam(t,"lowercase")},checked:this.state.element.params.lowercase}),r.createElement("label",{className:"form-check-label",htmlFor:"lowercase"},pe.t("passwordRandomLowercase"))),r.createElement("div",{className:"form-group form-check"},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"upprcase",onChange:function(t){return e.toggleParam(t,"upprcase")},checked:this.state.element.params.upprcase}),r.createElement("label",{className:"form-check-label",htmlFor:"upprcase"},pe.t("passwordRandomUppercase"))),r.createElement("div",{className:"form-group form-check"},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"numbers",onChange:function(t){return e.toggleParam(t,"numbers")},checked:this.state.element.params.numbers}),r.createElement("label",{className:"form-check-label",htmlFor:"numbers"},pe.t("passwordRandomNumbers"))),r.createElement("div",{className:"form-group form-check"},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"special",onChange:function(t){return e.toggleParam(t,"special")},checked:this.state.element.params.special}),r.createElement("label",{className:"form-check-label",htmlFor:"special"},pe.t("passwordRandomSpecial"))),r.createElement("div",{className:"form-group form-check"},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"spaces",onChange:function(t){return e.toggleParam(t,"spaces")},checked:this.state.element.params.spaces}),r.createElement("label",{className:"form-check-label",htmlFor:"spaces"},pe.t("passwordRandomSpaces"))),r.createElement("div",{className:"form-group form-check"},r.createElement("input",{type:"checkbox",className:"form-check-input",id:"noSimilarFollowingChars",onChange:function(t){return e.toggleParam(t,"noSimilarFollowingChars")},checked:this.state.element.params.noSimilarFollowingChars}),r.createElement("label",{className:"form-check-label",htmlFor:"noSimilarFollowingChars"},pe.t("passwordNoSimilarFollowingChars"))),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"passwordCharLength",className:"form-label"},pe.t("passwordCharLength")),r.createElement("input",{type:"number",step:"1",min:"0",className:"form-control",id:"passwordCharLength",value:this.state.element.params.passwordCharLength,onChange:this.changePasswordLength})),r.createElement("div",{className:"mb-3"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.generateRandomChars,disabled:!this.state.element.params.lowercase&&!this.state.element.params.upprcase&&!this.state.element.params.numbers&&!this.state.element.params.special||!this.state.element.params.passwordCharLength},pe.t("passwordGenerate"))))))),r.createElement("div",{className:"accordion-item"},r.createElement("h2",{className:"accordion-header",id:"headingTwo"},r.createElement("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#passwordRandomWords","aria-expanded":"true","aria-controls":"passwordRandomWords"},pe.t("passwordRandomWords"))),r.createElement("div",{id:"passwordRandomWords",className:"accordion-collapse collapse","data-bs-parent":"#secretGeneratorAccordion"},r.createElement("div",{className:"accordion-body"},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"passwordWordsNumber",className:"form-label"},pe.t("passwordWordsNumber")),r.createElement("input",{type:"number",step:"1",min:"0",className:"form-control",id:"passwordWordsNumber",value:this.state.element.params.wordsNumber,onChange:this.changePasswordWordsNumber})),r.createElement("div",{className:"input-group mb-3"},r.createElement("label",{className:"input-group-text",htmlFor:"passwordWordsSeparator"},pe.t("passwordWordsSeparator")),r.createElement("select",{className:"form-select",id:"passwordWordsSeparator",value:this.state.element.params.wordSeparator,onChange:this.changePasswordWordsSeparator},r.createElement("option",{value:" "},pe.t("passwordWordsSeparatorSpace")),r.createElement("option",{value:"."},pe.t("passwordWordsSeparatorDot")),r.createElement("option",{value:"-"},pe.t("passwordWordsSeparatorDash")),r.createElement("option",{value:"_"},pe.t("passwordWordsSeparatorUnderscore")),r.createElement("option",{value:","},pe.t("passwordWordsSeparatorComma")),r.createElement("option",{value:""},pe.t("passwordWordsSeparatorNone")))),r.createElement("h5",null,pe.t("passwordWordsLangs")),s,r.createElement("div",{className:"mb-3"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.generateRandomWords,disabled:!this.state.element.params.wordsNumber||!this.state.element.params.wordsLangsList.length},pe.t("passwordGenerate")))))),o,r.createElement("div",{className:"accordion-item"},r.createElement("h2",{className:"accordion-header",id:"headingThree"},r.createElement("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#qrReader","aria-expanded":"true","aria-controls":"qrReader"},pe.t("importQrCode"))),r.createElement("div",{id:"qrReader",className:"accordion-collapse collapse","data-bs-parent":"#secretGeneratorAccordion"},r.createElement("div",{className:"accordion-body"},a))),r.createElement("hr",null),r.createElement("div",{className:"mb-3"},t),r.createElement("div",{className:"mb-3"},r.createElement("div",{className:"btn-toolbar justify-content-between",role:"toolbar"},r.createElement("div",{className:"btn-group",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.toggleShowPassword,title:pe.t("coinElementShowPassword"),disabled:!this.state.passwordGenerated&&!this.state.qrcodeImported},r.createElement("i",{className:"fa fa-eye","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.showQrCode,title:pe.t("coinElementShowQrCode"),disabled:!this.state.passwordGenerated&&!this.state.qrcodeImported},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.copyNewPassword,title:pe.t("passwordCopyNewPassword"),disabled:!this.state.passwordGenerated&&!this.state.qrcodeImported},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"}))),r.createElement("div",{className:"btn-group",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.copyOriginalPassword,title:pe.t("passwordCopyOriginalPassword"),disabled:!this.state.originalPassword},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})))),i)),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.closeModal(t,!1)}},pe.t("modalClose")),n))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&Fu(t.prototype,n),o&&Fu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Wu=Ku;function zu(e){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(e)}function Gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==zu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==zu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===zu(o)?o:String(o)),r)}var o}function Xu(e,t){return Xu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xu(e,t)}function Ju(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qu(e){return qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qu(e)}var Yu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xu(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qu(a);if(i){var n=qu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===zu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ju(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,coin:e.coin,element:e.element,index:e.index,cbSave:e.cbSave,cbCancel:e.cbCancel,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver,password:e.element.value||"",passwordConfirm:e.element.value||"",showModalGeneratePassword:!1,modalElement:!1,originalPassword:!1,pwdScore:-1},t.changePassword=t.changePassword.bind(Ju(t)),t.changePasswordConfirm=t.changePasswordConfirm.bind(Ju(t)),t.closeAndSave=t.closeAndSave.bind(Ju(t)),t.openGenerateModal=t.openGenerateModal.bind(Ju(t)),t.getGeneratedPassword=t.getGeneratedPassword.bind(Ju(t)),t.changeHideMenu=t.changeHideMenu.bind(Ju(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"changePassword",value:function(e){var t=-1;e.target.value&&(t=zxcvbn(e.target.value).score),this.setState({password:e.target.value,pwdScore:t})}},{key:"changePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"changeHideMenu",value:function(){var e=this.state.element;e.hideMenu=!e.hideMenu,this.setState({element:e})}},{key:"closeAndSave",value:function(e){if(this.state.password&&this.state.password===this.state.passwordConfirm){var t=this.state.element;t.value=this.state.password,this.state.cbSave(e,t,this.state.index)}}},{key:"openGenerateModal",value:function(){var e=Object.assign({},this.state.element);e.params||(e.params={type:"chars",lowercase:!0,upprcase:!0,numbers:!0,special:!0,spaces:!0,noSimilarFollowingChars:!1,passwordCharLength:32,wordsNumber:4,wordsLangsList:[pe.language],wordSeparator:" "}),this.setState({showModalGeneratePassword:!0,modalElement:e,originalPassword:this.state.element.value},(function(){new bootstrap.Modal(document.getElementById("modalGeneratePassword"),{keyboard:!1}).show()}))}},{key:"getGeneratedPassword",value:function(e,t){var n=this;if(e){var r=-1;r=zxcvbn(t.value).score,navigator.clipboard.writeText(t.value).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")}),n.state.cbSave(!1,t,n.state.index)}))}bootstrap.Modal.getOrCreateInstance(document.querySelector("#modalGeneratePassword")).hide(),this.setState({showModalGeneratePassword:!1,modalElement:!1,originalPassword:!1,pwdScore:r})}},{key:"render",value:function(){var e,t,n=this;return this.state.showModalGeneratePassword&&(e=r.createElement(Wu,{config:this.state.config,element:this.state.modalElement,originalPassword:this.state.originalPassword,callback:this.getGeneratedPassword})),0===this.state.pwdScore?t=r.createElement("span",{className:"badge bg-danger"},pe.t("pwdScoreTooGuessable")):1===this.state.pwdScore?t=r.createElement("span",{className:"badge bg-warning"},pe.t("pwdScoreVeryGuessable")):2===this.state.pwdScore?t=r.createElement("span",{className:"badge bg-secondary"},pe.t("pwdScoreSomewhatGuessable")):3===this.state.pwdScore?t=r.createElement("span",{className:"badge bg-primary"},pe.t("pwdScoreSafelyUnguessable")):4===this.state.pwdScore&&(t=r.createElement("span",{className:"badge bg-success"},pe.t("pwdScoreVeryUnguessable"))),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("form",{onSubmit:function(e){return n.state.cbSave(e,n.state.element,n.state.index)}},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:this.state.coin.name+"-"+this.state.index,className:"form-label"},pe.t("coinElementPassword")),r.createElement("input",{type:"password",className:"form-control",id:this.state.coin.name+"-"+this.state.index,value:this.state.password,onChange:this.changePassword}),t),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:this.state.coin.name+"-"+this.state.index,className:"form-label"},pe.t("coinElementPasswordConfirm")),r.createElement("input",{type:"password",className:"form-control",id:this.state.coin.name+"-"+this.state.index+"-confirm",value:this.state.passwordConfirm,onChange:this.changePasswordConfirm})),r.createElement("div",{className:"mb-3"},r.createElement("input",{className:"form-check-input btn-icon",type:"checkbox",id:this.state.coin.name+"-"+this.state.index+"-hideMenu",onChange:this.changeHideMenu,checked:!this.state.element.hideMenu}),r.createElement("label",{className:"form-check-label",htmlFor:this.state.coin.name+"-"+this.state.index+"-hideMenu"},pe.t("coinElementShowShortcut"))),r.createElement("div",{className:"mb-3"},r.createElement("div",{className:"btn-group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return n.state.cbCancel(e,n.state.index)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(e){return n.closeAndSave(e)},disabled:!this.state.password||this.state.password!==this.state.passwordConfirm},pe.t("modalOk"))),r.createElement("div",{className:"btn-group float-end"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.openGenerateModal,title:pe.t("coinPasswordGenerate")},r.createElement("i",{className:"fa fa-magic","aria-hidden":"true"})))),e))}}])&&Gu(t.prototype,n),o&&Gu(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Qu=Yu;function Zu(e){return Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zu(e)}function $u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Zu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Zu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Zu(o)?o:String(o)),r)}var o}function ef(e,t){return ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ef(e,t)}function tf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nf(e){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nf(e)}var rf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ef(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nf(a);if(i){var n=nf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tf(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,element:e.element,index:e.index,cbSave:e.cbSave,cbCancel:e.cbCancel,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver},t.getFile=t.getFile.bind(tf(t)),t}return t=c,n=[{key:"getFile",value:function(e){var t=this,n=this.state.element,r=e.target.files[0],o=new FileReader;o.onload=function(e){n.value={name:r.name,data:btoa(e.target.result)},t.setState({element:n})},o.readAsBinaryString(r)}},{key:"render",value:function(){var e,t=this;return this.state.element.value.name&&(e=r.createElement("code",{className:"btn-icon-right"},this.state.element.value.name)),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("div",{className:"mb-3"},r.createElement("input",{type:"file",className:"upload",id:this.state.coin.name+this.state.index,onChange:this.getFile}),r.createElement("label",{htmlFor:this.state.coin.name+this.state.index,className:"btn btn-outline-secondary btn-sm"},r.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"})),e),r.createElement("div",{className:"mb-3 btn-group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return t.state.cbCancel(e,t.state.index)}},pe.t("modalClose")),r.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(e){return t.state.cbSave(e,t.state.element,t.state.index)},disabled:!this.state.element.value},pe.t("modalOk"))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&$u(t.prototype,n),o&&$u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const of=rf;function af(e){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(e)}function sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==af(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==af(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===af(o)?o:String(o)),r)}var o}function cf(e,t){return cf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cf(e,t)}function lf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uf(e){return uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uf(e)}var ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cf(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uf(a);if(i){var n=uf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===af(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lf(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,element:e.element,index:e.index,cbSave:e.cbSave,cbCancel:e.cbCancel,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver},t.changeValue=t.changeValue.bind(lf(t)),t.changeHide=t.changeHide.bind(lf(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"changeValue",value:function(e){var t=this.state.element;t.value=e.target.value,this.setState({element:t})}},{key:"changeHide",value:function(){var e=this.state.element;e.hide=!e.hide,this.setState({element:e})}},{key:"render",value:function(){var e=this;return r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("form",{onSubmit:function(t){return e.state.cbSave(t,e.state.element,e.state.index)}},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:this.state.coin.name+"-"+this.state.index,className:"form-label"},pe.t("coinElementMisc")),r.createElement("textarea",{className:"form-control",id:this.state.coin.name+"-"+this.state.index,value:this.state.element.value,placeholder:pe.t("coinElementMiscPh"),onChange:this.changeValue})),r.createElement("div",{className:"mb-3"},r.createElement("input",{className:"form-check-input btn-icon",type:"checkbox",id:this.state.coin.name+"-"+this.state.index+"-hide",onChange:this.changeHide,checked:!!this.state.element.hide}),r.createElement("label",{className:"form-check-label",htmlFor:this.state.coin.name+"-"+this.state.index+"-hide"},pe.t("coinElementHide"))),r.createElement("div",{className:"mb-3 btn-group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.state.cbCancel(t,e.state.index)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return e.state.cbSave(t,e.state.element,e.state.index)},disabled:!this.state.element.value},pe.t("modalOk")))))}}])&&sf(t.prototype,n),o&&sf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const df=ff;function pf(e){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(e)}function hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==pf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===pf(o)?o:String(o)),r)}var o}function mf(e,t){return mf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mf(e,t)}function yf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gf(e){return gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gf(e)}var vf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mf(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gf(a);if(i){var n=gf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yf(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,oidcStatus:e.oidcStatus,element:e.element,index:e.index,cbEdit:e.cbEdit,cbRemove:e.cbRemove,cbTags:e.cbTags,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver},t.copyToClipboard=t.copyToClipboard.bind(yf(t)),t.showQrCode=t.showQrCode.bind(yf(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(this.state.element.value).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"showQrCode",value:function(){Rn.sendMessage("App",{action:"showQrCode",value:this.state.element.value,metaData:this.state.coin.data.displayName+" - "+pe.t("coinElementUrl")})}},{key:"render",value:function(){var e=this,t=[];return this.state.element.tags&&this.state.element.tags.forEach((function(e,n){t.push(r.createElement("span",{key:n,className:"badge rounded-pill bg-secondary btn-icon"},e))})),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("div",{className:"row btn-icon-bottom"},r.createElement("div",{className:"col d-none d-md-block"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-link btn-icon","aria-hidden":"true"}),pe.t("coinElementUrl")))),r.createElement("div",{className:"col d-md-none"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-link","aria-hidden":"true"})))),r.createElement("div",{className:"col text-truncate"},r.createElement("span",{className:"btn-icon-right"},r.createElement("a",{href:this.state.element.value,target:"_blank",rel:"noreferrer noopener",title:this.state.element.value,className:"link-secondary"},this.state.element.value))),r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementCopy"),onClick:this.copyToClipboard},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementShowQrCode"),onClick:this.showQrCode},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementEdit"),onClick:function(t){return e.state.cbEdit(t,e.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementRemove"),onClick:function(t){return e.state.cbRemove(t,e.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementTags"),onClick:function(t){return e.state.cbTags(t,e.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}))))),r.createElement("div",{className:"row coin-tag"},r.createElement("div",{className:"col"},t)))}}])&&hf(t.prototype,n),o&&hf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const bf=vf;function wf(e){return wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(e)}function Ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==wf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==wf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===wf(o)?o:String(o)),r)}var o}function Sf(e,t){return Sf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sf(e,t)}function Cf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _f(e){return _f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_f(e)}var Af=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sf(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_f(a);if(i){var n=_f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cf(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={oidcStatus:e.oidcStatus,coin:e.coin,element:e.element,index:e.index,cbEdit:e.cbEdit,cbRemove:e.cbRemove,cbTags:e.cbTags,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver,showElement:!1},t.copyToClipboard=t.copyToClipboard.bind(Cf(t)),t.toggleShowValue=t.toggleShowValue.bind(Cf(t)),t.showQrCode=t.showQrCode.bind(Cf(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(this.state.element.value).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"toggleShowValue",value:function(e){e.preventDefault(),this.setState({showElement:!this.state.showElement})}},{key:"changeHide",value:function(){var e=this.state.element;e.hide=!e.hide,this.setState({element:e})}},{key:"showQrCode",value:function(){Rn.sendMessage("App",{action:"showQrCode",value:this.state.element.value,metaData:this.state.coin.data.displayName+" - "+pe.t("coinElementLogin")})}},{key:"render",value:function(){var e,t,n=this,o=[];return this.state.element.tags&&this.state.element.tags.forEach((function(e,t){o.push(r.createElement("span",{key:t,className:"badge rounded-pill bg-secondary btn-icon"},e))})),this.state.element.hide?(e=this.state.showElement?r.createElement("div",{className:"col text-truncate"},r.createElement("span",{className:"btn-icon-right"},this.state.element.value)):r.createElement("div",{className:"col text-truncate"},r.createElement("span",{className:"btn-icon-right"},"********")),t=r.createElement("a",{className:"link-secondary btn-icon-right",alt:pe.t("coinElementShow"),href:"#",onClick:this.toggleShowValue},r.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}))):e=r.createElement("div",{className:"col text-truncate"},r.createElement("span",{className:"btn-icon-right"},this.state.element.value)),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("div",{className:"row btn-icon-bottom"},r.createElement("div",{className:"col d-none d-md-block"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-user btn-icon","aria-hidden":"true"}),pe.t("coinElementLogin"))),t),r.createElement("div",{className:"col d-md-none"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-user","aria-hidden":"true"}))),t),e,r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementCopy"),onClick:this.copyToClipboard},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementShowQrCode"),onClick:this.showQrCode},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementEdit"),onClick:function(e){return n.state.cbEdit(e,n.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementRemove"),onClick:function(e){return n.state.cbRemove(e,n.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementTags"),onClick:function(e){return n.state.cbTags(e,n.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}))))),r.createElement("div",{className:"row coin-tag"},r.createElement("div",{className:"col"},o)))}}])&&Ef(t.prototype,n),o&&Ef(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const kf=Af;function Of(e){return Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(e)}function Pf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Of(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Of(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Of(o)?o:String(o)),r)}var o}function Nf(e,t){return Nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nf(e,t)}function Tf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function If(e){return If=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},If(e)}var Rf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nf(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=If(a);if(i){var n=If(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Of(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tf(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,oidcStatus:e.oidcStatus,element:e.element,index:e.index,cbEdit:e.cbEdit,cbRemove:e.cbRemove,cbTags:e.cbTags,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver,showPassword:!1},t.copyToClipboard=t.copyToClipboard.bind(Tf(t)),t.toggleShowPassword=t.toggleShowPassword.bind(Tf(t)),t.showQrCode=t.showQrCode.bind(Tf(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(this.state.element.value).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"toggleShowPassword",value:function(e){e.preventDefault(),this.setState({showPassword:!this.state.showPassword})}},{key:"showQrCode",value:function(){Rn.sendMessage("App",{action:"showQrCode",value:this.state.element.value,metaData:this.state.coin.data.displayName+" - "+pe.t("coinElementPassword")})}},{key:"render",value:function(){var e,t,n=this,o=[];return this.state.element.tags&&this.state.element.tags.forEach((function(e,t){o.push(r.createElement("span",{key:t,className:"badge rounded-pill bg-secondary btn-icon"},e))})),this.state.showPassword?(e=r.createElement("div",{className:"col"},r.createElement("code",{className:"d-none d-md-block"},this.state.element.value)),t=r.createElement("div",{className:"row d-md-none coin-tag"},r.createElement("div",{className:"col"},r.createElement("code",null,this.state.element.value)))):e=r.createElement("div",{className:"col text-truncate"},r.createElement("span",{className:"btn-icon-right"},"********")),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("div",{className:"row btn-icon-bottom"},r.createElement("div",{className:"col text-truncate d-none d-md-block"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-key btn-icon","aria-hidden":"true"}),pe.t("coinElementPassword"))),r.createElement("a",{className:"link-secondary btn-icon-right",alt:pe.t("coinElementShowPassword"),href:"#",onClick:this.toggleShowPassword},r.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}))),r.createElement("div",{className:"col d-md-none"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-key","aria-hidden":"true"}))),r.createElement("a",{className:"link-secondary btn-icon-right",alt:pe.t("coinElementShowPassword"),href:"#",onClick:this.toggleShowPassword},r.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}))),e,r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementCopy"),onClick:this.copyToClipboard},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementShowQrCode"),onClick:this.showQrCode},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementEdit"),onClick:function(e){return n.state.cbEdit(e,n.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementRemove"),onClick:function(e){return n.state.cbRemove(e,n.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementTags"),onClick:function(e){return n.state.cbTags(e,n.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}))))),r.createElement("div",{className:"row coin-tag"},r.createElement("div",{className:"col"},o)),t)}}])&&Pf(t.prototype,n),o&&Pf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Df=Rf;function xf(e){return xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(e)}function Mf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lf(r.key),r)}}function Lf(e){var t=function(e,t){if("object"!==xf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==xf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===xf(t)?t:String(t)}function Bf(e,t){return Bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bf(e,t)}function jf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ff(e){return Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ff(e)}var Uf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bf(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ff(a);if(i){var n=Ff(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===xf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jf(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={oidcStatus:e.oidcStatus,value:e.value,index:e.index,cbSave:e.cbSave,disableEdit:e.disableEdit,showAnswer:!1},t.copyToClipboard=t.copyToClipboard.bind(jf(t)),t.toggleShowAnswer=t.toggleShowAnswer.bind(jf(t)),t.showQrCode=t.showQrCode.bind(jf(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(this.state.value.answer).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"toggleShowAnswer",value:function(e){e.preventDefault(),this.setState({showAnswer:!this.state.showAnswer})}},{key:"showQrCode",value:function(){Rn.sendMessage("App",{action:"showQrCode",value:this.state.value.answer,metaData:this.state.value.question})}},{key:"render",value:function(){var e,t,n,o,a,i=this;return this.state.value.answer.length>4?(e=this.state.showAnswer?this.state.value.answer:this.state.value.answer.substring(0,2)+"[...]"+this.state.value.answer.slice(-2),t=r.createElement("a",{className:"link-secondary btn-icon-right",href:"#",alt:pe.t("coinElementShowAnswer"),onClick:this.toggleShowAnswer},r.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}))):e=this.state.value.answer,r.createElement("div",{className:"row"},r.createElement("div",{className:"col"},r.createElement("code",{className:"btn-icon-right"},this.state.value.question),t),r.createElement("div",{className:"col"},r.createElement("code",{className:"btn-icon-right"},e)),r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementCopy"),onClick:this.copyToClipboard},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementShowQrCode"),onClick:this.showQrCode},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})),r.createElement("button",(n={className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementEdit"),onClick:function(e){return i.state.cbEdit(e,i.state.index)},disabled:this.state.disableEdit},o="disabled",a="connected"!==this.state.oidcStatus,(o=Lf(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n),r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementRemove"),onClick:function(e){return i.state.cbRemove(e,i.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})))))}}])&&Mf(t.prototype,n),o&&Mf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Hf=Uf;function Vf(e){return Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(e)}function Kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Vf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Vf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Vf(o)?o:String(o)),r)}var o}function Wf(e,t){return Wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wf(e,t)}function zf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gf(e){return Gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gf(e)}var Xf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wf(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gf(a);if(i){var n=Gf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zf(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={value:e.value,index:e.index,wordsList:e.wordsList,cbSave:e.cbSave,cbCancel:e.cbCancel},t.changeQuestion=t.changeQuestion.bind(zf(t)),t.changeAnswer=t.changeAnswer.bind(zf(t)),t.generateAnswer=t.generateAnswer.bind(zf(t)),t}return t=c,n=[{key:"changeQuestion",value:function(e){var t=this.state.value;t.question=e.target.value,this.setState({value:t})}},{key:"changeAnswer",value:function(e){var t=this.state.value;t.answer=e.target.value,this.setState({value:t})}},{key:"randomWordsRangeList",value:function(e,t){var n=new Uint32Array(e);window.crypto.getRandomValues(n);for(var r=0;r<e;r++)for(;n[r]>=t;){var o=new Uint32Array(1);window.crypto.getRandomValues(o),n[r]=o[0]}return n}},{key:"generateAnswer",value:function(){var e=this.randomWordsRangeList(2,this.state.wordsList.length),t=this.state.wordsList[e[0]]+" "+this.state.wordsList[e[1]],n=this.state.value;n.answer=t,this.setState({value:n})}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("div",{className:"row"},r.createElement("div",{className:"col"},r.createElement("div",{className:"input-group mb-3"},r.createElement("span",{className:"input-group-text",id:"basic-addon1"},pe.t("coinElementQuestionQ")),r.createElement("input",{type:"text",className:"form-control",placeholder:pe.t("coinElementQuestionQPH"),value:this.state.value.question,onChange:this.changeQuestion})))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col"},r.createElement("div",{className:"input-group mb-3"},r.createElement("span",{className:"input-group-text",id:"basic-addon1"},pe.t("coinElementQuestionA")),r.createElement("input",{type:"text",className:"form-control",placeholder:pe.t("coinElementQuestionAPH"),value:this.state.value.answer,onChange:this.changeAnswer}),r.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.generateAnswer},r.createElement("i",{className:"fa fa-magic","aria-hidden":"true"}))))),r.createElement("div",{className:"mb-3 btn-group"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.state.cbCancel(t,e.state.index)}},pe.t("modalCancel")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return e.state.cbSave(t,e.state.value,e.state.index)},disabled:!this.state.value.answer},pe.t("modalOk"))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&Kf(t.prototype,n),o&&Kf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Jf=Xf;function qf(e){return qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(e)}function Yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qf(r.key),r)}}function Qf(e){var t=function(e,t){if("object"!==qf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==qf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===qf(t)?t:String(t)}function Zf(e,t){return Zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zf(e,t)}function $f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ed(e){return ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ed(e)}var td=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zf(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ed(a);if(i){var n=ed(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $f(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,oidcStatus:e.oidcStatus,element:e.element,index:e.index,closeButon:e.closeButon,cbRemove:e.cbRemove,cbSave:e.cbSave,cbTags:e.cbTags,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver,config:e.config,editList:[]},t.copyToClipboard=t.copyToClipboard.bind($f(t)),t.saveRow=t.saveRow.bind($f(t)),t.cancelRow=t.cancelRow.bind($f(t)),t.editRow=t.editRow.bind($f(t)),t.removeRow=t.removeRow.bind($f(t)),t.cbAddQuestion=t.cbAddQuestion.bind($f(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"copyToClipboard",value:function(e){navigator.clipboard.writeText(this.state.element.value[e].answer).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"saveRow",value:function(e,t,n){var r=this,o=this.state.element;o.value[n]?o.value[n]=t:o.value.push(t);var a=this.state.editList;-1!==a.indexOf(n)&&a.splice(a.indexOf(n),1),this.setState({element:o,editList:a},(function(){r.state.cbSave(e,r.state.element,r.state.index)}))}},{key:"cancelRow",value:function(e,t){var n=this.state.editList;-1!==n.indexOf(t)&&n.splice(n.indexOf(t),1),this.setState({editList:n})}},{key:"editRow",value:function(e,t){var n=this.state.editList;n.push(t),this.setState({editList:n})}},{key:"removeRow",value:function(e,t){var n=this,r=this.state.element;r.value.splice(t,1);var o=this.state.editList;-1!==o.indexOf(t)&&o.splice(o.indexOf(t),1),this.setState({editList:o,element:r},(function(){n.state.cbSave(e,n.state.element,n.state.index)}))}},{key:"cbAddQuestion",value:function(){var e=this.state.editList,t=this.state.element;e.push(t.value.length),t.value.push({question:"",answer:""}),this.setState({editList:e,element:t})}},{key:"render",value:function(){var e,t,n,o,a=this,i=[],s=[];return this.state.element.tags&&this.state.element.tags.forEach((function(e,t){i.push(r.createElement("span",{key:t,className:"badge rounded-pill bg-secondary btn-icon"},e))})),this.state.element.value.length?this.state.element.value.forEach((function(e,t){-1!==a.state.editList.indexOf(t)?s.push(r.createElement(Jf,{value:Object.assign({},e),index:t,wordsList:a.state.config.wordsList,cbSave:a.saveRow,cbCancel:a.cancelRow,key:t})):s.push(r.createElement(Hf,{value:Object.assign({},e),index:t,cbEdit:function(e){return a.editRow(e,t)},cbRemove:function(e){return a.removeRow(e,t)},key:t,disableEdit:!!a.state.editList.length,oidcStatus:a.state.oidcStatus}))})):s.push(r.createElement(Jf,{value:{question:"",answer:""},index:0,wordsList:this.state.config.wordsList,cbSave:this.saveRow,cbCancel:this.cancelRow,key:-1})),this.state.closeButon&&(e=r.createElement("div",{className:"row"},r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("modalClose"),onClick:function(e){return a.state.cbSave(e,a.state.element,a.state.index)}},pe.t("modalClose")))))),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("div",{className:"row btn-icon-bottom"},r.createElement("div",{className:"col d-none d-md-block"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-question-circle btn-icon","aria-hidden":"true"}),pe.t("coinElementSecretQuestions")))),r.createElement("div",{className:"col d-md-none"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-question-circle","aria-hidden":"true"})))),r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",(t={className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementAddQuestion"),onClick:this.cbAddQuestion,disabled:this.state.editList.length},n="disabled",o="connected"!==this.state.oidcStatus,(n=Qf(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t),r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementRemove"),onClick:function(e){return a.state.cbRemove(e,a.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementTags"),onClick:function(e){return a.state.cbTags(e,a.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}))))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col"},r.createElement("span",{className:"badge bg-info text-dark"},pe.t("coinElementQuestionQ"))),r.createElement("div",{className:"col"},r.createElement("span",{className:"badge bg-info text-dark"},pe.t("coinElementQuestionA"))),r.createElement("div",{className:"col"})),s,r.createElement("div",{className:"row coin-tag"},r.createElement("div",{className:"col"},i)),e)}}])&&Yf(t.prototype,n),o&&Yf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const nd=td;function rd(e){return rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(e)}function od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==rd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==rd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===rd(o)?o:String(o)),r)}var o}function ad(e,t){return ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ad(e,t)}function id(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sd(e){return sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sd(e)}var cd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ad(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sd(a);if(i){var n=sd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===rd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return id(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,oidcStatus:e.oidcStatus,element:e.element,index:e.index,cbEdit:e.cbEdit,cbRemove:e.cbRemove,cbTags:e.cbTags,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver},t.downloadFile=t.downloadFile.bind(id(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"downloadFile",value:function(){if(this.state.element.value.data){var e=$("#"+this.state.coin.name+"-"+this.state.index+"-download");e.attr("href","data:application/octet-stream;base64,"+this.state.element.value.data),e[0].click()}}},{key:"render",value:function(){var e=this,t=[];return this.state.element.tags&&this.state.element.tags.forEach((function(e,n){t.push(r.createElement("span",{key:n,className:"badge rounded-pill bg-secondary btn-icon"},e))})),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("div",{className:"row btn-icon-bottom"},r.createElement("div",{className:"col d-none d-md-block"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-file btn-icon","aria-hidden":"true"}),pe.t("coinElementFile")))),r.createElement("div",{className:"col d-md-none"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-file","aria-hidden":"true"})))),r.createElement("div",{className:"col text-truncate"},r.createElement("span",{className:"btn-icon-right"},r.createElement("code",null,this.state.element.value.name))),r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementDownload"),onClick:this.downloadFile},r.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementEdit"),onClick:function(t){return e.state.cbEdit(t,e.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementRemove"),onClick:function(t){return e.state.cbRemove(t,e.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementTags"),onClick:function(t){return e.state.cbTags(t,e.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}))))),r.createElement("div",{className:"row coin-tag"},r.createElement("div",{className:"col"},t)),r.createElement("a",{className:"upload",id:this.state.coin.name+"-"+this.state.index+"-download",download:this.state.element.value.name}))}}])&&od(t.prototype,n),o&&od(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const ld=cd;function ud(e){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(e)}function fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ud(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ud(o)?o:String(o)),r)}var o}function dd(e,t){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dd(e,t)}function pd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hd(e){return hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hd(e)}var md=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dd(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hd(a);if(i){var n=hd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ud(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pd(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={coin:e.coin,oidcStatus:e.oidcStatus,element:e.element,index:e.index,cbEdit:e.cbEdit,cbRemove:e.cbRemove,cbTags:e.cbTags,isDraggable:e.isDraggable,cbOnDragStart:e.cbOnDragStart,cbOnDragOver:e.cbOnDragOver,showElement:!1},t.copyToClipboard=t.copyToClipboard.bind(pd(t)),t.toggleShowValue=t.toggleShowValue.bind(pd(t)),t.showQrCode=t.showQrCode.bind(pd(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(this.state.element.value).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"toggleShowValue",value:function(e){e.preventDefault(),this.setState({showElement:!this.state.showElement})}},{key:"showQrCode",value:function(){Rn.sendMessage("App",{action:"showQrCode",value:this.state.element.value,metaData:this.state.coin.data.displayName+" - "+pe.t("coinElementMisc")})}},{key:"render",value:function(){var e,t,n,o=this,a=[];return this.state.element.tags&&this.state.element.tags.forEach((function(e,t){a.push(r.createElement("span",{key:t,className:"badge rounded-pill bg-secondary btn-icon"},e))})),this.state.element.hide?(this.state.showElement?(e=r.createElement("div",{className:"col"},r.createElement("span",{className:"btn-icon-right"},r.createElement("pre",{className:"d-none d-md-block"},this.state.element.value))),t=r.createElement("div",{className:"row d-md-none coin-tag"},r.createElement("div",{className:"col"},r.createElement("pre",null,this.state.element.value)))):e=r.createElement("div",{className:"col text-truncate"},r.createElement("span",{className:"btn-icon-right"},"********")),n=r.createElement("a",{className:"link-secondary btn-icon-right",alt:pe.t("coinElementShow"),href:"#",onClick:this.toggleShowValue},r.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}))):e=r.createElement("div",{className:"col"},r.createElement("span",{className:"btn-icon-right"},r.createElement("pre",null,this.state.element.value))),r.createElement("div",{draggable:this.state.isDraggable,onDragStart:this.state.cbOnDragStart,onDragOver:this.state.cbOnDragOver,id:this.state.coin.name+"-"+this.state.index,className:"border border-secondary rounded coin-element"},r.createElement("div",{className:"row btn-icon-bottom"},r.createElement("div",{className:"col d-none d-md-block"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-clone btn-icon","aria-hidden":"true"}),pe.t("coinElementMisc"))),n),r.createElement("div",{className:"col d-md-none"},r.createElement("span",{className:"btn-icon-right"},r.createElement("span",{className:"badge bg-primary"},r.createElement("i",{className:"fa fa-clone","aria-hidden":"true"}))),n),e,r.createElement("div",{className:"col"},r.createElement("div",{className:"btn-group float-end btn-icon",role:"group"},r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementCopy"),onClick:this.copyToClipboard},r.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementShowQrCode"),onClick:this.showQrCode},r.createElement("i",{className:"fa fa-qrcode","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementEdit"),onClick:function(e){return o.state.cbEdit(e,o.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementRemove"),onClick:function(e){return o.state.cbRemove(e,o.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})),r.createElement("button",{className:"btn btn-outline-secondary btn-sm",type:"button",title:pe.t("coinElementTags"),onClick:function(e){return o.state.cbTags(e,o.state.index)},disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"}))))),r.createElement("div",{className:"row coin-tag"},r.createElement("div",{className:"col"},a)),t)}}])&&fd(t.prototype,n),o&&fd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const yd=md;function gd(e){return gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(e)}function vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==gd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==gd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===gd(o)?o:String(o)),r)}var o}function bd(e,t){return bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bd(e,t)}function wd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ed(e){return Ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ed(e)}var Sd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bd(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ed(a);if(i){var n=Ed(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wd(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={tags:e.tags,allTags:e.allTags,cb:e.cb,inputValue:""},t.addTag=t.addTag.bind(wd(t)),t.deleteTag=t.deleteTag.bind(wd(t)),t.submitForm=t.submitForm.bind(wd(t)),t.changeInputValue=t.changeInputValue.bind(wd(t)),t.addTagFromAll=t.addTagFromAll.bind(wd(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"closeModal",value:function(e,t){this.state.cb&&this.state.cb(t,this.state.tags)}},{key:"changeInputValue",value:function(e){/\s/.test(e.target.value)?this.addTag():this.setState({inputValue:e.target.value})}},{key:"addTagFromAll",value:function(e,t){e.preventDefault();var n=this.state.tags;return n.push(t),this.setState({tags:n})}},{key:"addTag",value:function(){var e=this.state.tags;return this.state.inputValue&&e.push(this.state.inputValue.trim()),this.setState({tags:e,inputValue:""})}},{key:"deleteTag",value:function(e,t){e.preventDefault();var n=this.state.tags;n.splice(t,1),this.setState({tags:n})}},{key:"submitForm",value:function(e){var t=this;e.preventDefault();var n=this.state.tags;this.state.inputValue&&n.push(this.state.inputValue),this.setState({tags:n,inputValue:""},(function(){t.closeModal(e,!0)}))}},{key:"render",value:function(){var e=this,t=[],n=[];return this.state.allTags.forEach((function(t,o){-1===e.state.tags.indexOf(t)&&n.push(r.createElement("a",{href:"#",onClick:function(n){return e.addTagFromAll(n,t)},key:o},r.createElement("span",{className:"badge rounded-pill bg-secondary btn-icon"},t)))})),this.state.tags.forEach((function(n,o){t.push(r.createElement("a",{href:"#",onClick:function(t){return e.deleteTag(t,o)},key:o},r.createElement("span",{className:"badge rounded-pill bg-secondary btn-icon"},n,r.createElement("span",{className:"badge badge-light btn-icon-right"},r.createElement("i",{className:"fas fa-times"})))))})),r.createElement("div",{className:"modal",tabIndex:"-1",id:"modalCoinElementTags"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("CoinElementTags")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(t){return e.closeModal(t,!1)}})),r.createElement("form",{onSubmit:function(t){return e.submitForm(t)}},r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"coinDisplayName",className:"form-label"},pe.t("coinUsedTags"))),r.createElement("div",{className:"mb-3"},n),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"coinDisplayName",className:"form-label"},pe.t("coinDisplayName")),r.createElement("div",{className:"input-group mb-3"},r.createElement("input",{type:"text",maxLength:"128",className:"form-control",id:"coinDisplayName",value:this.state.inputValue,onChange:function(t){return e.changeInputValue(t)}}),r.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.addTag},r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}))),t)),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.closeModal(t,!1)}},pe.t("modalClose")),r.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return e.submitForm(t)}},pe.t("modalOk")))))))}}])&&vd(t.prototype,n),o&&vd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Cd=Sd;function _d(e){return _d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(e)}function Ad(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_d(o)?o:String(o)),r)}var o}function kd(e,t){return kd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kd(e,t)}function Od(e){return Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Od(e)}var Pd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kd(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Od(a);if(i){var n=Od(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,cb:e.cb,safe:e.safe,coin:e.coin},t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"render",value:function(){var e=this;return r.createElement("div",{className:"modal",tabIndex:"-1",id:"exportCoinModal"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("exportCoin")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(t){return e.state.cb(t)}})),r.createElement("div",{className:"modal-body"},r.createElement(cu,{config:this.state.config,safe:this.state.safe,content:[this.state.coin],id:this.state.coin.name,name:this.state.coin.data.displayName})),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.state.cb(t)}},pe.t("modalClose"))))))}}])&&Ad(t.prototype,n),o&&Ad(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Nd=Pd;function Td(e){return Td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Td(e)}function Id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Td(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Td(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Td(o)?o:String(o)),r)}var o}function Rd(e,t){return Rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rd(e,t)}function Dd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xd(e){return xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xd(e)}var Md=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rd(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xd(a);if(i){var n=xd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Td(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dd(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,oidcStatus:e.oidcStatus,safe:e.safe,coin:e.coin,cbEditHeader:e.cbEditHeader,cbRemoveCoin:e.cbRemoveCoin,cbSaveCoin:e.cbSaveCoin,allTags:e.allTags,curAllTags:[],showAddElement:!1,newElementType:!1,editElementList:[],curElementIndex:-1,showConfirm:!1,showEditTags:!1,showExportCoin:!1,sortRowsEnabled:!1,overId:!1,editCoinTags:!0},t.exportCoin=t.exportCoin.bind(Dd(t)),t.exportCoinClose=t.exportCoinClose.bind(Dd(t)),t.addSecretElement=t.addSecretElement.bind(Dd(t)),t.cancelEditElement=t.cancelEditElement.bind(Dd(t)),t.editElement=t.editElement.bind(Dd(t)),t.removeElement=t.removeElement.bind(Dd(t)),t.removeElementConfirm=t.removeElementConfirm.bind(Dd(t)),t.setElementTags=t.setElementTags.bind(Dd(t)),t.setElementTagsConfirm=t.setElementTagsConfirm.bind(Dd(t)),t.saveElement=t.saveElement.bind(Dd(t)),t.onDrop=t.onDrop.bind(Dd(t)),t.onDragOver=t.onDragOver.bind(Dd(t)),t.setCoinTags=t.setCoinTags.bind(Dd(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"exportCoin",value:function(){var e=this;this.setState({showExportCoin:!0},(function(){var t=new bootstrap.Modal(document.getElementById("exportCoinModal"),{keyboard:!1});t._element.addEventListener("hidden.bs.modal",(function(t){e.exportCoinClose()})),t.show()}))}},{key:"exportCoinClose",value:function(){bootstrap.Modal.getOrCreateInstance(document.querySelector("#exportCoinModal")).hide(),this.setState({showExportCoin:!1})}},{key:"addSecretElement",value:function(){var e,t=!1,n=!1;this.state.coin.data.rows.forEach((function(e,r){"url"===e.type?t=!0:"login"===e.type&&(n=!0)})),e=t&&n?"password":t?"login":"url",this.setState({showAddElement:!0,newElementType:e})}},{key:"setNewElementType",value:function(e){this.setState({newElementType:e.target.value})}},{key:"editElement",value:function(e,t){e.preventDefault();var n=this.state.editElementList;n.push(t),this.setState({editElementList:n})}},{key:"removeElement",value:function(e,t){e.preventDefault(),this.setState({curElementIndex:t,showConfirm:!0},(function(){new bootstrap.Modal(document.getElementById("removeElement"),{keyboard:!1}).show()}))}},{key:"removeElementConfirm",value:function(e){if(e){var t=this.state.coin;t.data.rows.splice(this.state.curElementIndex,1),this.state.cbSaveCoin(!0,t.name,t.data,!0)}bootstrap.Modal.getOrCreateInstance(document.querySelector("#removeElement")).hide(),this.setState({showConfirm:!1})}},{key:"setElementTags",value:function(e,t){e.preventDefault(),this.setState({curElementIndex:t,curTags:this.state.coin.data.rows[t].tags||[],showEditTags:!0,editCoinTags:!1,curAllTags:[]},(function(){new bootstrap.Modal(document.getElementById("modalCoinElementTags"),{keyboard:!1}).show()}))}},{key:"setCoinTags",value:function(){this.setState({curTags:this.state.coin.data.tags||[],showEditTags:!0,editCoinTags:!0,curAllTags:this.state.allTags},(function(){new bootstrap.Modal(document.getElementById("modalCoinElementTags"),{keyboard:!1}).show()}))}},{key:"setElementTagsConfirm",value:function(e,t){if(e){var n=this.state.coin;t.length?this.state.editCoinTags?n.data.tags=t:n.data.rows[this.state.curElementIndex].tags=t:this.state.editCoinTags?delete n.data.tags:delete n.data.rows[this.state.curElementIndex].tags,this.state.cbSaveCoin(!0,n.name,n.data,!0)}bootstrap.Modal.getOrCreateInstance(document.querySelector("#modalCoinElementTags")).hide(),this.setState({showEditTags:!1})}},{key:"saveElement",value:function(e,t,n){var r=this,o=this.state.coin;-1===n?o.data.rows.push(t):(o.data.rows[n]=t,this.cancelEditElement(e,n)),this.setState({showAddElement:!1,newElementType:!1},(function(){r.state.cbSaveCoin(!0,o.name,o.data,!0)}))}},{key:"cancelEditElement",value:function(e,t){if(e&&e.preventDefault(),-1===t)this.setState({showAddElement:!1,newElementType:!1});else{var n=this.state.editElementList;n.indexOf(t)>-1&&n.splice(n.indexOf(t),1),this.setState({editElementList:n})}}},{key:"copyToClipboard",value:function(e){navigator.clipboard.writeText(e).then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageCopyToClipboard")})}))}},{key:"sortRows",value:function(){var e=this;this.setState({sortRowsEnabled:!this.state.sortRowsEnabled},(function(){e.state.sortRowsEnabled?Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSortEnabled")}):Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSortDisabled")})}))}},{key:"switchRows",value:function(e,t){var n=this.state.coin,r=n.data.rows[e];n.data.rows.splice(e,1),n.data.rows.splice(t,0,r),this.state.cbSaveCoin(!0,n.name,n.data,!0)}},{key:"onDragStart",value:function(e){e.dataTransfer.setData("text",e.target.id)}},{key:"onDrop",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("text").split("-");t&&2===t.length&&t[0]===this.state.coin.name&&this.switchRows(parseInt(t[1]),parseInt(this.state.overId))}},{key:"onDragOver",value:function(e){for(var t=e.target;t;){if(t.draggable){var n=t.id.split("-");n&&2===n.length&&n[0]===this.state.coin.name&&this.setState({overId:n[1]});break}t=t.parentElement}e.preventDefault()}},{key:"toggleAccordion",value:function(e){e.preventDefault(),$("#collapse-"+this.state.coin.name).collapse("toggle")}},{key:"render",value:function(){var e,t,n,o,a,i,s,c,l=this,u=[],f=[],d=[],p=[];switch(this.state.coin.data.icon&&(e=r.createElement("i",{className:this.state.coin.data.icon+" fa btn-icon","aria-hidden":"true"})),this.state.coin.data.tags&&this.state.coin.data.tags.forEach((function(e,t){p.push(r.createElement("span",{className:"badge rounded-pill bg-secondary btn-icon btn-icon-top",key:t},e))})),this.state.showAddElement&&(t=r.createElement("div",{className:"input-group mb-3"},r.createElement("span",{className:"input-group-text",id:"basic-addon1"},pe.t("coinElementType")),r.createElement("select",{className:"form-select",id:"addElement",onChange:function(e){return l.setNewElementType(e)},value:this.state.newElementType},r.createElement("option",{value:"url"},pe.t("coinElementTypeUrl")),r.createElement("option",{value:"login"},pe.t("coinElementTypeLogin")),r.createElement("option",{value:"password"},pe.t("coinElementTypePassword")),r.createElement("option",{value:"secretQuestion"},pe.t("coinElementTypeSecretQuestion")),r.createElement("option",{value:"file"},pe.t("coinElementTypeFile")),r.createElement("option",{value:"misc"},pe.t("coinElementTypeMisc"))))),this.state.newElementType){case"url":n=r.createElement(Cu,{coin:this.state.coin,element:{type:this.state.newElementType,value:""},index:-1,cbSave:this.saveElement,cbCancel:this.cancelEditElement}),o=r.createElement("hr",null);break;case"login":n=r.createElement(Tu,{coin:this.state.coin,element:{type:this.state.newElementType,value:""},index:-1,cbSave:this.saveElement,cbCancel:this.cancelEditElement}),o=r.createElement("hr",null);break;case"password":n=r.createElement(Qu,{config:this.state.config,coin:this.state.coin,element:{type:this.state.newElementType,value:""},index:-1,cbSave:this.saveElement,cbCancel:this.cancelEditElement}),o=r.createElement("hr",null);break;case"secretQuestion":n=r.createElement(nd,{config:this.state.config,coin:this.state.coin,element:{type:this.state.newElementType,value:[]},index:-1,closeButon:!0,cbSave:this.saveElement,cbRemove:this.removeElement,cbCancel:this.cancelEditElement,cbTags:function(e){return l.setElementTags(e,index)}}),o=r.createElement("hr",null);break;case"file":n=r.createElement(of,{coin:this.state.coin,element:{type:this.state.newElementType,value:{}},index:-1,cbSave:this.saveElement,cbCancel:this.cancelEditElement}),o=r.createElement("hr",null);break;case"misc":n=r.createElement(df,{coin:this.state.coin,element:{type:this.state.newElementType,value:""},index:-1,cbSave:this.saveElement,cbCancel:this.cancelEditElement}),o=r.createElement("hr",null)}this.state.showConfirm&&(a=r.createElement(Tr,{name:"removeElement",title:pe.t("removeElementTitle"),message:pe.t("removeElementMessage"),cb:this.removeElementConfirm})),this.state.showEditTags&&(i=r.createElement(Cd,{tags:this.state.curTags,allTags:this.state.curAllTags,cb:this.setElementTagsConfirm})),this.state.showExportCoin&&(s=r.createElement(Nd,{config:this.state.config,cb:this.exportCoinClose,safe:this.state.safe,coin:this.state.coin})),this.state.coin.data.rows.forEach((function(e,t){switch(e.type){case"url":-1===l.state.editElementList.indexOf(t)?u.push(r.createElement(bf,{key:t,coin:l.state.coin,element:e,index:t,cbEdit:l.editElement,cbRemove:l.removeElement,cbTags:function(e){return l.setElementTags(e,t)},isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver,oidcStatus:l.state.oidcStatus})):u.push(r.createElement(Cu,{key:t,coin:l.state.coin,element:e,index:t,cbSave:l.saveElement,cbCancel:l.cancelEditElement,isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver}));break;case"login":e.hideMenu||f.push({type:"login",value:e.value,tags:(e.tags||[pe.t("coinElementLogin")]).join(" ")}),-1===l.state.editElementList.indexOf(t)?u.push(r.createElement(kf,{key:t,coin:l.state.coin,element:e,index:t,cbEdit:l.editElement,cbRemove:l.removeElement,cbTags:function(e){return l.setElementTags(e,t)},isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver,oidcStatus:l.state.oidcStatus})):u.push(r.createElement(Tu,{key:t,coin:l.state.coin,element:e,index:t,cbSave:l.saveElement,cbCancel:l.cancelEditElement,isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver}));break;case"password":e.hideMenu||f.push({type:"password",value:e.value,tags:(e.tags||[pe.t("coinElementPassword")]).join(" ")}),-1===l.state.editElementList.indexOf(t)?u.push(r.createElement(Df,{key:t,coin:l.state.coin,element:e,index:t,cbEdit:l.editElement,cbRemove:l.removeElement,cbTags:function(e){return l.setElementTags(e,t)},isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver,oidcStatus:l.state.oidcStatus})):u.push(r.createElement(Qu,{key:t,config:l.state.config,coin:l.state.coin,element:e,index:t,cbSave:l.saveElement,cbCancel:l.cancelEditElement,isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver}));break;case"secretQuestion":u.push(r.createElement(nd,{key:t,config:l.state.config,coin:l.state.coin,element:e,index:t,closeButon:!1,cbSave:l.saveElement,cbRemove:l.removeElement,cbCancel:l.cancelEditElement,cbTags:function(e){return l.setElementTags(e,t)},isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver,oidcStatus:l.state.oidcStatus}));break;case"file":-1===l.state.editElementList.indexOf(t)?u.push(r.createElement(ld,{key:t,coin:l.state.coin,element:e,index:t,cbEdit:l.editElement,cbRemove:l.removeElement,cbTags:function(e){return l.setElementTags(e,t)},isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver,oidcStatus:l.state.oidcStatus})):u.push(r.createElement(of,{key:t,coin:l.state.coin,element:e,index:t,cbSave:l.saveElement,cbCancel:l.cancelEditElement,isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver}));break;case"misc":-1===l.state.editElementList.indexOf(t)?u.push(r.createElement(yd,{key:t,coin:l.state.coin,element:e,index:t,cbEdit:l.editElement,cbRemove:l.removeElement,cbTags:function(e){return l.setElementTags(e,t)},isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver,oidcStatus:l.state.oidcStatus})):u.push(r.createElement(df,{key:t,coin:l.state.coin,element:e,index:t,cbSave:l.saveElement,cbCancel:l.cancelEditElement,isDraggable:l.state.sortRowsEnabled,cbOnDragStart:l.onDragStart,cbOnDragOver:l.onDragOver}))}})),f.length<=2?f.forEach((function(e,t){"login"===e.type?d.push(r.createElement("button",{key:t,type:"button",className:"btn btn-secondary",onClick:function(t){return l.copyToClipboard(e.value)},title:e.tags},r.createElement("i",{className:"fa fa-user","aria-hidden":"true"}))):d.push(r.createElement("button",{key:t,type:"button",className:"btn btn-secondary",onClick:function(t){return l.copyToClipboard(e.value)},title:e.tags},r.createElement("i",{className:"fa fa-key","aria-hidden":"true"})))})):d.push(r.createElement("button",{key:0,type:"button",className:"btn btn-secondary",onClick:function(e){return l.toggleAccordion(e)}},r.createElement("i",{className:"fa fa-user btn-icon","aria-hidden":"true"}),r.createElement("i",{className:"fa fa-key btn-icon","aria-hidden":"true"}),r.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"}))),c=r.createElement("div",{className:"input-group"},d);var h="btn btn-sm";return this.state.sortRowsEnabled?h+=" btn-primary":h+=" btn-secondary",r.createElement("div",{className:"col"},r.createElement("div",{className:"accordion",id:"coin-"+this.state.coin.name},r.createElement("div",{className:"accordion-item"},r.createElement("h2",{className:"accordion-header",id:"heading-"+this.state.coin.name},r.createElement("div",{className:"btn-toolbar justify-content-between",role:"toolbar","aria-label":"Toolbar with button groups"},r.createElement("div",{className:"btn-group text-truncate",role:"group","aria-label":"First group"},r.createElement("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse-"+this.state.coin.name,"aria-expanded":"false","aria-controls":"collapse-"+this.state.coin.name},e,this.state.coin.data.displayName)),c)),r.createElement("div",{id:"collapse-"+this.state.coin.name,className:"accordion-collapse collapse","aria-labelledby":"heading-"+this.state.coin.name,"data-bs-parent":"#coin-"+this.state.coin.name},r.createElement("div",{className:"accordion-body"},r.createElement("div",{className:"mb-3",role:"group"},p,r.createElement("div",{className:"btn-group float-end",role:"group"},r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(e){return l.state.cbEditHeader(l.state.coin.name,l.state.coin.data)},disabled:"connected"!==this.state.oidcStatus,title:pe.t("editCoinHeader")},r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{type:"button",className:h,onClick:function(e){return l.sortRows()},disabled:"connected"!==this.state.oidcStatus,title:pe.t("sortCoin")},r.createElement("i",{className:"fa fa-sort","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.exportCoin,title:pe.t("exportCoin")},r.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.addSecretElement,disabled:"connected"!==this.state.oidcStatus,title:pe.t("addSecretElement")},r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.setCoinTags,disabled:"connected"!==this.state.oidcStatus,title:pe.t("setCoinTags")},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(e){return l.state.cbRemoveCoin(l.state.coin.name,l.state.coin.data.displayName)},disabled:"connected"!==this.state.oidcStatus,title:pe.t("removeCoin")},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}))))," ",t,n,o,r.createElement("div",{onDrop:this.onDrop,onDragOver:this.onDragOver},u)))),a,i,s))}}])&&Id(t.prototype,n),o&&Id(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Ld=Md;function Bd(e){return Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(e)}function jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Bd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Bd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Bd(o)?o:String(o)),r)}var o}function Fd(e,t){return Fd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fd(e,t)}function Ud(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hd(e){return Hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hd(e)}function Vd(e){return e.safeContent&&e.safe.name&&e.safeContent[e.safe.name]?e.safeContent[e.safe.name].unlockedCoinList:[]}function Kd(e){var t=[];return e.forEach((function(e,n){e.data.tags&&e.data.tags.forEach((function(e){-1===t.indexOf(e)&&t.push(e)}))})),t.sort()}var Wd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fd(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hd(a);if(i){var n=Hd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Bd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ud(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,oidcStatus:e.oidcStatus,safe:e.safe,safeContent:e.safeContent,iconList:e.iconList,filteredCoinList:Vd(e),filter:"",coinEditMode:0,coinEditName:!1,coinEditContent:!1,removeCoinMessage:!1,filterTimeout:!1,filtering:!1,showModalManageSafe:!1,selectedTags:[],allTags:Kd(Vd(e))},t.reloadSafe=t.reloadSafe.bind(Ud(t)),t.editSafe=t.editSafe.bind(Ud(t)),t.unlockSafe=t.unlockSafe.bind(Ud(t)),t.unlockSafeCallback=t.unlockSafeCallback.bind(Ud(t)),t.removeSafe=t.removeSafe.bind(Ud(t)),t.removeSafeConfirm=t.removeSafeConfirm.bind(Ud(t)),t.lockSafe=t.lockSafe.bind(Ud(t)),t.changeFilter=t.changeFilter.bind(Ud(t)),t.addCoin=t.addCoin.bind(Ud(t)),t.editCoinHeader=t.editCoinHeader.bind(Ud(t)),t.manageSafe=t.manageSafe.bind(Ud(t)),t.manageSafeClose=t.manageSafeClose.bind(Ud(t)),t.removeCoin=t.removeCoin.bind(Ud(t)),t.removeCoinConfirm=t.removeCoinConfirm.bind(Ud(t)),t.coinSaveCallback=t.coinSaveCallback.bind(Ud(t)),t.clearSearch=t.clearSearch.bind(Ud(t)),t.selectTag=t.selectTag.bind(Ud(t)),t}return t=c,n=[{key:"reloadSafe",value:function(){Rn.sendMessage("App",{action:"loadSafe",target:this.state.safe.name})}},{key:"editSafe",value:function(){Rn.sendMessage("App",{action:"editSafe",target:this.state.safe.name})}},{key:"unlockSafe",value:function(){new bootstrap.Modal(document.getElementById("modalUnlockSafe"),{keyboard:!1}).show()}},{key:"unlockSafeCallback",value:function(e,t,n,r,o){e&&(Rn.sendMessage("App",{action:"setSafeKey",target:this.state.safe,key:t,keepUnlocked:n,unlockKeyName:r,removeStorage:!1,masterkeyData:o}),Rn.sendMessage("Notification",{type:"info",message:pe.t("unlockedSafe")})),bootstrap.Modal.getOrCreateInstance(document.querySelector("#modalUnlockSafe")).hide()}},{key:"lockSafe",value:function(){Rn.sendMessage("App",{action:"setSafeKey",target:this.state.safe,key:!1,removeStorage:!0}),Rn.sendMessage("Notification",{type:"info",message:pe.t("lockedSafe")})}},{key:"removeSafe",value:function(){new bootstrap.Modal(document.getElementById("removeSafe"),{keyboard:!1}).show()}},{key:"removeSafeConfirm",value:function(e){var t=this;e&&(this.state.safe.offline?(Rn.sendMessage("App",{action:"removeSafe",safe:this.state.safe}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageRemoveSafe")})):Xn.request(this.state.config.safe_endpoint+"/"+this.state.safe.name,"DELETE").then((function(){Rn.sendMessage("App",{action:"removeSafe",safe:t.state.safe}),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageRemoveSafe")})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSaveSafe")})}))),bootstrap.Modal.getOrCreateInstance(document.querySelector("#removeSafe")).hide()}},{key:"changeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"addCoin",value:function(){this.setState({coinEditName:!1,name:!1,coinEditContent:{displayName:"",rows:[]}},(function(){new bootstrap.Modal(document.getElementById("modalCoinEdit"),{keyboard:!1}).show()}))}},{key:"editCoinHeader",value:function(e,t){this.setState({coinEditName:e,coinEditContent:t},(function(){new bootstrap.Modal(document.getElementById("modalCoinEdit"),{keyboard:!1}).show()}))}},{key:"removeCoin",value:function(e,t){this.setState({coinEditName:e,removeCoinMessage:pe.t("removeCoinMessage",{name:t||e})},(function(){new bootstrap.Modal(document.getElementById("removeCoin"),{keyboard:!1}).show()}))}},{key:"removeCoinConfirm",value:function(e){var t=this;e&&(this.state.safe.offline?(Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSuccessCoinRemove")}),Rn.sendMessage("App",{action:"removeCoin",target:this.state.safe,coin:this.state.coinEditName})):Xn.request(this.state.config.safe_endpoint+"/"+this.state.safe.name+"/coin/"+this.state.coinEditName,"DELETE").then((function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSuccessCoinRemove")}),Rn.sendMessage("App",{action:"removeCoin",target:t.state.safe,coin:t.state.coinEditName})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorCoinRemove")})}))),bootstrap.Modal.getOrCreateInstance(document.querySelector("#removeCoin")).hide()}},{key:"coinSaveCallback",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=bootstrap.Modal.getOrCreateInstance(document.querySelector("#modalCoinEdit"));if(a&&a.hide(),e){if(n.lastUpdated=Math.floor(Date.now()/1e3),t){if(this.state.safe.offline){var i={name:t,data:!1};return o&&Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSuccessCoinSave")}),Rn.sendMessage("App",{action:"updateCoin",target:this.state.safe,encCoin:i,unlockedCoin:{name:t,data:n}}),Promise.resolve("ok")}return new Cn(n).setProtectedHeader({alg:this.state.safe.alg_type,enc:this.state.safe.enc_type,sign_thumb:this.state.config.sign_thumb}).encrypt(this.state.safeContent[this.state.safe.name].key).then((function(e){var a={name:t,data:e};return Xn.request(r.state.config.safe_endpoint+"/"+r.state.safe.name+"/coin/"+t,"PUT",a).then((function(){o&&Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSuccessCoinSave")}),Rn.sendMessage("App",{action:"updateCoin",target:r.state.safe,encCoin:a,unlockedCoin:{name:t,data:n}})})).catch((function(){o&&Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorCoinSave")})}))}))}return this.state.safe.offline?(i={name:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),data:!1},o&&Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSuccessCoinSave")}),Rn.sendMessage("App",{action:"updateCoin",target:this.state.safe,encCoin:i,unlockedCoin:{name:i.name,data:n},cb:this.scrollToCoin}),Promise.resolve("ok")):new Cn(n).setProtectedHeader({alg:this.state.safe.alg_type,enc:this.state.safe.enc_type,sign_thumb:this.state.config.sign_thumb}).encrypt(this.state.safeContent[this.state.safe.name].key).then((function(e){var t={name:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),data:e};return Xn.request(r.state.config.safe_endpoint+"/"+r.state.safe.name+"/coin","POST",t).then((function(){o&&Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSuccessCoinSave")}),Rn.sendMessage("App",{action:"updateCoin",target:r.state.safe,encCoin:t,unlockedCoin:{name:t.name,data:n},cb:r.scrollToCoin})})).catch((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorCoinSave")})}))}))}return $.Deferred().reject("No can do")}},{key:"scrollToCoin",value:function(e){var t=document.getElementById("coin-"+e);t&&t.scrollIntoView()}},{key:"manageSafe",value:function(){var e=this;this.setState({showModalManageSafe:!0},(function(){var t=new bootstrap.Modal(document.getElementById("manageSafe"),{keyboard:!1});t._element.addEventListener("hidden.bs.modal",(function(t){e.manageSafeClose()})),t.show()}))}},{key:"manageSafeClose",value:function(){bootstrap.Modal.getOrCreateInstance(document.querySelector("#manageSafe")).hide(),this.setState({showModalManageSafe:!1})}},{key:"clearSearch",value:function(){this.setState({filter:"",selectedTags:[]})}},{key:"selectTag",value:function(e,t){e.preventDefault();var n=this.state.selectedTags;n.push(t),this.setState({selectedTags:n})}},{key:"deleteTag",value:function(e,t){e.preventDefault();var n=this.state.selectedTags;n.splice(t,1),this.setState({selectedTags:n})}},{key:"render",value:function(){var e,t,n,o,a=this,i=[],s=this.state.safe&&this.state.safeContent&&this.state.safeContent[this.state.safe.name]&&this.state.safeContent[this.state.safe.name].key,c=[],l=[],u=[];return(s||this.state.safe.offline)&&this.state.filteredCoinList.forEach((function(e,t){i.push(r.createElement(Ld,{config:a.state.config,coin:e,safe:a.state.safe,cbEditHeader:a.editCoinHeader,cbRemoveCoin:a.removeCoin,cbSaveCoin:a.coinSaveCallback,oidcStatus:a.state.oidcStatus,allTags:a.state.allTags,key:t})),e.data.tags&&(e.data.tags.forEach((function(e){-1===l.indexOf(e)&&-1===a.state.selectedTags.indexOf(e)&&l.push(e)})),l.sort()),u=[],l.forEach((function(e,n){u.push(r.createElement("li",{key:t+"-"+n},r.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return a.selectTag(t,e)}},e)))}))})),this.state.safe.offline?t=r.createElement("div",{className:"mb-3"},r.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.createElement("div",{className:"input-group mb-3"},r.createElement("input",{type:"text",className:"form-control",placeholder:pe.t("secretFilter"),id:"coinFilter",name:"coinFilter",value:this.state.filter,onChange:this.changeFilter}),r.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle input-group-append border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:!l.length},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"})),r.createElement("ul",{className:"dropdown-menu"},u),r.createElement("span",{className:"input-group-append"},r.createElement("button",{className:"btn btn-outline-secondary border",type:"button",onClick:this.clearSearch},r.createElement("i",{className:"fa fa-times"})))))):this.state.safe&&this.state.safeContent&&this.state.safeContent[this.state.safe.name]&&this.state.safeContent[this.state.safe.name].key?(e=r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.lockSafe,title:pe.t("safeLock")},r.createElement("i",{className:"fa fa-lock","aria-hidden":"true"})),t=r.createElement("div",{className:"mb-3"},r.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.createElement("div",{className:"input-group mb-3"},r.createElement("input",{type:"text",className:"form-control",placeholder:pe.t("secretFilter"),id:"coinFilter",name:"coinFilter",value:this.state.filter,onChange:this.changeFilter}),r.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle input-group-append border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:!l.length},r.createElement("i",{className:"fa fa-tags","aria-hidden":"true"})),r.createElement("ul",{className:"dropdown-menu"},u),r.createElement("span",{className:"input-group-append"},r.createElement("button",{className:"btn btn-outline-secondary border",type:"button",onClick:this.clearSearch},r.createElement("i",{className:"fa fa-times"}))))))):e=r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.unlockSafe,title:pe.t("safeUnlock")},r.createElement("i",{className:"fa fa-unlock","aria-hidden":"true"})),this.state.showModalManageSafe&&(o=r.createElement(yu,{config:this.state.config,safe:this.state.safe,safeContent:this.state.safeContent,cbSaveCoin:this.coinSaveCallback,oidcStatus:this.state.oidcStatus,cbClose:this.manageSafeClose})),this.state.safe.updated&&(n=r.createElement("span",{className:"btn-icon-right"},pe.t("updatedSafe"))),this.state.selectedTags.forEach((function(e,t){c.push(r.createElement("a",{href:"#",onClick:function(e){return a.deleteTag(e,t)},key:t},r.createElement("span",{className:"badge rounded-pill bg-secondary btn-icon"},e,r.createElement("span",{className:"badge badge-light btn-icon-right"},r.createElement("i",{className:"fas fa-times"})))))})),r.createElement("div",null,r.createElement("div",{className:"alert alert-primary text-center",role:"alert"},this.state.safe.display_name||this.state.safe.name,n,r.createElement("div",{className:"btn-group float-end",role:"group"},e,r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.reloadSafe,disabled:this.state.safe.offline||!s||"connected"!==this.state.oidcStatus,title:pe.t("reloadSafe")},r.createElement("i",{className:"fa fa-refresh","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.editSafe,disabled:this.state.safe.offline||!s||"connected"!==this.state.oidcStatus,title:pe.t("editSafe")},r.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.manageSafe,disabled:!s&&!this.state.safe.offline,title:pe.t("manageSafe")},r.createElement("i",{className:"fa fa-cogs","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.addCoin,disabled:!(s&&"connected"===this.state.oidcStatus||this.state.safe.offline),title:pe.t("addCoin")},r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})),r.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(e){return a.removeSafe()},disabled:!(s&&"connected"===this.state.oidcStatus||this.state.safe.offline),title:pe.t("removeSafe")},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"})))),t,r.createElement("div",{className:"btn-icon-top"},c),r.createElement("div",{className:"row row-cols-1 row-cols-sm-1 row-cols-md-1 row-cols-lg-2"},i),r.createElement(vo,{config:this.state.config,safe:this.state.safe,safeContent:this.state.safeContent,allowKeepUnlocked:!0,cb:this.unlockSafeCallback}),r.createElement(Ro,{editMode:this.state.coinEditMode,name:this.state.coinEditName,content:this.state.coinEditContent,cb:this.coinSaveCallback,iconListOrig:this.state.iconList}),o,r.createElement(Tr,{name:"removeSafe",title:pe.t("removeSafeTitle"),message:pe.t("removeSafeMessage",{name:this.state.safe.display_name||this.state.safe.name}),cb:this.removeSafeConfirm}),r.createElement(Tr,{name:"removeCoin",title:pe.t("removeCoinTitle"),message:this.state.removeCoinMessage,cb:this.removeCoinConfirm}))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){var n,r,o,a,i,s=Object.assign({},e);return"connected"!==e.oidcStatus&&"timeout"!==e.oidcStatus||(t.filter||t.selectedTags.length?s.filteredCoinList=(n=s.safeContent[s.safe.name].unlockedCoinList,r=t.filter,o=t.selectedTags,a=[],i=[],r?n.forEach((function(e){e.data.displayName.toUpperCase().search(r.toUpperCase())>-1&&a.push(e)})):a=n,o.length?a.forEach((function(e){(function(e,t){var n=0;return e.forEach((function(e){-1!==t.indexOf(e)&&n++})),n===t.length})(e.data.tags||[],o)&&i.push(e)})):i=a,i):s.filteredCoinList=s.safeContent[s.safe.name].unlockedCoinList,s.allTags=Kd(s.safeContent[s.safe.name].unlockedCoinList)),s}}],n&&jd(t.prototype,n),o&&jd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const zd=Wd;function Gd(e){return Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(e)}function Xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Gd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Gd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Gd(o)?o:String(o)),r)}var o}function Jd(e,t){return Jd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jd(e,t)}function qd(e){return qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qd(e)}var Yd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jd(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qd(a);if(i){var n=qd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Gd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=s.call(this,e);var n=e.editMode;return!e.editMode&&e.safeContent&&e.safe&&e.safeContent[e.safe.name]&&!e.safeContent[e.safe.name].keyList.length&&(n=2),t.state={config:e.config,oidcStatus:e.oidcStatus,hutchProfile:e.hutchProfile,safe:e.safe,safeContent:e.safeContent,iconList:e.iconList,editMode:n},t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){var n=Object.assign({},e);return!e.editMode&&e.safeContent&&e.safe&&e.safeContent[e.safe.name]&&!e.safeContent[e.safe.name].keyList.length&&!e.safe.offline&&(n.editMode=2),n}}],(n=[{key:"render",value:function(){var e=this.state.safe&&(this.state.safe.offline||this.state.safeContent&&this.state.safeContent[this.state.safe.name]&&this.state.safeContent[this.state.safe.name].keyList.length);return this.state.config.frontend.offline?this.state.editMode?r.createElement(Ao,{config:this.state.config,safe:this.state.safe,safeContent:this.state.safeContent,editMode:this.state.editMode}):r.createElement(zd,{config:this.state.config,safe:this.state.safe,safeContent:this.state.safeContent,oidcStatus:this.state.oidcStatus,iconList:this.state.iconList}):!this.state.editMode&&e||"connected"!==this.state.oidcStatus?r.createElement(zd,{config:this.state.config,safe:this.state.safe,safeContent:this.state.safeContent,oidcStatus:this.state.oidcStatus,iconList:this.state.iconList}):r.createElement(Ao,{config:this.state.config,safe:this.state.safe,safeContent:this.state.safeContent,editMode:this.state.editMode})}}])&&Xd(t.prototype,n),o&&Xd(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const Qd=Yd;function Zd(e){return Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(e)}function $d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Zd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Zd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Zd(o)?o:String(o)),r)}var o}function ep(e,t){return ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ep(e,t)}function tp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function np(e){return np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},np(e)}var rp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ep(e,t)}(s,e);var t,n,o,a,i=(o=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=np(o);if(a){var n=np(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tp(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).state={config:e.config},t.changeLang=t.changeLang.bind(tp(t)),t}return t=s,(n=[{key:"changeLang",value:function(e,t){e.preventDefault(),Rn.sendMessage("App",{action:"lang",lang:t})}},{key:"render",value:function(){var e=this,t=[];return this.state.config.frontend.lang.forEach((function(n,o){var a="dropdown-item";pe.language===n&&(a+=" active"),t.push(r.createElement("li",{key:o},r.createElement("a",{className:a,href:"#",onClick:function(t){return e.changeLang(t,n)}},pe.t("lang-"+n))))})),r.createElement("div",{className:"dropdown"},r.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"langDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},pe.t("lang-"+pe.language)),r.createElement("ul",{className:"dropdown-menu","aria-labelledby":"langDropdown"},t))}}])&&$d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component);const op=rp;function ap(e){return ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(e)}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ap(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ap(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ap(o)?o:String(o)),r)}var o}function sp(e,t){return sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sp(e,t)}function cp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lp(e){return lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lp(e)}var up=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sp(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lp(a);if(i){var n=lp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ap(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cp(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,longSession:!!tr.getValue("longSession")},t.toggleLongSession=t.toggleLongSession.bind(cp(t)),t}return t=c,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],(n=[{key:"toggleLongSession",value:function(e){var t=this;this.setState({longSession:!this.state.longSession},(function(){tr.setValue("longSession",t.state.longSession),Kn.setParameter("responseType",t.state.longSession?"code":"token id_token")}))}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("hr",null),r.createElement("div",null,r.createElement("h3",null,pe.t("selectLang")),r.createElement(op,{config:this.state.config})),r.createElement("hr",null),r.createElement("div",null,r.createElement("h3",null,pe.t("selectSession")),r.createElement("div",{className:"form-check"},r.createElement("input",{className:"form-check-input",type:"checkbox",checked:this.state.longSession,id:"longSession",onChange:function(t){return e.toggleLongSession(t)}}),r.createElement("label",{className:"form-check-label",htmlFor:"longSession"},pe.t("longSession"))),r.createElement("p",{className:"fs-6 fst-italic"},pe.t("selectSessionWarning"))))}}])&&ip(t.prototype,n),o&&ip(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const fp=up;function dp(e){return dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(e)}function pp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==dp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==dp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===dp(o)?o:String(o)),r)}var o}function hp(e,t){return hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hp(e,t)}function mp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yp(e){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yp(e)}var gp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hp(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yp(a);if(i){var n=yp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===dp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mp(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={config:e.config,cbClose:e.cbClose,safeName:!1,coinList:[],password:"",prefixPassword:"",importJwk:"",importText:"",importData:!1,importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1,importRunning:!1,importComplete:!1,coinMax:0,coinNow:0},t.changePassword=t.changePassword.bind(mp(t)),t.changePrefixPassword=t.changePrefixPassword.bind(mp(t)),t.changeImportText=t.changeImportText.bind(mp(t)),t.getImportFile=t.getImportFile.bind(mp(t)),t.parseContent=t.parseContent.bind(mp(t)),t.completeImportContent=t.completeImportContent.bind(mp(t)),t.editImportJwk=t.editImportJwk.bind(mp(t)),t}return t=c,n=[{key:"changePassword",value:function(e){var t=this,n=-1;e.target.value&&(n=zxcvbn(e.target.value).score),this.setState({password:e.target.value,pwdScore:n},(function(){t.setState({exportInvalid:t.isImportInvalid()})}))}},{key:"changePrefixPassword",value:function(e){this.setState({prefixPassword:e.target.value})}},{key:"changeImportText",value:function(e){var t=this;this.setState({importText:e.target.value,importData:e.target.value,importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1,safeName:"import"},(function(){t.parseContent()}))}},{key:"isImportInvalid",value:function(){if("password"===this.state.exportSecurityType){if(!this.state.password||this.state.password!==this.state.confirmPassword)return!0}else if("jwk"===this.state.exportSecurityType)try{if(!this.state.importJwk||!JSON.parse(this.state.importJwk).alg)return!0}catch(e){return!0}}},{key:"editImportJwk",value:function(e){var t=this;this.setState({importJwk:e},(function(){t.setState({exportInvalid:t.isImportInvalid()})}))}},{key:"getImportFile",value:function(e){var t=this,n=e.target.files[0].name;n.lastIndexOf(".")>-1&&(n=n.substring(0,n.lastIndexOf("."))),this.setState({importData:!1,importText:"",importDataResult:!1,importTotalCount:0,importTotalSuccess:0,importSecurityType:!1,safeName:n},(function(){var n=e.target.files[0],r=new FileReader;r.onload=function(e){t.setState({importData:e.target.result},(function(){t.parseContent()}))},r.readAsText(n)}))}},{key:"parseContent",value:function(){var e=this;if(this.state.importData){var t=!1;try{t=JSON.parse(this.state.importData)}catch(e){}if(t&&Array.isArray(t))this.setState({coinList:t,importDataResult:"importComplete",importTotalCount:t.length,importComplete:!0},(function(){Rn.sendMessage("App",{action:"addOfflineSafe",safeName:e.state.safeName,coinList:e.state.coinList}),e.state.cbClose&&e.state.cbClose()}));else{var n=!1;try{n=kn(this.state.importData)}catch(e){this.setState({importDataResult:"invalidData"})}n&&("PBES2-HS256+A128KW"===n.alg||"PBES2-HS384+A192KW"===n.alg||"PBES2-HS512+A256KW"===n.alg?this.setState({importSecurityType:"password"}):this.setState({importSecurityType:"jwk"}))}}else this.setState({importDataResult:"invalidData"})}},{key:"completeImportContent",value:function(e){var t=this;if(e&&e.preventDefault(),"password"===this.state.importSecurityType){var n=new TextEncoder;Pn(this.state.importData,n.encode((this.state.prefixPassword||"")+this.state.password)).then((function(e){t.setState({coinList:e.payload.data,importDataResult:"importComplete",importTotalCount:e.payload.data.length,importComplete:!0},(function(){Rn.sendMessage("App",{action:"addOfflineSafe",safeName:t.state.safeName,coinList:t.state.coinList}),t.state.cbClose&&t.state.cbClose()}))})).catch((function(){t.setState({importDataResult:"invalidPassword",coinList:[]})}))}else if("jwk"===this.state.importSecurityType)try{var r=JSON.parse(this.state.importJwk);r.use="enc",kt(r,r.alg).then((function(e){Pn(t.state.importData,e).then((function(e){t.setState({coinList:e.payload.data,importDataResult:"importComplete",importTotalCount:e.payload.data.length,importComplete:!0},(function(){Rn.sendMessage("App",{action:"addOfflineSafe",safeName:t.state.safeName,coinList:t.state.coinList}),t.state.cbClose&&t.state.cbClose()}))})).catch((function(){t.setState({importDataResult:"invalidJwk",coinList:[]})}))}))}catch(e){this.setState({importDataResult:"invalidJwk",coinList:[]})}}},{key:"closeModal",value:function(e,t){this.state.cbClose&&this.state.cbClose()}},{key:"render",value:function(){var e,t,n,o=this;if("invalidData"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-danger",role:"alert"},pe.t("importInvalidData")):"importComplete"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-success",role:"alert"},pe.t("importOfflineComplete",{count:this.state.importTotalCount,name:this.state.safeName})):"importIncomplete"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-warning",role:"alert"},pe.t("importOfflineIncomplete",{count:this.state.importTotalCount,total:this.state.importTotalSuccess,name:this.state.safeName})):"invalidPassword"===this.state.importDataResult?e=r.createElement("div",{className:"alert alert-danger",role:"alert"},pe.t("importInvalidPassword")):"invalidJwk"===this.state.importDataResult&&(e=r.createElement("div",{className:"alert alert-danger",role:"alert"},pe.t("importInvalidKey"))),this.state.importSecurityType){var a;this.state.importRunning&&(a=r.createElement("i",{className:"fa fa-spinner fa-spin fa-fw btn-icon-right"}));var i="password"===this.state.importSecurityType&&!this.state.password||"jwk"===this.state.importSecurityType&&!this.state.importJwk;n=r.createElement("button",{type:"submit",className:"btn btn-secondary",onClick:this.completeImportContent,title:pe.t("modalOk"),disabled:i||this.state.importRunning||this.state.importComplete},pe.t("modalOk"),a)}return"password"===this.state.importSecurityType?t=r.createElement("div",null,r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"prefix-password",className:"form-label"},pe.t("importPrefixPassword")),r.createElement("input",{type:"password",className:"form-control",id:"prefix-password",autoComplete:"new-password",value:this.state.prefixPassword,onChange:this.changePrefixPassword})),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"password",className:"form-label"},pe.t("importPassword")),r.createElement("input",{type:"password",className:"form-control",id:"password",autoComplete:"new-password",value:this.state.password,onChange:this.changePassword}))):"jwk"===this.state.importSecurityType&&(t=r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"importJwk",className:"form-label"},pe.t("importJwk")),r.createElement(no,{isError:!1,ph:pe.t("safeKeyJwkPh"),cb:this.editImportJwk}))),r.createElement("div",{className:"modal",tabIndex:"-1",id:"offlineSafe"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("offlineSafe")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(e){return o.closeModal(e,!1)}})),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"mb-3"},r.createElement("div",{className:"alert alert-primary",role:"alert"},pe.t("importSafe"))),r.createElement("div",{className:"mb-3"},r.createElement("input",{type:"file",className:"upload",id:"importSafeFileInput",onChange:this.getImportFile}),r.createElement("label",{htmlFor:"importSafeFileInput",className:"btn btn-secondary",disabled:"connected"!==this.state.oidcStatus},r.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"}))),pe.t("or"),r.createElement("hr",null),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"importText",className:"form-label"},pe.t("importText")),r.createElement("textarea",{className:"form-control",id:"importText",value:this.state.importText,placeholder:pe.t("importTextPh"),onChange:this.changeImportText}),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return o.closeModal(e,!1)},disabled:!this.state.importText},r.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"}))),r.createElement("div",{className:"mb-3"},r.createElement("form",{onSubmit:this.completeImportContent},t,n),void 0,e),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return o.closeModal(e,!1)},disabled:this.state.importRunning},pe.t("modalClose")))))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&pp(t.prototype,n),o&&pp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const vp=gp;function bp(e){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(e)}function wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==bp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==bp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===bp(o)?o:String(o)),r)}var o}function Ep(e,t){return Ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ep(e,t)}function Sp(e){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sp(e)}var Cp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ep(e,t)}(c,e);var t,n,o,a,i,s=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sp(a);if(i){var n=Sp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===bp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={cb:e.cb,metaData:e.metaData,data:e.data},t}return t=c,n=[{key:"render",value:function(){var e,t=this,n=tu()(0,"L");return this.state.data.value.length<23648?(n.addData(this.state.data.value),n.make(),e=r.createElement("img",{className:"img-fluid",src:n.createDataURL(4),alt:"qrcode"})):e=r.createElement("div",{className:"alert alert-warning",role:"alert"},pe.t("exportShowQrCodeTooLarge")),r.createElement("div",{className:"modal",tabIndex:"-1",id:"qrCodeModal"},r.createElement("div",{className:"modal-dialog"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},pe.t("coinElementShowQrCode")),r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(e){return t.state.cb(e)}})),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"text-center"},r.createElement("h6",null,this.state.data.metaData),e)),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return t.state.cb(e)}},pe.t("modalClose"))))))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e}}],n&&wp(t.prototype,n),o&&wp(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);const _p=Cp;function Ap(e){return Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(e)}function kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ap(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ap(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ap(o)?o:String(o)),r)}var o}function Op(e,t){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Op(e,t)}function Pp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Np(e){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Np(e)}var Tp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Op(e,t)}(s,e);var t,n,o,a,i=(o=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Np(o);if(a){var n=Np(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ap(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pp(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).state={config:e.config,profile:!1,hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{},iconList:[],curSafe:!1,offlineSafe:!1,addSafe:!1,oidcStatus:"connecting",tokenTimeout:!1,nav:"profile",oldNav:!1,langChanged:!1,editProfile:!1,editSafeMode:0,trustworthy:!0,forceTrust:!1,showModalGeneratePassword:!1,showModalOfflineSafe:!1,showModalQrCode:!1,modalQrCodeData:!1,modalGeneratePasswordElement:{params:{type:"chars",lowercase:!0,upprcase:!0,numbers:!0,special:!0,spaces:!0,noSimilarFollowingChars:!1,passwordCharLength:32,wordsNumber:4,wordsLangsList:[pe.language],wordSeparator:" "}}},Qn.addChangeRouteCallback((function(e){t.gotoRoute(e)})),Rn.subscribe("OIDC",(function(e){if("disconnected"===e.status)t.setState({oidcStatus:e.status,safeList:[],safeContent:{},curSafe:!1}),Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageDisconnected")});else if("connected"===e.status||"refresh"===e.status){var n=new Date;Xn.setToken(e.token,n.getTime()/1e3+e.expires_in),"connected"===e.status&&Rn.sendMessage("Notification",{type:"success",message:pe.t("messageConnected")});var r=!1;-1===Kn.getParameter("responseType").search("code")&&(clearTimeout(t.state.tokenTimeout),r=setTimeout((function(){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageSessionTimeout"),autohide:!1}),t.setState({oidcStatus:"timeout"})}),1e3*e.expires_in)),t.setState({oidcStatus:"connected",tokenTimeout:r})}else"profile"===e.status&&("error"==e.profile?(Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageProfileError")}),t.setState({oidcStatus:"disconnected",safeList:[],safeContent:{},curSafe:!1})):e.profile&&t.setState({profile:e.profile},(function(){t.getHutchProfile().then((function(){t.getSafeList().then((function(){t.gotoRoute(Qn.getCurrentRoute())}))})).catch((function(){}))})));t.setForceTrust=t.setForceTrust.bind(Pp(t))})),Rn.subscribe("App",(function(e){if("lang"===e.action)e.lang!==pe.language&&pe.changeLanguage(e.lang).then((function(){t.setState({langChanged:!0},(function(){Xn.request("words-"+pe.language+".json").then((function(e){var n=t.state.config;n.wordsList=e,t.setState({config:n})}))}))}));else if("editProfile"===e.action){var n=t.state.hutchProfile||{name:t.state.profile.name,message:"",picture:"",sign_kid:t.state.config.jwks.keys[0].kid};t.setState({nav:"profile",editProfile:!0,hutchProfile:n})}else if("getProfile"===e.action)t.setState({nav:"profile",editProfile:!1},(function(){t.getHutchProfile()}));else if("resetProfile"===e.action)t.setState({nav:"profile",editProfile:!1,hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{},curSafe:!1});else if("nav"===e.action)e.target?t.state.safeList.forEach((function(n){n.name===e.target&&t.setState({nav:"safe",curSafe:n,editSafeMode:0})})):t.setState({nav:"profile",editProfile:!1,curSafe:!1});else if("config"===e.action)"config"===t.state.nav&&t.state.oldNav?t.setState({nav:t.state.oldNav,oldNav:!1}):t.setState({nav:"config",oldNav:t.state.nav});else if("generate"===e.action)t.setState({showModalGeneratePassword:!0},(function(){new bootstrap.Modal(document.getElementById("modalGeneratePassword"),{keyboard:!1}).show()}));else if("offline"===e.action)t.setState({showModalOfflineSafe:!0},(function(){new bootstrap.Modal(document.getElementById("offlineSafe"),{keyboard:!1}).show()}));else if("addSafe"===e.action)t.setState({nav:"safe",curSafe:{name:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),display_name:"",offline:!!t.state.config.frontend.offline,enc_type:"A256GCM",alg_type:"A256GCMKW"},editSafeMode:1});else if("loadSafe"===e.action)t.getSafe(e.target);else if("editSafe"===e.action)t.state.safeList.forEach((function(n){n.name===e.target&&t.setState({nav:"safe",curSafe:n,editSafeMode:2})}));else if("saveSafe"===e.action){var r=t.state.safeList,o=t.state.safeContent,a=!1;r.forEach((function(t,n){t.name===e.safe.name&&(r[n]=e.safe,a=!0)})),a||(r.push(e.safe),o[e.safe.name]={keyList:[],coinList:[],unlockedCoinList:[],key:!1}),Qn.addRoute(e.safe.name),t.setState({safeList:r,safeContent:o,nav:"safe",curSafe:e.safe,editSafeMode:0})}else if("removeSafe"===e.action)r=t.state.safeList,o=t.state.safeContent,r.forEach((function(t,n){t.name===e.safe.name&&r.splice(n,1)})),Qn.addRoute(""),delete o[e.safe.name],t.setState({safeList:r,safeContent:o,nav:"profile",editProfile:!1});else if("updateSafeKey"===e.action)t.getSafeKeyList(e.safe.name).then((function(){t.setState({nav:"safe",curSafe:e.safe,editSafeMode:2})}));else if("setSafeKey"===e.action){if(!(o=t.state.safeContent)[e.target.name].key&&e.key&&(o[e.target.name].key=e.key),o[e.target.name].extractableKey=e.masterkeyData,o[e.target.name].lastUnlock=e.key?Math.floor(Date.now()/1e3):0,e.key){if(e.keepUnlocked){var i="A128KW";"A192KW"===e.target.alg_type||"A192GCMKW"===e.target.alg_type||"PBES2-HS384+A192KW"===e.target.alg_type?i="A192KW":"A256KW"!==e.target.alg_type&&"A256GCMKW"!==e.target.alg_type&&"PBES2-HS512+A256KW"!==e.target.alg_type||(i="A256KW"),Qt(i,{extractable:!0}).then((function(n){var r=Math.random().toString(36).substring(7);new Cn(e.masterkeyData).setProtectedHeader({alg:i,enc:e.target.enc_type,sign_key:t.state.config.sign_thumb,kid:r}).encrypt(n).then((function(o){var a={name:r,display_name:e.unlockKeyName,type:"browser",data:o},s=t.state.safeContent;s[e.target.name].keyList.push(a),t.setState({safeContent:s}),Xn.request(t.state.config.safe_endpoint+"/"+e.target.name+"/key","POST",a).then((function(){gn(n).then((function(t){t.kid=r,t.alg=i;var n="hutchsafe-"+e.target.name;"/"!==window.location.pathname&&(n+="-"+window.btoa(unescape(encodeURIComponent(window.location.pathname))).replace(/\=+$/m,"")),tr.setValue(n,t)}))}))}))}))}}else if(e.removeStorage){var s="hutchsafe-"+e.target.name;"/"!==window.location.pathname&&(s+="-"+window.btoa(unescape(encodeURIComponent(window.location.pathname))).replace(/\=+$/m,""));var c=tr.getValue(s);c&&Xn.request(t.state.config.safe_endpoint+"/"+e.target.name+"/key/"+c.kid,"DELETE").then((function(){var n=t.state.safeContent;n[e.target.name].keyList.forEach((function(t,r){t.name===c.kid&&n[e.target.name].keyList.splice(r,1)})),t.setState({safeContent:n})})).catch((function(e){Rn.sendMessage("Notification",{type:"danger",message:pe.t("messageErrorSaveSafeKey")})})),tr.removeValue(s),o[e.target.name].key=!1,o[e.target.name].extractableKey=!1,o[e.target.name].lastUnlock=0}o[e.target.name].unlockedCoinList=[],t.setState({safeContent:o},(function(){t.unlockCoinList(e.target.name,t.state.safeContent[e.target.name].key),t.state.safeContent[e.target.name].extractableKey&&setTimeout((function(){var n=t.state.safeContent;delete n[e.target.name].extractableKey,t.setState({safeContent:n},(function(){}))}),6e5)}))}else if("unlockSafe"===e.action)(o=t.state.safeContent)[e.safe.name].extractableKey=e.extractableKey,t.setState({safeContent:o},(function(){setTimeout((function(){var n=t.state.safeContent;delete n[e.safe.name].extractableKey,t.setState({safeContent:n})}),6e5),o[e.safe.name].unlockedCoinList.length!==o[e.safe.name].coinList.length&&t.unlockCoinList(e.safe.name,t.state.safeContent[e.safe.name].key)}));else if("lockAllSafe"===e.action)t.state.safeList.forEach((function(e){e.offline?Rn.sendMessage("App",{action:"removeSafe",safe:e}):Rn.sendMessage("App",{action:"setSafeKey",target:e,removeStorage:!0,key:!1})}));else if("updateCoin"===e.action){o=t.state.safeContent,r=t.state.safeList;var l=!1;o[e.target.name].coinList.forEach((function(t,n){t.name===e.encCoin.name&&(o[e.target.name].coinList[n]=e.encCoin,l=!0)})),l?o[e.target.name].unlockedCoinList.forEach((function(t,n){t.name===e.unlockedCoin.name&&(o[e.target.name].unlockedCoinList[n]=e.unlockedCoin)})):(o[e.target.name].coinList.push(e.encCoin),o[e.target.name].unlockedCoinList.push(e.unlockedCoin)),o[e.target.name].unlockedCoinList.sort(t.compareCoin),e.target.offline&&r.forEach((function(t,n){t.name===e.target.name&&(t.updated=!0,r[n]=t)})),t.setState({safeContent:o,safeList:r},(function(){e.cb&&e.cb(e.encCoin.name)}))}else if("removeCoin"===e.action)o=t.state.safeContent,r=t.state.safeList,o[e.target.name].coinList.forEach((function(t,n){t.name===e.coin&&delete o[e.target.name].coinList[n]})),o[e.target.name].unlockedCoinList.forEach((function(t,n){t.name===e.coin&&delete o[e.target.name].unlockedCoinList[n]})),e.target.offline&&r.forEach((function(t,n){t.name===e.target.name&&(t.updated=!0,r[n]=t)})),t.setState({safeContent:o,safeList:r});else if("sessionTimeout"===e.action)Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageSessionTimeout"),autohide:!1}),t.setState({oidcStatus:"timeout"});else if("addOfflineSafe"===e.action){var u=e.safeName+"-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),f=t.state.safeList,d=t.state.safeContent,p={name:u,display_name:e.safeName,enc_type:!1,alg_type:!1,offline:!0,updated:!1};f.push(p);var h=[],m=[];e.coinList.forEach((function(e,t){h.push({name:e.name||"offline-"+t,data:e}),m.push({name:e.name||"offline-"+t,data:!1,last_updated:e.lastUpdated||Math.floor(Date.now()/1e3)})})),d[u]={keyList:[],coinList:m,unlockedCoinList:h,key:!1},Qn.addRoute(u||""),t.setState({safeList:f,safeContent:d,nav:"safe",curSafe:p,editSafeMode:0},(function(){Rn.sendMessage("Notification",{type:"info",message:pe.t("importOfflineComplete",{count:e.coinList.length,name:e.safeName})})}))}else if("offlineSafeExported"===e.action){var y=t.state.safeList;y.forEach((function(t,n){t.name===e.safeName&&(y[n].updated=!1)})),t.setState({safeList:y})}else"showQrCode"===e.action&&t.setState({showModalQrCode:!0,modalQrCodeData:{metaData:e.metaData,value:e.value}},(function(){new bootstrap.Modal(document.getElementById("qrCodeModal"),{keyboard:!1}).show()}))})),Xn.request("words-"+pe.language+".json").then((function(e){var n=t.state.config;n.wordsList=e,t.setState({config:n})})),Xn.request("fonts/forkawesome-ful-list.json").then((function(e){t.setState({iconList:e})})),t.state.config.frontend.offline&&(t.state.oidcStatus="connected",t.state.hutchProfile={name:"Myrddin",picture:"img/offline-mode.svg"},t.state.hasProfile=!0),t.getHutchProfile=t.getHutchProfile.bind(Pp(t)),t.getSafeList=t.getSafeList.bind(Pp(t)),t.getSafeKeyList=t.getSafeKeyList.bind(Pp(t)),t.unlockCoinList=t.unlockCoinList.bind(Pp(t)),t.gotoRoute=t.gotoRoute.bind(Pp(t)),t.closeGenerateModal=t.closeGenerateModal.bind(Pp(t)),t.manageSafeClose=t.manageSafeClose.bind(Pp(t)),t.manageQrCodeClose=t.manageQrCodeClose.bind(Pp(t)),t}return t=s,n=[{key:"gotoRoute",value:function(e){var t=this;e?this.state.safeList.forEach((function(n){n.name===e&&t.setState({nav:"safe",curSafe:n,editSafeMode:0})})):this.setState({nav:"profile",editProfile:!1})}},{key:"getHutchProfile",value:function(){var e=this;return Xn.request(this.state.config.profile_endpoint).then((function(t){var n=JSON.parse(atob(t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"))),r=!1;if(e.state.config.jwks.keys.forEach((function(o){o.kid===n.sign_kid&&(r=!0,kt(o,o.alg).then((function(n){(async function(e,t){if(!At(e))throw new TypeError("JWK must be an object");if(null!=t||(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(e.kty){case"EC":_n(e.crv,'"crv" (Curve) Parameter'),_n(e.x,'"x" (X Coordinate) Parameter'),_n(e.y,'"y" (Y Coordinate) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":_n(e.crv,'"crv" (Subtype of Key Pair) Parameter'),_n(e.x,'"x" (Public Key) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":_n(e.e,'"e" (Exponent) Parameter'),_n(e.n,'"n" (Modulus) Parameter'),n={e:e.e,kty:e.kty,n:e.n};break;case"oct":_n(e.k,'"k" (Key Value) Parameter'),n={k:e.k,kty:e.kty};break;default:throw new pt('"kty" (Key Type) Parameter missing or unsupported')}const r=$e.encode(JSON.stringify(n));return st(await Ze(t,r))})(o).then((function(r){Jt(t,n).then((function(t){Xn.setSignJwk(n);var o=e.state.config;o.sign_thumb=r,e.setState({config:o,hutchProfile:t.payload,hasProfile:!0})}))}))})))})),!r)return $.Deferred().reject("invalid sign key")})).fail((function(t){var n={hutchProfile:!1,hasProfile:!1};404===t.status?Rn.sendMessage("Notification",{type:"info",message:pe.t("messageNoProfile")}):401===t.status?(n.oidcStatus="disconnected",n.safeList=[],n.safeContent={},n.curSafe=!1,Rn.sendMessage("Notification",{type:"danger",message:pe.t("messageAuthorizationInvalid")})):(n.oidcStatus="disconnected",n.safeList=[],n.safeContent={},n.curSafe=!1,Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageProfileError")})),e.setState(n)}))}},{key:"getSafeList",value:function(){var e=this;return Xn.requestSigned(this.state.config.safe_endpoint).then((function(t){return e.setState({safeList:t.payload.list,trustworthy:!0},(function(){e.state.safeList.forEach((function(t){return Xn.requestSigned(e.state.config.safe_endpoint+"/"+t.name+"/key").then((function(n){return Xn.requestSigned(e.state.config.safe_endpoint+"/"+t.name+"/coin").then((function(r){var o=!0;r.payload.list.forEach((function(t){kn(t.data).sign_thumb!==e.state.config.sign_thumb&&(o=!1)}));var a=e.state.safeContent;a[t.name]={keyList:n.payload.list,coinList:r.payload.list,unlockedCoinList:[],key:!1,lastUnlock:0},e.setState({safeContent:a,trustworthy:e.state.trustworthy&&o},(function(){var r="hutchsafe-"+t.name;"/"!==window.location.pathname&&(r+="-"+window.btoa(unescape(encodeURIComponent(window.location.pathname))).replace(/\=+$/m,""));var o=tr.getValue(r);o&&n.payload.list.forEach((function(n){n.name===o.kid&&kt(o,o.alg).then((function(r){Pn(n.data,r).then((function(n){kt(n.payload,t.alg_type).then((function(n){var r=e.state.safeContent;r[t.name].key=n,e.setState({safeContent:r},(function(){e.unlockCoinList(t.name,r[t.name].key)}))}))}))}))}))}))})).fail((function(t){console.error("getSafeCoins",t),Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorCoinList")}),e.setState({hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{}})}))})).fail((function(t){console.error("getSafeKeys",t),Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorKeyList")}),e.setState({hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{}})}))}))}))})).fail((function(t){console.error("getSafeList",t),Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSafeList")}),e.setState({hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{}})}))}},{key:"getSafe",value:function(e){var t=this;return Xn.requestSigned(this.state.config.safe_endpoint+"/"+e).then((function(n){var r=t.state.safeList;return r.forEach((function(t,o){t.name===e&&(r[o]=n.payload)})),t.setState({safeList:r},(function(){return Xn.requestSigned(t.state.config.safe_endpoint+"/"+e+"/key").then((function(n){return Xn.requestSigned(t.state.config.safe_endpoint+"/"+e+"/coin").then((function(r){var o=!0;r.payload.list.forEach((function(e){kn(e.data).sign_thumb!==t.state.config.sign_thumb&&(o=!1)}));var a=t.state.safeContent;a[e].keyList=n.payload.list,a[e].coinList=r.payload.list,a[e].unlockedCoinList=[],t.setState({safeContent:a,trustworthy:t.state.trustworthy&&o},(function(){t.unlockCoinList(e,a[e].key),Rn.sendMessage("Notification",{type:"info",message:pe.t("messageSafeLoaded")})}))})).fail((function(e){console.error("getSafeCoins",e),Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorCoinList")}),t.setState({hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{}})}))})).fail((function(e){console.error("getSafeKeys",e),Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorKeyList")}),t.setState({hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{}})}))}))})).fail((function(e){console.error("getSafe",e),Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorSafeList")}),t.setState({hutchProfile:!1,hasProfile:!1,safeList:[],safeContent:{}})}))}},{key:"compareCoin",value:function(e,t){return e.data.displayName.toUpperCase()<t.data.displayName.toUpperCase()?-1:e.data.displayName.toUpperCase()>t.data.displayName.toUpperCase()?1:0}},{key:"unlockCoinList",value:function(e,t){var n=this,r=this.state.safeContent;t&&(this.state.trustworthy||this.state.forceTrust)?r[e].coinList.forEach((function(o,a){Pn(o.data,t).then((function(t){r[e].unlockedCoinList.push({name:o.name,data:t.payload}),a===r[e].coinList.length-1&&(r[e].unlockedCoinList.sort(n.compareCoin),n.setState({safeContent:r}))}))})):(r[e].unlockedCoinList=[],this.setState({safeContent:r}))}},{key:"getSafeKeyList",value:function(e){var t=this;return Xn.requestSigned(this.state.config.safe_endpoint+"/"+e+"/key").then((function(n){var r=t.state.safeContent;r[e].keyList=n.payload.list,t.setState({safeContent:r})})).catch((function(e){Rn.sendMessage("Notification",{type:"warning",message:pe.t("messageErrorKeyList")})}))}},{key:"setForceTrust",value:function(){var e=this;this.setState({forceTrust:!0},(function(){e.state.safeList.forEach((function(t){e.state.safeContent[t.name].key&&e.unlockCoinList(t.name,e.state.safeContent[t.name].key)}))}))}},{key:"closeGenerateModal",value:function(){bootstrap.Modal.getOrCreateInstance(document.querySelector("#modalGeneratePassword")).hide(),this.setState({showModalGeneratePassword:!1})}},{key:"manageSafeClose",value:function(){bootstrap.Modal.getOrCreateInstance(document.querySelector("#offlineSafe")).hide(),this.setState({showModalOfflineSafe:!1})}},{key:"manageQrCodeClose",value:function(){bootstrap.Modal.getOrCreateInstance(document.querySelector("#qrCodeModal")).hide(),this.setState({showModalQrCode:!1,modalQrCodeData:!1})}},{key:"render",value:function(){var e,t,n,o,a,i;return(this.state.trustworthy||!this.state.trustworthy&&this.state.forceTrust)&&("profile"===this.state.nav?e=r.createElement(qr,{config:this.state.config,profile:this.state.profile,hutchProfile:this.state.hutchProfile,hasProfile:this.state.hasProfile,editProfile:this.state.editProfile,oidcStatus:this.state.oidcStatus}):"safe"===this.state.nav?e=r.createElement(Qd,{config:this.state.config,hutchProfile:this.state.hutchProfile,safe:this.state.curSafe,safeContent:this.state.safeContent,editMode:this.state.editSafeMode,oidcStatus:this.state.oidcStatus,iconList:this.state.iconList}):"config"===this.state.nav&&(e=r.createElement(fp,{config:this.state.config}))),this.state.trustworthy||(this.state.forceTrust||(n=r.createElement("div",null,r.createElement("div",null,pe.t("untrustworthyOpenMessage")),r.createElement("div",null,r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.setForceTrust},pe.t("untrustworthyOpen"))))),t=r.createElement("div",{className:"alert alert-danger text-center",role:"alert"},pe.t("untrustworthySafe"),n)),this.state.showModalGeneratePassword&&(o=r.createElement(Wu,{config:this.state.config,element:this.state.modalGeneratePasswordElement,originalPassword:!1,callback:this.closeGenerateModal,hideSaveAndClose:!0})),this.state.showModalOfflineSafe&&(a=r.createElement(vp,{config:this.state.config,safe:!1,safeContent:!1,cbSaveCoin:!1,oidcStatus:!1,cbClose:this.manageSafeClose})),this.state.showModalQrCode&&(i=r.createElement(_p,{data:this.state.modalQrCodeData,cb:this.manageQrCodeClose})),r.createElement("div",{className:"container-fluid"},r.createElement(Cr,{config:this.state.config,oidcStatus:this.state.oidcStatus,safeList:this.state.safeList,safeContent:this.state.safeContent,curSafe:this.state.curSafe,hasProfile:this.state.hasProfile}),t,e,r.createElement(cr,{loggedIn:this.state.oidcStatus}),o,a,i)}}],n&&kp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component);const Ip=Tp;function Rp(e){return Rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(e)}function Dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Rp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Rp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Rp(o)?o:String(o)),r)}var o}function xp(e,t){return xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xp(e,t)}function Mp(e){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mp(e)}var Lp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xp(e,t)}(s,e);var t,n,o,a,i=(o=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mp(o);if(a){var n=Mp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Rp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).state={message:e.message},t}return t=s,(n=[{key:"render",value:function(){return r.createElement("div",{className:"alert alert-danger perfect-centering",role:"alert"},r.createElement("h4",null,"Configuration error"),r.createElement("span",null,this.state.message))}}])&&Dp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component);const Bp=Lp;try{pe.use(Re).use(qe).init({fallbackLng:"en",ns:["translations"],defaultNS:"translations",backend:{loadPath:"locales/{{lng}}/{{ns}}.json"}}).then((function(){new URLSearchParams(window.location.search),Xn.request("config.json").then((function(e){if(e.lang||(e.lang=["en","fr"]),e.offline){var t={oidc:!1,frontend:e,backend:!1,jwks:!1,profile_endpoint:!1,safe_endpoint:!1,oidc_server_remote_config:!1,scope:!1};o.render(r.createElement(Ip,{config:t}),document.getElementById("root"))}else tr.setStorageType(e.storageType),(n=e.hutchRootUrl,a={},Xn.request(n+"/.well-known/hutch-configuration","GET",!1,"application/jwt").then((function(e){return JSON.parse(atob(e.split(".")[0].replace(/-/g,"+").replace(/_/g,"/"))),a.config=JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"))),Xn.request(a.config.jwks_uri,"GET",!1,"application/jwt").then((function(t){return JSON.parse(atob(t.split(".")[0].replace(/-/g,"+").replace(/_/g,"/"))),a.jwks=JSON.parse(atob(t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"))),kt(a.jwks.keys[0],a.jwks.keys[0].alg).then((function(n){return Jt(e,n).then((function(){return Jt(t,n).then((function(){return a}))}))}))}))}))).then((function(t){var n={oidc:{status:"connecting"},frontend:e,backend:t.config,jwks:t.jwks,profile_endpoint:e.profile_endpoint||t.config.profile_endpoint,safe_endpoint:e.safe_endpoint||t.config.safe_endpoint,oidc_server_remote_config:e.oidc.oidc_server_remote_config||t.config.oidc_server_remote_config,scope:e.oidc.scope||t.config.scope};Kn.init({storagePrefix:"hutchOidc",storageType:tr.storageType,responseType:tr.getValue("longSession")?"code":"token id_token",openidConfigUrl:n.oidc_server_remote_config,authUrl:e.oidc.authUrl,tokenUrl:e.oidc.tokenUrl,clientId:e.oidc.clientId,redirectUri:e.oidc.redirectUri,usePkce:e.oidc.usePkce,scope:n.scope,userinfoUrl:e.oidc.userinfoUrl,refreshTokenLoop:e.oidc.refreshTokenLoop,changeStatusCb:function(e,t,n,r){Rn.sendMessage("OIDC",{status:e,token:t,expires_in:n,profile:r})}}),Xn.setConfig(e.APIUrl),o.render(r.createElement(Ip,{config:n}),document.getElementById("root"))})).fail((function(e){o.render(r.createElement(Bp,{message:"Error getting hutch backend config"}),document.getElementById("root"))}));var n,a})).fail((function(e){o.render(r.createElement(Bp,{message:"Error getting hutch frontend config"}),document.getElementById("root"))}))}))}catch(e){$("#root").html('<div class="alert alert-danger" role="alert"><i class="fas fa-exclamation-triangle"></i><span class="btn-icon-right">You must use a browser compatible with Hutch</span></div>')}},98:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,i="ArrayBuffer"in e;if(i)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=h(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=u(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,o=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function C(e,n){return new Promise((function(r,a){var i=new b(e,n);if(i.signal&&i.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;r(new E(o,n))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),i.signal&&(i.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",c)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}C.polyfill=!0,e.fetch||(e.fetch=C,e.Headers=d,e.Request=b,e.Response=E),t.Headers=d,t.Request=b,t.Response=E,t.fetch=C,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,i,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in a=Object(arguments[c]))n.call(a,l)&&(s[l]=a[l]);if(t){i=t(a);for(var u=0;u<i.length;u++)r.call(a,i[u])&&(s[i[u]]=a[i[u]])}}return s}},192:(e,t)=>{var n,r,o=function(){var e=function(e,t){var n=e,r=i[t],o=null,a=0,c=null,y=[],g={},b=function(e,t){o=function(e){for(var t=new Array(e),n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(a=4*n+17),w(0,0),w(a-7,0),w(0,a-7),S(),E(),_(e,t),n>=7&&C(e),null==c&&(c=k(n,r,y)),A(c,t)},w=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||a<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||a<=t+r||(o[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},E=function(){for(var e=8;e<a-8;e+=1)null==o[e][6]&&(o[e][6]=e%2==0);for(var t=8;t<a-8;t+=1)null==o[6][t]&&(o[6][t]=t%2==0)},S=function(){for(var e=s.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var a=e[t],i=e[r];if(null==o[a][i])for(var c=-2;c<=2;c+=1)for(var l=-2;l<=2;l+=1)o[a+c][i+l]=-2==c||2==c||-2==l||2==l||0==c&&0==l}},C=function(e){for(var t=s.getBCHTypeNumber(n),r=0;r<18;r+=1){var i=!e&&1==(t>>r&1);o[Math.floor(r/3)][r%3+a-8-3]=i}for(r=0;r<18;r+=1)i=!e&&1==(t>>r&1),o[r%3+a-8-3][Math.floor(r/3)]=i},_=function(e,t){for(var n=r<<3|t,i=s.getBCHTypeInfo(n),c=0;c<15;c+=1){var l=!e&&1==(i>>c&1);c<6?o[c][8]=l:c<8?o[c+1][8]=l:o[a-15+c][8]=l}for(c=0;c<15;c+=1)l=!e&&1==(i>>c&1),c<8?o[8][a-c-1]=l:c<9?o[8][15-c-1+1]=l:o[8][15-c-1]=l;o[a-8][8]=!e},A=function(e,t){for(var n=-1,r=a-1,i=7,c=0,l=s.getMaskFunction(t),u=a-1;u>0;u-=2)for(6==u&&(u-=1);;){for(var f=0;f<2;f+=1)if(null==o[r][u-f]){var d=!1;c<e.length&&(d=1==(e[c]>>>i&1)),l(r,u-f)&&(d=!d),o[r][u-f]=d,-1==(i-=1)&&(c+=1,i=7)}if((r+=n)<0||a<=r){r-=n,n=-n;break}}},k=function(e,t,n){for(var r=u.getRSBlocks(e,t),o=f(),a=0;a<n.length;a+=1){var i=n[a];o.put(i.getMode(),4),o.put(i.getLength(),s.getLengthInBits(i.getMode(),e)),i.write(o)}var c=0;for(a=0;a<r.length;a+=1)c+=r[a].dataCount;if(o.getLengthInBits()>8*c)throw"code length overflow. ("+o.getLengthInBits()+">"+8*c+")";for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c||(o.put(236,8),o.getLengthInBits()>=8*c));)o.put(17,8);return function(e,t){for(var n=0,r=0,o=0,a=new Array(t.length),i=new Array(t.length),c=0;c<t.length;c+=1){var u=t[c].dataCount,f=t[c].totalCount-u;r=Math.max(r,u),o=Math.max(o,f),a[c]=new Array(u);for(var d=0;d<a[c].length;d+=1)a[c][d]=255&e.getBuffer()[d+n];n+=u;var p=s.getErrorCorrectPolynomial(f),h=l(a[c],p.getLength()-1).mod(p);for(i[c]=new Array(p.getLength()-1),d=0;d<i[c].length;d+=1){var m=d+h.getLength()-i[c].length;i[c][d]=m>=0?h.getAt(m):0}}var y=0;for(d=0;d<t.length;d+=1)y+=t[d].totalCount;var g=new Array(y),v=0;for(d=0;d<r;d+=1)for(c=0;c<t.length;c+=1)d<a[c].length&&(g[v]=a[c][d],v+=1);for(d=0;d<o;d+=1)for(c=0;c<t.length;c+=1)d<i[c].length&&(g[v]=i[c][d],v+=1);return g}(o,r)};g.addData=function(e,t){var n=null;switch(t=t||"Byte"){case"Numeric":n=d(e);break;case"Alphanumeric":n=p(e);break;case"Byte":n=h(e);break;case"Kanji":n=m(e);break;default:throw"mode:"+t}y.push(n),c=null},g.isDark=function(e,t){if(e<0||a<=e||t<0||a<=t)throw e+","+t;return o[e][t]},g.getModuleCount=function(){return a},g.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=u.getRSBlocks(e,r),o=f(),a=0;a<y.length;a++){var i=y[a];o.put(i.getMode(),4),o.put(i.getLength(),s.getLengthInBits(i.getMode(),e)),i.write(o)}var c=0;for(a=0;a<t.length;a++)c+=t[a].dataCount;if(o.getLengthInBits()<=8*c)break}n=e}b(!1,function(){for(var e=0,t=0,n=0;n<8;n+=1){b(!0,n);var r=s.getLostPoint(g);(0==n||e>r)&&(e=r,t=n)}return t}())},g.createTableTag=function(e,t){e=e||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",n+='">',n+="<tbody>";for(var r=0;r<g.getModuleCount();r+=1){n+="<tr>";for(var o=0;o<g.getModuleCount();o+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=g.isDark(r,o)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return(n+="</tbody>")+"</table>"},g.createSvgTag=function(e,t,n,r){var o={};"object"==typeof arguments[0]&&(e=(o=arguments[0]).cellSize,t=o.margin,n=o.alt,r=o.title),e=e||2,t=void 0===t?4*e:t,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var a,i,s,c,l=g.getModuleCount()*e+2*t,u="";for(c="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",u+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',u+=o.scalable?"":' width="'+l+'px" height="'+l+'px"',u+=' viewBox="0 0 '+l+" "+l+'" ',u+=' preserveAspectRatio="xMinYMin meet"',u+=r.text||n.text?' role="img" aria-labelledby="'+O([r.id,n.id].join(" ").trim())+'"':"",u+=">",u+=r.text?'<title id="'+O(r.id)+'">'+O(r.text)+"</title>":"",u+=n.text?'<description id="'+O(n.id)+'">'+O(n.text)+"</description>":"",u+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',u+='<path d="',i=0;i<g.getModuleCount();i+=1)for(s=i*e+t,a=0;a<g.getModuleCount();a+=1)g.isDark(i,a)&&(u+="M"+(a*e+t)+","+s+c);return(u+='" stroke="transparent" fill="black"/>')+"</svg>"},g.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var n=g.getModuleCount()*e+2*t,r=t,o=n-t;return v(n,n,(function(t,n){if(r<=t&&t<o&&r<=n&&n<o){var a=Math.floor((t-r)/e),i=Math.floor((n-r)/e);return g.isDark(i,a)?0:1}return 1}))},g.createImgTag=function(e,t,n){e=e||2,t=void 0===t?4*e:t;var r=g.getModuleCount()*e+2*t,o="";return o+="<img",o+=' src="',o+=g.createDataURL(e,t),o+='"',o+=' width="',o+=r,o+='"',o+=' height="',o+=r,o+='"',n&&(o+=' alt="',o+=O(n),o+='"'),o+"/>"};var O=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t};return g.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,n,r,o,a,i=1*g.getModuleCount()+2*e,s=e,c=i-e,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},u={"██":"▀","█ ":"▀"," █":" ","  ":" "},f="";for(t=0;t<i;t+=2){for(r=Math.floor((t-s)/1),o=Math.floor((t+1-s)/1),n=0;n<i;n+=1)a="█",s<=n&&n<c&&s<=t&&t<c&&g.isDark(r,Math.floor((n-s)/1))&&(a=" "),s<=n&&n<c&&s<=t+1&&t+1<c&&g.isDark(o,Math.floor((n-s)/1))?a+=" ":a+="█",f+=e<1&&t+1>=c?u[a]:l[a];f+="\n"}return i%2&&e>0?f.substring(0,f.length-i-1)+Array(i+1).join("▀"):f.substring(0,f.length-1)}(t);e-=1,t=void 0===t?2*e:t;var n,r,o,a,i=g.getModuleCount()*e+2*t,s=t,c=i-t,l=Array(e+1).join("██"),u=Array(e+1).join("  "),f="",d="";for(n=0;n<i;n+=1){for(o=Math.floor((n-s)/e),d="",r=0;r<i;r+=1)a=1,s<=r&&r<c&&s<=n&&n<c&&g.isDark(o,Math.floor((r-s)/e))&&(a=0),d+=a?l:u;for(o=0;o<e;o+=1)f+=d+"\n"}return f.substring(0,f.length-1)},g.renderTo2dContext=function(e,t){t=t||2;for(var n=g.getModuleCount(),r=0;r<n;r++)for(var o=0;o<n;o++)e.fillStyle=g.isDark(r,o)?"black":"white",e.fillRect(r*t,o*t,t,t)},g};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}}).default,e.createStringToBytes=function(e,t){var n=function(){for(var n=g(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},o=0,a={};;){var i=n.read();if(-1==i)break;var s=r(),c=r()<<8|r();a[String.fromCharCode(i<<8|s)]=c,o+=1}if(o!=t)throw o+" != "+t;return a}(),r="?".charCodeAt(0);return function(e){for(var t=[],o=0;o<e.length;o+=1){var a=e.charCodeAt(o);if(a<128)t.push(a);else{var i=n[e.charAt(o)];"number"==typeof i?(255&i)==i?t.push(i):(t.push(i>>>8),t.push(255&i)):t.push(r)}}return t}};var t,n,r,o,a,i={L:1,M:0,Q:3,H:2},s=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,a=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(o={}).getBCHTypeInfo=function(e){for(var t=e<<10;a(t)-a(n)>=0;)t^=n<<a(t)-a(n);return 21522^(e<<10|t)},o.getBCHTypeNumber=function(e){for(var t=e<<12;a(t)-a(r)>=0;)t^=r<<a(t)-a(r);return e<<12|t},o.getPatternPosition=function(e){return t[e-1]},o.getMaskFunction=function(e){switch(e){case 0:return function(e,t){return(e+t)%2==0};case 1:return function(e,t){return e%2==0};case 2:return function(e,t){return t%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case 5:return function(e,t){return e*t%2+e*t%3==0};case 6:return function(e,t){return(e*t%2+e*t%3)%2==0};case 7:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},o.getErrorCorrectPolynomial=function(e){for(var t=l([1],0),n=0;n<e;n+=1)t=t.multiply(l([1,c.gexp(n)],0));return t},o.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+e}}},o.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var o=0;o<t;o+=1){for(var a=0,i=e.isDark(r,o),s=-1;s<=1;s+=1)if(!(r+s<0||t<=r+s))for(var c=-1;c<=1;c+=1)o+c<0||t<=o+c||0==s&&0==c||i==e.isDark(r+s,o+c)&&(a+=1);a>5&&(n+=3+a-5)}for(r=0;r<t-1;r+=1)for(o=0;o<t-1;o+=1){var l=0;e.isDark(r,o)&&(l+=1),e.isDark(r+1,o)&&(l+=1),e.isDark(r,o+1)&&(l+=1),e.isDark(r+1,o+1)&&(l+=1),0!=l&&4!=l||(n+=3)}for(r=0;r<t;r+=1)for(o=0;o<t-6;o+=1)e.isDark(r,o)&&!e.isDark(r,o+1)&&e.isDark(r,o+2)&&e.isDark(r,o+3)&&e.isDark(r,o+4)&&!e.isDark(r,o+5)&&e.isDark(r,o+6)&&(n+=40);for(o=0;o<t;o+=1)for(r=0;r<t-6;r+=1)e.isDark(r,o)&&!e.isDark(r+1,o)&&e.isDark(r+2,o)&&e.isDark(r+3,o)&&e.isDark(r+4,o)&&!e.isDark(r+5,o)&&e.isDark(r+6,o)&&(n+=40);var u=0;for(o=0;o<t;o+=1)for(r=0;r<t;r+=1)e.isDark(r,o)&&(u+=1);return n+Math.abs(100*u/t/t-50)/5*10},o),c=function(){for(var e=new Array(256),t=new Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;return{glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}}}();function l(e,t){if(void 0===e.length)throw e.length+"/"+t;var n=function(){for(var n=0;n<e.length&&0==e[n];)n+=1;for(var r=new Array(e.length-n+t),o=0;o<e.length-n;o+=1)r[o]=e[o+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var o=0;o<e.getLength();o+=1)t[n+o]^=c.gexp(c.glog(r.getAt(n))+c.glog(e.getAt(o)));return l(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=c.glog(r.getAt(0))-c.glog(e.getAt(0)),n=new Array(r.getLength()),o=0;o<r.getLength();o+=1)n[o]=r.getAt(o);for(o=0;o<e.getLength();o+=1)n[o]^=c.gexp(c.glog(e.getAt(o))+t);return l(n,0).mod(e)}};return r}var u=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},n={getRSBlocks:function(n,r){var o=function(t,n){switch(n){case i.L:return e[4*(t-1)+0];case i.M:return e[4*(t-1)+1];case i.Q:return e[4*(t-1)+2];case i.H:return e[4*(t-1)+3];default:return}}(n,r);if(void 0===o)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var a=o.length/3,s=[],c=0;c<a;c+=1)for(var l=o[3*c+0],u=o[3*c+1],f=o[3*c+2],d=0;d<l;d+=1)s.push(t(u,f));return s}};return n}(),f=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){var n=Math.floor(t/8);return 1==(e[n]>>>7-t%8&1)},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},d=function(e){var t=e,n={getMode:function(){return 1},getLength:function(e){return t.length},write:function(e){for(var n=t,o=0;o+2<n.length;)e.put(r(n.substring(o,o+3)),10),o+=3;o<n.length&&(n.length-o==1?e.put(r(n.substring(o,o+1)),4):n.length-o==2&&e.put(r(n.substring(o,o+2)),7))}},r=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+o(e.charAt(n));return t},o=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return n},p=function(e){var t=e,n={getMode:function(){return 2},getLength:function(e){return t.length},write:function(e){for(var n=t,o=0;o+1<n.length;)e.put(45*r(n.charAt(o))+r(n.charAt(o+1)),11),o+=2;o<n.length&&e.put(r(n.charAt(o)),6)}},r=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return n},h=function(t){var n=e.stringToBytes(t);return{getMode:function(){return 4},getLength:function(e){return n.length},write:function(e){for(var t=0;t<n.length;t+=1)e.put(n[t],8)}}},m=function(t){var n=e.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(e,t){var r=n("友");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var r=n(t),o={getMode:function(){return 8},getLength:function(e){return~~(r.length/2)},write:function(e){for(var t=r,n=0;n+1<t.length;){var o=(255&t[n])<<8|255&t[n+1];if(33088<=o&&o<=40956)o-=33088;else{if(!(57408<=o&&o<=60351))throw"illegal char at "+(n+1)+"/"+o;o-=49472}o=192*(o>>>8&255)+(255&o),e.put(o,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)}};return o},y=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n=n||0,r=r||e.length;for(var o=0;o<r;o+=1)t.writeByte(e[o+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+"]"}};return t},g=function(e){var t=e,n=0,r=0,o=0,a={read:function(){for(;o<8;){if(n>=t.length){if(0==o)return-1;throw"unexpected end of file./"+o}var e=t.charAt(n);if(n+=1,"="==e)return o=0,-1;e.match(/^\s$/)||(r=r<<6|i(e.charCodeAt(0)),o+=6)}var a=r>>>o-8&255;return o-=8,a}},i=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return a},v=function(e,t,n){for(var r=function(e,t){var n=e,r=t,o=new Array(e*t),a={setPixel:function(e,t,r){o[t*n+e]=r},write:function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=i(2);e.writeByte(2);for(var o=0;t.length-o>255;)e.writeByte(255),e.writeBytes(t,o,255),o+=255;e.writeByte(t.length-o),e.writeBytes(t,o,t.length-o),e.writeByte(0),e.writeString(";")}},i=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,a=s(),i=0;i<t;i+=1)a.add(String.fromCharCode(i));a.add(String.fromCharCode(t)),a.add(String.fromCharCode(n));var c,l,u,f=y(),d=(c=f,l=0,u=0,{write:function(e,t){if(e>>>t!=0)throw"length over";for(;l+t>=8;)c.writeByte(255&(e<<l|u)),t-=8-l,e>>>=8-l,u=0,l=0;u|=e<<l,l+=t},flush:function(){l>0&&c.writeByte(u)}});d.write(t,r);var p=0,h=String.fromCharCode(o[p]);for(p+=1;p<o.length;){var m=String.fromCharCode(o[p]);p+=1,a.contains(h+m)?h+=m:(d.write(a.indexOf(h),r),a.size()<4095&&(a.size()==1<<r&&(r+=1),a.add(h+m)),h=m)}return d.write(a.indexOf(h),r),d.write(n,r),d.flush(),f.toByteArray()},s=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return a}(e,t),o=0;o<t;o+=1)for(var a=0;a<e;a+=1)r.setPixel(a,o,n(a,o));var i=y();r.write(i);for(var s=function(){var e=0,t=0,n=0,r="",o={},a=function(e){r+=String.fromCharCode(i(63&e))},i=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return o.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)a(e>>>t-6),t-=6},o.flush=function(){if(t>0&&(a(e<<6-t),e=0,t=0),n%3!=0)for(var o=3-n%3,i=0;i<o;i+=1)r+="="},o.toString=function(){return r},o}(),c=i.toByteArray(),l=0;l<c.length;l+=1)s.writeByte(c[l]);return s.flush(),"data:image/gif;base64,"+s};return e}();o.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}(e)},void 0===(r="function"==typeof(n=function(){return o})?n.apply(t,[]):n)||(e.exports=r)},448:(e,t,n)=>{"use strict";var r=n(294),o=n(418),a=n(840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var s=new Set,c={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},m={};function y(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0===o.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!p.call(m,e)||!p.call(h,e)&&(d.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,C=60106,_=60107,A=60108,k=60114,O=60109,P=60110,N=60112,T=60113,I=60120,R=60115,D=60116,x=60121,M=60128,L=60129,B=60130,j=60131;if("function"==typeof Symbol&&Symbol.for){var F=Symbol.for;S=F("react.element"),C=F("react.portal"),_=F("react.fragment"),A=F("react.strict_mode"),k=F("react.profiler"),O=F("react.provider"),P=F("react.context"),N=F("react.forward_ref"),T=F("react.suspense"),I=F("react.suspense_list"),R=F("react.memo"),D=F("react.lazy"),x=F("react.block"),F("react.scope"),M=F("react.opaque.id"),L=F("react.debug_trace_mode"),B=F("react.offscreen"),j=F("react.legacy_hidden")}var U,H="function"==typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=H&&e[H]||e["@@iterator"])?e:null}function K(e){if(void 0===U)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var W=!1;function z(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s])return"\n"+o[i].replace(" at new "," at ")}while(1<=i&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?K(e):""}function G(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return z(e.type,!1);case 11:return z(e.type.render,!1);case 22:return z(e.type._render,!1);case 1:return z(e.type,!0);default:return""}}function X(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _:return"Fragment";case C:return"Portal";case k:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case O:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return X(e.type);case x:return X(e._render);case D:t=e._payload,e=e._init;try{return X(e(t))}catch(e){}}return null}function J(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function le(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var he,me,ye=(me=function(e,t){if(e.namespaceURI!==fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((he=he||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=he.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function Ee(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ve).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Se=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ae(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Oe=null,Pe=null;function Ne(e){if(e=no(e)){if("function"!=typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=oo(t),ke(e.stateNode,e.type,t))}}function Te(e){Oe?Pe?Pe.push(e):Pe=[e]:Oe=e}function Ie(){if(Oe){var e=Oe,t=Pe;if(Pe=Oe=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,o){return e(t,n,r,o)}function xe(){}var Me=Re,Le=!1,Be=!1;function je(){null===Oe&&null===Pe||(xe(),Ie())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=oo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Ue=!1;if(f)try{var He={};Object.defineProperty(He,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",He,He),window.removeEventListener("test",He,He)}catch(me){Ue=!1}function Ve(e,t,n,r,o,a,i,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var Ke=!1,We=null,ze=!1,Ge=null,Xe={onError:function(e){Ke=!0,We=e}};function Je(e,t,n,r,o,a,i,s,c){Ke=!1,We=null,Ve.apply(Xe,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Qe(e){if(qe(e)!==e)throw Error(i(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Qe(o),e;if(a===r)return Qe(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $e(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,ot=!1,at=[],it=null,st=null,ct=null,lt=new Map,ut=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function ht(e,t){switch(e){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,o,a),null!==t&&null!==(t=no(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function yt(e){var t=to(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=no(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=no(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==it&&gt(it)&&(it=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(vt),ut.forEach(vt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function Et(e){function t(t){return wt(t,e)}if(0<at.length){wt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==it&&wt(it,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),lt.forEach(t),ut.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ct={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},_t={},At={};function kt(e){if(_t[e])return _t[e];if(!Ct[e])return e;var t,n=Ct[e];for(t in n)if(n.hasOwnProperty(t)&&t in At)return _t[e]=n[t];return e}f&&(At=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var Ot=kt("animationend"),Pt=kt("animationiteration"),Nt=kt("animationstart"),Tt=kt("transitionend"),It=new Map,Rt=new Map,Dt=["abort","abort",Ot,"animationEnd",Pt,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Tt,"transitionEnd","waiting","waiting"];function xt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),Rt.set(r,t),It.set(r,o),l(o,[r])}}(0,a.unstable_now)();var Mt=8;function Lt(e){if(0!=(1&e))return Mt=15,1;if(0!=(2&e))return Mt=14,2;if(0!=(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!=(32&e)?(Mt=11,32):0!=(t=192&e)?(Mt=10,t):0!=(256&e)?(Mt=9,256):0!=(t=3584&e)?(Mt=8,t):0!=(4096&e)?(Mt=7,4096):0!=(t=4186112&e)?(Mt=6,t):0!=(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!=(134217728&e)?(Mt=3,134217728):0!=(t=805306368&e)?(Mt=2,t):0!=(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,o=0,a=e.expiredLanes,i=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,o=Mt=15;else if(0!=(a=134217727&n)){var c=a&~i;0!==c?(r=Lt(c),o=Mt):0!=(s&=a)&&(r=Lt(s),o=Mt)}else 0!=(a=n&~i)?(r=Lt(a),o=Mt):0!==s&&(r=Lt(s),o=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&i)){if(Lt(t),o<=Mt)return t;Mt=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-Kt(t)),r|=e[n],t&=~o;return r}function jt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Ft(10,t):e;case 10:return 0===(e=Ut(192&~t))?Ft(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&0===(e=Ut(4186112&~t))&&(e=512),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function Ut(e){return e&-e}function Ht(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/zt|0)|0},Wt=Math.log,zt=Math.LN2,Gt=a.unstable_UserBlockingPriority,Xt=a.unstable_runWithPriority,Jt=!0;function qt(e,t,n,r){Le||xe();var o=Qt,a=Le;Le=!0;try{De(o,e,t,n,r)}finally{(Le=a)||je()}}function Yt(e,t,n,r){Xt(Gt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var o;if(Jt)if((o=0==(4&t))&&0<at.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),at.push(e);else{var a=Zt(e,t,n,r);if(null===a)o&&ht(e,r);else{if(o){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void at.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return it=mt(it,e,t,n,r,o),!0;case"dragenter":return st=mt(st,e,t,n,r,o),!0;case"mouseover":return ct=mt(ct,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,ut.set(a,mt(ut.get(a)||null,e,t,n,r,o)),!0}return!1}(a,e,t,n,r))return;ht(e,r)}xr(e,t,r,null,n)}}}function Zt(e,t,n,r){var o=Ae(r);if(null!==(o=to(o))){var a=qe(o);if(null===a)o=null;else{var i=a.tag;if(13===i){if(null!==(o=Ye(a)))return o;o=null}else if(3===i){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null)}}return xr(e,t,r,o,n),null}var $t=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,o="value"in $t?$t.value:$t.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return tn=o.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?on:an,this.isPropagationStopped=an,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,un,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(fn),pn=o({},fn,{view:0,detail:0}),hn=sn(pn),mn=o({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(cn=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=cn=0,un=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=sn(mn),gn=sn(o({},mn,{dataTransfer:0})),vn=sn(o({},pn,{relatedTarget:0})),bn=sn(o({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=o({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),En=sn(wn),Sn=sn(o({},fn,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function On(){return kn}var Pn=o({},pn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Pn),Tn=sn(o({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(o({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),Rn=sn(o({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=o({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xn=sn(Dn),Mn=[9,13,27,32],Ln=f&&"CompositionEvent"in window,Bn=null;f&&"documentMode"in document&&(Bn=document.documentMode);var jn=f&&"TextEvent"in window&&!Bn,Fn=f&&(!Ln||Bn&&8<Bn&&11>=Bn),Un=String.fromCharCode(32),Hn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1,zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Xn(e,t,n,r){Te(r),0<(t=Lr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jn=null,qn=null;function Yn(e){Pr(e,0)}function Qn(e){if(Q(ro(e)))return e}function Zn(e,t){if("change"===e)return t}var $n=!1;if(f){var er;if(f){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"==typeof nr.oninput}er=tr}else er=!1;$n=er&&(!document.documentMode||9<document.documentMode)}function rr(){Jn&&(Jn.detachEvent("onpropertychange",or),qn=Jn=null)}function or(e){if("value"===e.propertyName&&Qn(qn)){var t=[];if(Xn(t,qn,e,Ae(e)),e=Yn,Le)e(t);else{Le=!0;try{Re(e,t)}finally{Le=!1,je()}}}}function ar(e,t,n){"focusin"===e?(rr(),qn=n,(Jn=t).attachEvent("onpropertychange",or)):"focusout"===e&&rr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(qn)}function sr(e,t){if("click"===e)return Qn(t)}function cr(e,t){if("input"===e||"change"===e)return Qn(t)}var lr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ur=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,wr=null,Er=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Er||null==vr||vr!==Z(r)||(r="selectionStart"in(r=vr)&&yr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=Lr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}xt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),xt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),xt(Dt,2);for(var Cr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<Cr.length;_r++)Rt.set(Cr[_r],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,c,l){if(Je.apply(this,arguments),Ke){if(!Ke)throw Error(i(198));var u=We;Ke=!1,We=null,ze||(ze=!0,Ge=u)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&o.isPropagationStopped())break e;Or(o,s,l),a=c}else for(i=0;i<r.length;i++){if(c=(s=r[i]).instance,l=s.currentTarget,s=s.listener,c!==a&&o.isPropagationStopped())break e;Or(o,s,l),a=c}}}if(ze)throw e=Ge,ze=!1,Ge=null,e}function Nr(e,t){var n=ao(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Tr="_reactListening"+Math.random().toString(36).slice(2);function Ir(e){e[Tr]||(e[Tr]=!0,s.forEach((function(t){kr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&kr.has(e)){if("scroll"!==e)return;o|=2,a=r}var i=ao(a),s=e+"__"+(t?"capture":"bubble");i.has(s)||(t&&(o|=4),Dr(a,e,o,t),i.add(s))}function Dr(e,t,n,r){var o=Rt.get(t);switch(void 0===o?2:o){case 0:o=qt;break;case 1:o=Yt;break;default:o=Qt}n=o.bind(null,t,n,e),o=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function xr(e,t,n,r,o){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&((c=i.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=to(s)))return;if(5===(c=i.tag)||6===c){r=a=i;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Be)return e();Be=!0;try{return Me(e,t,n)}finally{Be=!1,je()}}((function(){var r=a,o=Ae(n),i=[];e:{var s=It.get(e);if(void 0!==s){var c=dn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":c=Nn;break;case"focusin":l="focus",c=vn;break;case"focusout":l="blur",c=vn;break;case"beforeblur":case"afterblur":c=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=In;break;case Ot:case Pt:case Nt:c=bn;break;case Tt:c=Rn;break;case"scroll":c=hn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Tn}var u=0!=(4&t),f=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=Fe(h,d))&&u.push(Mr(h,m,p))),f)break;h=h.return}0<u.length&&(s=new c(s,l,null,n,o),i.push({event:s,listeners:u}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!to(l)&&!l[$r])&&(c||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?to(l):null)&&(l!==(f=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=yn,m="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==c?s:ro(c),p=null==l?s:ro(l),(s=new u(m,h+"leave",c,n,o)).target=f,s.relatedTarget=p,m=null,to(o)===r&&((u=new u(d,h+"enter",l,n,o)).target=p,u.relatedTarget=f,m=u),f=m,c&&l)e:{for(d=l,h=0,p=u=c;p;p=Br(p))h++;for(p=0,m=d;m;m=Br(m))p++;for(;0<h-p;)u=Br(u),h--;for(;0<p-h;)d=Br(d),p--;for(;h--;){if(u===d||null!==d&&u===d.alternate)break e;u=Br(u),d=Br(d)}u=null}else u=null;null!==c&&jr(i,s,c,u,!1),null!==l&&null!==f&&jr(i,f,l,u,!0)}if("select"===(c=(s=r?ro(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=Zn;else if(Gn(s))if($n)y=cr;else{y=ir;var g=ar}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=sr);switch(y&&(y=y(e,r))?Xn(i,y,n,o):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&oe(s,"number",s.value)),g=r?ro(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(vr=g,br=r,wr=null);break;case"focusout":wr=br=vr=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,Sr(i,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Sr(i,n,o)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(v=nn()):(en="value"in($t=o)?$t.value:$t.textContent,Wn=!0)),0<(g=Lr(r,b)).length&&(b=new Sn(b,e,null,n,o),i.push({event:b,listeners:g}),(v||null!==(v=Kn(n)))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Un);case"textInput":return(e=t.data)===Un&&Hn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Ln&&Vn(e,t)?(e=nn(),tn=en=$t=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Lr(r,"onBeforeInput")).length&&(o=new Sn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=v)}Pr(i,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Fe(e,n))&&r.unshift(Mr(e,a,o)),null!=(a=Fe(e,t))&&r.push(Mr(e,a,o))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(c=Fe(n,a))&&i.unshift(Mr(n,c,s)):o||null!=(c=Fe(n,a))&&i.push(Mr(n,c,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function Fr(){}var Ur=null,Hr=null;function Vr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"==typeof setTimeout?setTimeout:void 0,zr="function"==typeof clearTimeout?clearTimeout:void 0;function Gr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Xr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Jr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var qr=0,Yr=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Yr,Zr="__reactProps$"+Yr,$r="__reactContainer$"+Yr,eo="__reactEvents$"+Yr;function to(e){var t=e[Qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$r]||n[Qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Jr(e);null!==e;){if(n=e[Qr])return n;e=Jr(e)}return t}n=(e=n).parentNode}return null}function no(e){return!(e=e[Qr]||e[$r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ro(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function oo(e){return e[Zr]||null}function ao(e){var t=e[eo];return void 0===t&&(t=e[eo]=new Set),t}var io=[],so=-1;function co(e){return{current:e}}function lo(e){0>so||(e.current=io[so],io[so]=null,so--)}function uo(e,t){so++,io[so]=e.current,e.current=t}var fo={},po=co(fo),ho=co(!1),mo=fo;function yo(e,t){var n=e.type.contextTypes;if(!n)return fo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function go(e){return null!=e.childContextTypes}function vo(){lo(ho),lo(po)}function bo(e,t,n){if(po.current!==fo)throw Error(i(168));uo(po,t),uo(ho,n)}function wo(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(i(108,X(t)||"Unknown",a));return o({},n,r)}function Eo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fo,mo=po.current,uo(po,e),uo(ho,ho.current),!0}function So(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=wo(e,t,mo),r.__reactInternalMemoizedMergedChildContext=e,lo(ho),lo(po),uo(po,e)):lo(ho),uo(ho,n)}var Co=null,_o=null,Ao=a.unstable_runWithPriority,ko=a.unstable_scheduleCallback,Oo=a.unstable_cancelCallback,Po=a.unstable_shouldYield,No=a.unstable_requestPaint,To=a.unstable_now,Io=a.unstable_getCurrentPriorityLevel,Ro=a.unstable_ImmediatePriority,Do=a.unstable_UserBlockingPriority,xo=a.unstable_NormalPriority,Mo=a.unstable_LowPriority,Lo=a.unstable_IdlePriority,Bo={},jo=void 0!==No?No:function(){},Fo=null,Uo=null,Ho=!1,Vo=To(),Ko=1e4>Vo?To:function(){return To()-Vo};function Wo(){switch(Io()){case Ro:return 99;case Do:return 98;case xo:return 97;case Mo:return 96;case Lo:return 95;default:throw Error(i(332))}}function zo(e){switch(e){case 99:return Ro;case 98:return Do;case 97:return xo;case 96:return Mo;case 95:return Lo;default:throw Error(i(332))}}function Go(e,t){return e=zo(e),Ao(e,t)}function Xo(e,t,n){return e=zo(e),ko(e,t,n)}function Jo(){if(null!==Uo){var e=Uo;Uo=null,Oo(e)}qo()}function qo(){if(!Ho&&null!==Fo){Ho=!0;var e=0;try{var t=Fo;Go(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fo=null}catch(t){throw null!==Fo&&(Fo=Fo.slice(e+1)),ko(Ro,Jo),t}finally{Ho=!1}}}var Yo=E.ReactCurrentBatchConfig;function Qo(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Zo=co(null),$o=null,ea=null,ta=null;function na(){ta=ea=$o=null}function ra(e){var t=Zo.current;lo(Zo),e.type._context._currentValue=t}function oa(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){$o=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Li=!0),e.firstContext=null)}function ia(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===$o)throw Error(i(308));ea=t,$o.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ca(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pa(e,t,n,r){var a=e.updateQueue;sa=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,c=a.shared.pending;if(null!==c){a.shared.pending=null;var l=c,u=l.next;l.next=null,null===s?i=u:s.next=u,s=l;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==s&&(null===d?f.firstBaseUpdate=u:d.next=u,f.lastBaseUpdate=l)}}if(null!==i){for(d=a.baseState,s=0,f=u=l=null;;){c=i.lane;var p=i.eventTime;if((r&c)===c){null!==f&&(f=f.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,m=i;switch(c=t,p=n,m.tag){case 1:if("function"==typeof(h=m.payload)){d=h.call(p,d,c);break e}d=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(c="function"==typeof(h=m.payload)?h.call(p,d,c):h))break e;d=o({},d,c);break e;case 2:sa=!0}}null!==i.callback&&(e.flags|=32,null===(c=a.effects)?a.effects=[i]:c.push(i))}else p={eventTime:p,lane:c,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===f?(u=f=p,l=d):f=f.next=p,s|=c;if(null===(i=i.next)){if(null===(c=a.shared.pending))break;i=c.next,c.next=null,a.lastBaseUpdate=c,a.shared.pending=null}}null===f&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=f,Fs|=s,e.lanes=s,e.memoizedState=d}}function ha(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(i(191,o));o.call(r)}}}var ma=(new r.Component).refs;function ya(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=uc(),o=fc(e),a=ua(r,o);a.payload=t,null!=n&&(a.callback=n),fa(e,a),dc(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=uc(),o=fc(e),a=ua(r,o);a.tag=1,a.payload=t,null!=n&&(a.callback=n),fa(e,a),dc(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=uc(),r=fc(e),o=ua(n,r);o.tag=2,null!=t&&(o.callback=t),fa(e,o),dc(e,r,n)}};function va(e,t,n,r,o,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!(t.prototype&&t.prototype.isPureReactComponent&&fr(n,r)&&fr(o,a))}function ba(e,t,n){var r=!1,o=fo,a=t.contextType;return"object"==typeof a&&null!==a?a=ia(a):(o=go(t)?mo:po.current,a=(r=null!=(r=t.contextTypes))?yo(e,o):fo),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function Ea(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=ma,ca(e);var a=t.contextType;"object"==typeof a&&null!==a?o.context=ia(a):(a=go(t)?mo:po.current,o.context=yo(e,a)),pa(e,n,o,r),o.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ga.enqueueReplaceState(o,o.state,null),pa(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var Sa=Array.isArray;function Ca(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===ma&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Aa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Wc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Jc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=Ca(e,t,n),r.return=e,r):((r=zc(n.type,n.key,n.props,null,e.mode,r)).ref=Ca(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Gc(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Jc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(n=zc(t.type,t.key,t.props,null,e.mode,n)).ref=Ca(e,null,t),n.return=e,n;case C:return(t=qc(t,e.mode,n)).return=e,t}if(Sa(t)||V(t))return(t=Gc(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===o?n.type===_?f(e,t,n.props.children,r,o):l(e,t,n,r):null;case C:return n.key===o?u(e,t,n,r):null}if(Sa(n)||V(n))return null!==o?null:f(e,t,n,r,null);_a(e,n)}return null}function h(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,o,r.key):l(t,e,r,o);case C:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(Sa(r)||V(r))return f(t,e=e.get(n)||null,r,o,null);_a(t,r)}return null}function m(o,i,s,c){for(var l=null,u=null,f=i,m=i=0,y=null;null!==f&&m<s.length;m++){f.index>m?(y=f,f=null):y=f.sibling;var g=p(o,f,s[m],c);if(null===g){null===f&&(f=y);break}e&&f&&null===g.alternate&&t(o,f),i=a(g,i,m),null===u?l=g:u.sibling=g,u=g,f=y}if(m===s.length)return n(o,f),l;if(null===f){for(;m<s.length;m++)null!==(f=d(o,s[m],c))&&(i=a(f,i,m),null===u?l=f:u.sibling=f,u=f);return l}for(f=r(o,f);m<s.length;m++)null!==(y=h(f,o,m,s[m],c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),i=a(y,i,m),null===u?l=y:u.sibling=y,u=y);return e&&f.forEach((function(e){return t(o,e)})),l}function y(o,s,c,l){var u=V(c);if("function"!=typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var f=u=null,m=s,y=s=0,g=null,v=c.next();null!==m&&!v.done;y++,v=c.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=p(o,m,v.value,l);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,y),null===f?u=b:f.sibling=b,f=b,m=g}if(v.done)return n(o,m),u;if(null===m){for(;!v.done;y++,v=c.next())null!==(v=d(o,v.value,l))&&(s=a(v,s,y),null===f?u=v:f.sibling=v,f=v);return u}for(m=r(o,m);!v.done;y++,v=c.next())null!==(v=h(m,o,y,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=a(v,s,y),null===f?u=v:f.sibling=v,f=v);return e&&m.forEach((function(e){return t(o,e)})),u}return function(e,r,a,c){var l="object"==typeof a&&null!==a&&a.type===_&&null===a.key;l&&(a=a.props.children);var u="object"==typeof a&&null!==a;if(u)switch(a.$$typeof){case S:e:{for(u=a.key,l=r;null!==l;){if(l.key===u){if(7===l.tag){if(a.type===_){n(e,l.sibling),(r=o(l,a.props.children)).return=e,e=r;break e}}else if(l.elementType===a.type){n(e,l.sibling),(r=o(l,a.props)).ref=Ca(e,l,a),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===_?((r=Gc(a.props.children,e.mode,c,a.key)).return=e,e=r):((c=zc(a.type,a.key,a.props,null,e.mode,c)).ref=Ca(e,r,a),c.return=e,e=c)}return s(e);case C:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=o(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=qc(a,e.mode,c)).return=e,e=r}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,a)).return=e,e=r):(n(e,r),(r=Jc(a,e.mode,c)).return=e,e=r),s(e);if(Sa(a))return m(e,r,a,c);if(V(a))return y(e,r,a,c);if(u&&_a(e,a),void 0===a&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,X(e.type)||"Component"))}return n(e,r)}}var ka=Aa(!0),Oa=Aa(!1),Pa={},Na=co(Pa),Ta=co(Pa),Ia=co(Pa);function Ra(e){if(e===Pa)throw Error(i(174));return e}function Da(e,t){switch(uo(Ia,t),uo(Ta,e),uo(Na,Pa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}lo(Na),uo(Na,t)}function xa(){lo(Na),lo(Ta),lo(Ia)}function Ma(e){Ra(Ia.current);var t=Ra(Na.current),n=pe(t,e.type);t!==n&&(uo(Ta,e),uo(Na,n))}function La(e){Ta.current===e&&(lo(Na),lo(Ta))}var Ba=co(0);function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fa=null,Ua=null,Ha=!1;function Va(e,t){var n=Vc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ka(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(Ha){var t=Ua;if(t){var n=t;if(!Ka(e,t)){if(!(t=Xr(n.nextSibling))||!Ka(e,t))return e.flags=-1025&e.flags|2,Ha=!1,void(Fa=e);Va(Fa,n)}Fa=e,Ua=Xr(t.firstChild)}else e.flags=-1025&e.flags|2,Ha=!1,Fa=e}}function za(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fa=e}function Ga(e){if(e!==Fa)return!1;if(!Ha)return za(e),Ha=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Ua;t;)Va(e,t),t=Xr(t.nextSibling);if(za(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ua=Xr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ua=null}}else Ua=Fa?Xr(e.stateNode.nextSibling):null;return!0}function Xa(){Ua=Fa=null,Ha=!1}var Ja=[];function qa(){for(var e=0;e<Ja.length;e++)Ja[e]._workInProgressVersionPrimary=null;Ja.length=0}var Ya=E.ReactCurrentDispatcher,Qa=E.ReactCurrentBatchConfig,Za=0,$a=null,ei=null,ti=null,ni=!1,ri=!1;function oi(){throw Error(i(321))}function ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function ii(e,t,n,r,o,a){if(Za=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Ri:Di,e=n(r,o),ri){a=0;do{if(ri=!1,!(25>a))throw Error(i(301));a+=1,ti=ei=null,t.updateQueue=null,Ya.current=xi,e=n(r,o)}while(ri)}if(Ya.current=Ii,t=null!==ei&&null!==ei.next,Za=0,ti=ei=$a=null,ni=!1,t)throw Error(i(300));return e}function si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ti?$a.memoizedState=ti=e:ti=ti.next=e,ti}function ci(){if(null===ei){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=ei.next;var t=null===ti?$a.memoizedState:ti.next;if(null!==t)ti=t,ei=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ei=e).memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},null===ti?$a.memoizedState=ti=e:ti=ti.next=e}return ti}function li(e,t){return"function"==typeof t?t(e):t}function ui(e){var t=ci(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ei,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var c=s=a=null,l=o;do{var u=l.lane;if((Za&u)===u)null!==c&&(c=c.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var f={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(s=c=f,a=r):c=c.next=f,$a.lanes|=u,Fs|=u}l=l.next}while(null!==l&&l!==o);null===c?a=r:c.next=s,lr(r,t.memoizedState)||(Li=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fi(e){var t=ci(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);lr(a,t.memoizedState)||(Li=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function di(e,t,n){var r=t._getVersion;r=r(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Za&e)===e)&&(t._workInProgressVersionPrimary=r,Ja.push(t))),e)return n(t._source);throw Ja.push(t),Error(i(350))}function pi(e,t,n,r){var o=Is;if(null===o)throw Error(i(349));var a=t._getVersion,s=a(t._source),c=Ya.current,l=c.useState((function(){return di(o,t,n)})),u=l[1],f=l[0];l=ti;var d=e.memoizedState,p=d.refs,h=p.getSnapshot,m=d.source;d=d.subscribe;var y=$a;return e.memoizedState={refs:p,source:t,subscribe:r},c.useEffect((function(){p.getSnapshot=n,p.setSnapshot=u;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(u(e),e=fc(y),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var r=o.entanglements,i=e;0<i;){var c=31-Kt(i),l=1<<c;r[c]|=e,i&=~l}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=fc(y);o.mutableReadLanes|=r&o.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),lr(h,n)&&lr(m,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:f}).dispatch=u=Ti.bind(null,$a,e),l.queue=e,l.baseQueue=null,f=di(o,t,n),l.memoizedState=l.baseState=f),f}function hi(e,t,n){return pi(ci(),e,t,n)}function mi(e){var t=si();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:e}).dispatch=Ti.bind(null,$a,e),[t.memoizedState,e]}function yi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gi(e){return e={current:e},si().memoizedState=e}function vi(){return ci().memoizedState}function bi(e,t,n,r){var o=si();$a.flags|=e,o.memoizedState=yi(1|t,n,void 0,void 0===r?null:r)}function wi(e,t,n,r){var o=ci();r=void 0===r?null:r;var a=void 0;if(null!==ei){var i=ei.memoizedState;if(a=i.destroy,null!==r&&ai(r,i.deps))return void yi(t,n,a,r)}$a.flags|=e,o.memoizedState=yi(1|t,n,a,r)}function Ei(e,t){return bi(516,4,e,t)}function Si(e,t){return wi(516,4,e,t)}function Ci(e,t){return wi(4,2,e,t)}function _i(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ai(e,t,n){return n=null!=n?n.concat([e]):null,wi(4,2,_i.bind(null,t,e),n)}function ki(){}function Oi(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pi(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ai(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ni(e,t){var n=Wo();Go(98>n?98:n,(function(){e(!0)})),Go(97<n?97:n,(function(){var n=Qa.transition;Qa.transition=1;try{e(!1),t()}finally{Qa.transition=n}}))}function Ti(e,t,n){var r=uc(),o=fc(e),a={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?a.next=a:(a.next=i.next,i.next=a),t.pending=a,i=e.alternate,e===$a||null!==i&&i===$a)ri=ni=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,c=i(s,n);if(a.eagerReducer=i,a.eagerState=c,lr(c,s))return}catch(e){}dc(e,o,r)}}var Ii={readContext:ia,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useOpaqueIdentifier:oi,unstable_isNewReconciler:!1},Ri={readContext:ia,useCallback:function(e,t){return si().memoizedState=[e,void 0===t?null:t],e},useContext:ia,useEffect:Ei,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,bi(4,2,_i.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bi(4,2,e,t)},useMemo:function(e,t){var n=si();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=si();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ti.bind(null,$a,e),[r.memoizedState,e]},useRef:gi,useState:mi,useDebugValue:ki,useDeferredValue:function(e){var t=mi(e),n=t[0],r=t[1];return Ei((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=mi(!1),t=e[0];return gi(e=Ni.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=si();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},pi(r,e,t,n)},useOpaqueIdentifier:function(){if(Ha){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(qr++).toString(36))),Error(i(355))})),n=mi(t)[1];return 0==(2&$a.mode)&&($a.flags|=516,yi(5,(function(){n("r:"+(qr++).toString(36))}),void 0,null)),t}return mi(t="r:"+(qr++).toString(36)),t},unstable_isNewReconciler:!1},Di={readContext:ia,useCallback:Oi,useContext:ia,useEffect:Si,useImperativeHandle:Ai,useLayoutEffect:Ci,useMemo:Pi,useReducer:ui,useRef:vi,useState:function(){return ui(li)},useDebugValue:ki,useDeferredValue:function(e){var t=ui(li),n=t[0],r=t[1];return Si((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=ui(li)[0];return[vi().current,e]},useMutableSource:hi,useOpaqueIdentifier:function(){return ui(li)[0]},unstable_isNewReconciler:!1},xi={readContext:ia,useCallback:Oi,useContext:ia,useEffect:Si,useImperativeHandle:Ai,useLayoutEffect:Ci,useMemo:Pi,useReducer:fi,useRef:vi,useState:function(){return fi(li)},useDebugValue:ki,useDeferredValue:function(e){var t=fi(li),n=t[0],r=t[1];return Si((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=fi(li)[0];return[vi().current,e]},useMutableSource:hi,useOpaqueIdentifier:function(){return fi(li)[0]},unstable_isNewReconciler:!1},Mi=E.ReactCurrentOwner,Li=!1;function Bi(e,t,n,r){t.child=null===e?Oa(t,null,n,r):ka(t,e.child,n,r)}function ji(e,t,n,r,o){n=n.render;var a=t.ref;return aa(t,o),r=ii(e,t,n,r,a,o),null===e||Li?(t.flags|=1,Bi(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,rs(e,t,o))}function Fi(e,t,n,r,o,a){if(null===e){var i=n.type;return"function"!=typeof i||Kc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ui(e,t,i,r,o,a))}return i=e.child,0==(o&a)&&(o=i.memoizedProps,(n=null!==(n=n.compare)?n:fr)(o,r)&&e.ref===t.ref)?rs(e,t,a):(t.flags|=1,(e=Wc(i,r)).ref=t.ref,e.return=t,t.child=e)}function Ui(e,t,n,r,o,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Li=!1,0==(a&o))return t.lanes=e.lanes,rs(e,t,a);0!=(16384&e.flags)&&(Li=!0)}return Ki(e,t,n,r,a)}function Hi(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},wc(0,n);else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wc(0,e),null;t.memoizedState={baseLanes:0},wc(0,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,wc(0,r);return Bi(e,t,o,n),t.child}function Vi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ki(e,t,n,r,o){var a=go(n)?mo:po.current;return a=yo(t,a),aa(t,o),n=ii(e,t,n,r,a,o),null===e||Li?(t.flags|=1,Bi(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,rs(e,t,o))}function Wi(e,t,n,r,o){if(go(n)){var a=!0;Eo(t)}else a=!1;if(aa(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ba(t,n,r),Ea(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var c=i.context,l=n.contextType;l="object"==typeof l&&null!==l?ia(l):yo(t,l=go(n)?mo:po.current);var u=n.getDerivedStateFromProps,f="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;f||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||c!==l)&&wa(t,i,r,l),sa=!1;var d=t.memoizedState;i.state=d,pa(t,r,i,o),c=t.memoizedState,s!==r||d!==c||ho.current||sa?("function"==typeof u&&(ya(t,n,u,r),c=t.memoizedState),(s=sa||va(t,n,s,r,d,c,l))?(f||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4)):("function"==typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=l,r=s):("function"==typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,la(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Qo(t.type,s),i.props=l,f=t.pendingProps,d=i.context,c="object"==typeof(c=n.contextType)&&null!==c?ia(c):yo(t,c=go(n)?mo:po.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==f||d!==c)&&wa(t,i,r,c),sa=!1,d=t.memoizedState,i.state=d,pa(t,r,i,o);var h=t.memoizedState;s!==f||d!==h||ho.current||sa?("function"==typeof p&&(ya(t,n,p,r),h=t.memoizedState),(l=sa||va(t,n,l,r,d,h,c))?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,c),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,c)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=c,r=l):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return zi(e,t,n,r,a,o)}function zi(e,t,n,r,o,a){Vi(e,t);var i=0!=(64&t.flags);if(!r&&!i)return o&&So(t,n,!1),rs(e,t,a);r=t.stateNode,Mi.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ka(t,e.child,null,a),t.child=ka(t,null,s,a)):Bi(e,t,s,a),t.memoizedState=r.state,o&&So(t,n,!0),t.child}function Gi(e){var t=e.stateNode;t.pendingContext?bo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bo(0,t.context,!1),Da(e,t.containerInfo)}var Xi,Ji,qi,Yi,Qi={dehydrated:null,retryLane:0};function Zi(e,t,n){var r,o=t.pendingProps,a=Ba.current,i=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),uo(Ba,1&a),null===e?(void 0!==o.fallback&&Wa(t),e=o.children,a=o.fallback,i?(e=$i(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qi,e):"number"==typeof o.unstable_expectedLoadTime?(e=$i(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qi,t.lanes=33554432,e):((n=Xc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(o=function(e,t,n,r,o){var a=t.mode,i=e.child;e=i.sibling;var s={mode:"hidden",children:n};return 0==(2&a)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=s,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wc(i,s),null!==e?r=Wc(e,r):(r=Gc(r,a,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,o.children,o.fallback,n),i=t.child,a=e.child.memoizedState,i.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=Qi,o):(n=function(e,t,n,r){var o=e.child;return e=o.sibling,n=Wc(o,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,o.children,n),t.memoizedState=null,n))}function $i(e,t,n,r){var o=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Xc(t,o,0,null),n=Gc(n,o,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),oa(e.return,t)}function ts(e,t,n,r,o,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o,i.lastEffect=a)}function ns(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Bi(e,t,r.children,n),0!=(2&(r=Ba.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&es(e,n);else if(19===e.tag)es(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(uo(Ba,r),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ts(t,!1,o,n,a,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ja(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ts(t,!0,n,null,a,t.lastEffect);break;case"together":ts(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function rs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Wc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Ha)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function as(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return go(t.type)&&vo(),null;case 3:return xa(),lo(ho),lo(po),qa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ji(t),null;case 5:La(t);var a=Ra(Ia.current);if(n=t.type,null!==e&&null!=t.stateNode)qi(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=Ra(Na.current),Ga(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Qr]=t,r[Zr]=s,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Ar.length;e++)Nr(Ar[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,s),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nr("invalid",r);break;case"textarea":ce(r,s),Nr("invalid",r)}for(var l in Ce(n,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"==typeof a?r.textContent!==a&&(e=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(e=["children",""+a]):c.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&Nr("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),ue(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Fr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,e===fe.html&&(e=de(n)),e===fe.html?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Qr]=t,e[Zr]=r,Xi(e,t,!1,!1),t.stateNode=e,l=_e(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ar.length;a++)Nr(Ar[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=$(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=o({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ce(e,r),a=se(e,r),Nr("invalid",e);break;default:a=r}Ce(n,a);var u=a;for(s in u)if(u.hasOwnProperty(s)){var f=u[s];"style"===s?Ee(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"==typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"==typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(c.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Nr("scroll",e):null!=f&&w(e,s,f,l))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ie(e,!!r.multiple,s,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Fr)}Vr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yi(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));n=Ra(Ia.current),Ra(Na.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=t,t.stateNode=r)}return null;case 13:return lo(Ba),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ba.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Is||0==(134217727&Fs)&&0==(134217727&Us)||yc(Is,Ds))),(r||n)&&(t.flags|=4),null);case 4:return xa(),Ji(t),null===e&&Ir(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(lo(Ba),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(l=r.rendering))if(s)os(r,!1);else{if(0!==Ls||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=ja(e))){for(t.flags|=64,os(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return uo(Ba,1&Ba.current|2),t.child}e=e.sibling}null!==r.tail&&Ko()>Ws&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=ja(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Ha)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ko()-r.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ko(),n.sibling=null,t=Ba.current,uo(Ba,s?1&t|2:1&t),n):null;case 23:case 24:return Ec(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function is(e){switch(e.tag){case 1:go(e.type)&&vo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(xa(),lo(ho),lo(po),qa(),0!=(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return lo(Ba),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return lo(Ba),null;case 4:return xa(),null;case 10:return ra(e),null;case 23:case 24:return Ec(),null;default:return null}}function ss(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function cs(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Xi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ji=function(){},qi=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Na.current);var i,s=null;switch(n){case"input":a=$(e,a),r=$(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=o({},a,{value:void 0}),r=o({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=Fr)}for(f in Ce(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var l=a[f];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(c.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var u=r[f];if(l=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(null!=u||null!=l))if("style"===f)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(f,n)),n=u;else"dangerouslySetInnerHTML"===f?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(f,u)):"children"===f?"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(f,""+u):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(c.hasOwnProperty(f)?(null!=u&&"onScroll"===f&&Nr("scroll",e),s||l===u||(s=[])):"object"==typeof u&&null!==u&&u.$$typeof===M?u.toString():(s=s||[]).push(f,u))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Yi=function(e,t,n,r){n!==r&&(t.flags|=4)};var ls="function"==typeof WeakMap?WeakMap:Map;function us(e,t,n){(n=ua(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,qs=r),cs(0,t)},n}function fs(e,t,n){(n=ua(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return cs(0,t),r(o)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ys?Ys=new Set([this]):Ys.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ds="function"==typeof WeakSet?WeakSet:Set;function ps(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){jc(e,t)}else t.current=null}function hs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(i(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;r=o.next,0!=(4&(o=o.tag))&&0!=(1&o)&&(Mc(n,e),xc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qo(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ha(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ha(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Vr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Et(n)))))}throw Error(i(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,r.style.display=we("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function gs(e,t){if(_o&&"function"==typeof _o.onCommitFiberUnmount)try{_o.onCommitFiberUnmount(Co,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,o=r.destroy;if(r=r.tag,void 0!==o)if(0!=(4&r))Mc(t,n);else{r=t;try{o()}catch(e){jc(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ps(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){jc(t,e)}break;case 5:ps(t);break;case 4:Cs(e,t)}}function vs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bs(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(bs(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Es(e,n,t):Ss(e,n,t)}function Es(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Fr));else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Ss(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Cs(e,t){for(var n,r,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(i(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=c;;)if(gs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===c)break e;for(;null===l.sibling;){if(null===l.return||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(gs(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function _s(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),_e(e,o),t=_e(e,r),o=0;o<a.length;o+=2){var s=a[o],c=a[o+1];"style"===s?Ee(n,c):"dangerouslySetInnerHTML"===s?ye(n,c):"children"===s?ge(n,c):w(n,s,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?ie(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Et(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ks=Ko(),ys(t.child,!0)),void As(t);case 19:return void As(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(i(163))}function As(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ds),t.forEach((function(t){var r=Uc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ks(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Os=Math.ceil,Ps=E.ReactCurrentDispatcher,Ns=E.ReactCurrentOwner,Ts=0,Is=null,Rs=null,Ds=0,xs=0,Ms=co(0),Ls=0,Bs=null,js=0,Fs=0,Us=0,Hs=0,Vs=null,Ks=0,Ws=1/0;function zs(){Ws=Ko()+500}var Gs,Xs=null,Js=!1,qs=null,Ys=null,Qs=!1,Zs=null,$s=90,ec=[],tc=[],nc=null,rc=0,oc=null,ac=-1,ic=0,sc=0,cc=null,lc=!1;function uc(){return 0!=(48&Ts)?Ko():-1!==ac?ac:ac=Ko()}function fc(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Wo()?1:2;if(0===ic&&(ic=js),0!==Yo.transition){0!==sc&&(sc=null!==Vs?Vs.pendingLanes:0),e=ic;var t=4186112&~sc;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Wo(),e=Ft(0!=(4&Ts)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ic)}function dc(e,t,n){if(50<rc)throw rc=0,oc=null,Error(i(185));if(null===(e=pc(e,t)))return null;Vt(e,t,n),e===Is&&(Us|=t,4===Ls&&yc(e,Ds));var r=Wo();1===t?0!=(8&Ts)&&0==(48&Ts)?gc(e):(hc(e,n),0===Ts&&(zs(),Jo())):(0==(4&Ts)||98!==r&&99!==r||(null===nc?nc=new Set([e]):nc.add(e)),hc(e,n)),Vs=e}function pc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function hc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-Kt(s),l=1<<c,u=a[c];if(-1===u){if(0==(l&r)||0!=(l&o)){u=t,Lt(l);var f=Mt;a[c]=10<=f?u+250:6<=f?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);s&=~l}if(r=Bt(e,e===Is?Ds:0),t=Mt,0===r)null!==n&&(n!==Bo&&Oo(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Bo&&Oo(n)}15===t?(n=gc.bind(null,e),null===Fo?(Fo=[n],Uo=ko(Ro,qo)):Fo.push(n),n=Bo):14===t?n=Xo(99,gc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=Xo(n,mc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function mc(e){if(ac=-1,sc=ic=0,0!=(48&Ts))throw Error(i(327));var t=e.callbackNode;if(Dc()&&e.callbackNode!==t)return null;var n=Bt(e,e===Is?Ds:0);if(0===n)return null;var r=n,o=Ts;Ts|=16;var a=_c();for(Is===e&&Ds===r||(zs(),Sc(e,r));;)try{Oc();break}catch(t){Cc(e,t)}if(na(),Ps.current=a,Ts=o,null!==Rs?r=0:(Is=null,Ds=0,r=Ls),0!=(js&Us))Sc(e,0);else if(0!==r){if(2===r&&(Ts|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Ac(e,n))),1===r)throw t=Bs,Sc(e,0),yc(e,n),hc(e,Ko()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Tc(e);break;case 3:if(yc(e,n),(62914560&n)===n&&10<(r=Ks+500-Ko())){if(0!==Bt(e,0))break;if(((o=e.suspendedLanes)&n)!==n){uc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Wr(Tc.bind(null,e),r);break}Tc(e);break;case 4:if(yc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,o=-1;0<n;){var s=31-Kt(n);a=1<<s,(s=r[s])>o&&(o=s),n&=~a}if(n=o,10<(n=(120>(n=Ko()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Os(n/1960))-n)){e.timeoutHandle=Wr(Tc.bind(null,e),n);break}Tc(e);break;default:throw Error(i(329))}}return hc(e,Ko()),e.callbackNode===t?mc.bind(null,e):null}function yc(e,t){for(t&=~Hs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function gc(e){if(0!=(48&Ts))throw Error(i(327));if(Dc(),e===Is&&0!=(e.expiredLanes&Ds)){var t=Ds,n=Ac(e,t);0!=(js&Us)&&(n=Ac(e,t=Bt(e,t)))}else n=Ac(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Ts|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Ac(e,t))),1===n)throw n=Bs,Sc(e,0),yc(e,t),hc(e,Ko()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e),hc(e,Ko()),null}function vc(e,t){var n=Ts;Ts|=1;try{return e(t)}finally{0===(Ts=n)&&(zs(),Jo())}}function bc(e,t){var n=Ts;Ts&=-2,Ts|=8;try{return e(t)}finally{0===(Ts=n)&&(zs(),Jo())}}function wc(e,t){uo(Ms,xs),xs|=t,js|=t}function Ec(){xs=Ms.current,lo(Ms)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,zr(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&vo();break;case 3:xa(),lo(ho),lo(po),qa();break;case 5:La(r);break;case 4:xa();break;case 13:case 19:lo(Ba);break;case 10:ra(r);break;case 23:case 24:Ec()}n=n.return}Is=e,Rs=Wc(e.current,null),Ds=xs=js=t,Ls=0,Bs=null,Hs=Us=Fs=0}function Cc(e,t){for(;;){var n=Rs;try{if(na(),Ya.current=Ii,ni){for(var r=$a.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ni=!1}if(Za=0,ti=ei=$a=null,ri=!1,Ns.current=null,null===n||null===n.return){Ls=1,Bs=t,Rs=null;break}e:{var a=e,i=n.return,s=n,c=t;if(t=Ds,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var l=c;if(0==(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&Ba.current),d=i;do{var p;if(p=13===d.tag){var h=d.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(p){var y=d.updateQueue;if(null===y){var g=new Set;g.add(l),d.updateQueue=g}else y.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=ua(-1,1);v.tag=2,fa(s,v)}s.lanes|=1;break e}c=void 0,s=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new ls,c=new Set,b.set(l,c)):void 0===(c=b.get(l))&&(c=new Set,b.set(l,c)),!c.has(s)){c.add(s);var w=Fc.bind(null,a,l,s);l.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),c=ss(c,s),d=i;do{switch(d.tag){case 3:a=c,d.flags|=4096,t&=-t,d.lanes|=t,da(d,us(0,a,t));break e;case 1:a=c;var E=d.type,S=d.stateNode;if(0==(64&d.flags)&&("function"==typeof E.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Ys||!Ys.has(S)))){d.flags|=4096,t&=-t,d.lanes|=t,da(d,fs(d,a,t));break e}}d=d.return}while(null!==d)}Nc(n)}catch(e){t=e,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function _c(){var e=Ps.current;return Ps.current=Ii,null===e?Ii:e}function Ac(e,t){var n=Ts;Ts|=16;var r=_c();for(Is===e&&Ds===t||Sc(e,t);;)try{kc();break}catch(t){Cc(e,t)}if(na(),Ts=n,Ps.current=r,null!==Rs)throw Error(i(261));return Is=null,Ds=0,Ls}function kc(){for(;null!==Rs;)Pc(Rs)}function Oc(){for(;null!==Rs&&!Po();)Pc(Rs)}function Pc(e){var t=Gs(e.alternate,e,xs);e.memoizedProps=e.pendingProps,null===t?Nc(e):Rs=t,Ns.current=null}function Nc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=as(n,t,xs)))return void(Rs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&xs)||0==(4&n.mode)){for(var r=0,o=n.child;null!==o;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=is(t)))return n.flags&=2047,void(Rs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Ls&&(Ls=5)}function Tc(e){var t=Wo();return Go(99,Ic.bind(null,e,t)),null}function Ic(e,t){do{Dc()}while(null!==Zs);if(0!=(48&Ts))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,a=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var s=e.eventTimes,c=e.expirationTimes;0<a;){var l=31-Kt(a),u=1<<l;o[l]=0,s[l]=-1,c[l]=-1,a&=~u}if(null!==nc&&0==(24&r)&&nc.has(e)&&nc.delete(e),e===Is&&(Rs=Is=null,Ds=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(o=Ts,Ts|=32,Ns.current=null,Ur=Jt,yr(s=mr())){if("selectionStart"in s)c={start:s.selectionStart,end:s.selectionEnd};else e:if(c=(c=s.ownerDocument)&&c.defaultView||window,(u=c.getSelection&&c.getSelection())&&0!==u.rangeCount){c=u.anchorNode,a=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{c.nodeType,l.nodeType}catch(e){c=null;break e}var f=0,d=-1,p=-1,h=0,m=0,y=s,g=null;t:for(;;){for(var v;y!==c||0!==a&&3!==y.nodeType||(d=f+a),y!==l||0!==u&&3!==y.nodeType||(p=f+u),3===y.nodeType&&(f+=y.nodeValue.length),null!==(v=y.firstChild);)g=y,y=v;for(;;){if(y===s)break t;if(g===c&&++h===a&&(d=f),g===l&&++m===u&&(p=f),null!==(v=y.nextSibling))break;g=(y=g).parentNode}y=v}c=-1===d||-1===p?null:{start:d,end:p}}else c=null;c=c||{start:0,end:0}}else c=null;Hr={focusedElem:s,selectionRange:c},Jt=!1,cc=null,lc=!1,Xs=r;do{try{Rc()}catch(e){if(null===Xs)throw Error(i(330));jc(Xs,e),Xs=Xs.nextEffect}}while(null!==Xs);cc=null,Xs=r;do{try{for(s=e;null!==Xs;){var b=Xs.flags;if(16&b&&ge(Xs.stateNode,""),128&b){var w=Xs.alternate;if(null!==w){var E=w.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&b){case 2:ws(Xs),Xs.flags&=-3;break;case 6:ws(Xs),Xs.flags&=-3,_s(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,_s(Xs.alternate,Xs);break;case 4:_s(Xs.alternate,Xs);break;case 8:Cs(s,c=Xs);var S=c.alternate;vs(c),null!==S&&vs(S)}Xs=Xs.nextEffect}}catch(e){if(null===Xs)throw Error(i(330));jc(Xs,e),Xs=Xs.nextEffect}}while(null!==Xs);if(E=Hr,w=mr(),b=E.focusedElem,s=E.selectionRange,w!==b&&b&&b.ownerDocument&&hr(b.ownerDocument.documentElement,b)){null!==s&&yr(b)&&(w=s.start,void 0===(E=s.end)&&(E=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(E,b.value.length)):(E=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(E=E.getSelection(),c=b.textContent.length,S=Math.min(s.start,c),s=void 0===s.end?S:Math.min(s.end,c),!E.extend&&S>s&&(c=s,s=S,S=c),c=pr(b,S),a=pr(b,s),c&&a&&(1!==E.rangeCount||E.anchorNode!==c.node||E.anchorOffset!==c.offset||E.focusNode!==a.node||E.focusOffset!==a.offset)&&((w=w.createRange()).setStart(c.node,c.offset),E.removeAllRanges(),S>s?(E.addRange(w),E.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),E.addRange(w))))),w=[];for(E=b;E=E.parentNode;)1===E.nodeType&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(E=w[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Jt=!!Ur,Hr=Ur=null,e.current=n,Xs=r;do{try{for(b=e;null!==Xs;){var C=Xs.flags;if(36&C&&ms(b,Xs.alternate,Xs),128&C){w=void 0;var _=Xs.ref;if(null!==_){var A=Xs.stateNode;Xs.tag,w=A,"function"==typeof _?_(w):_.current=w}}Xs=Xs.nextEffect}}catch(e){if(null===Xs)throw Error(i(330));jc(Xs,e),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,jo(),Ts=o}else e.current=n;if(Qs)Qs=!1,Zs=e,$s=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((C=Xs).sibling=null,C.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&(Ys=null),1===r?e===oc?rc++:(rc=0,oc=e):rc=0,n=n.stateNode,_o&&"function"==typeof _o.onCommitFiberRoot)try{_o.onCommitFiberRoot(Co,n,void 0,64==(64&n.current.flags))}catch(e){}if(hc(e,Ko()),Js)throw Js=!1,e=qs,qs=null,e;return 0!=(8&Ts)||Jo(),null}function Rc(){for(;null!==Xs;){var e=Xs.alternate;lc||null===cc||(0!=(8&Xs.flags)?$e(Xs,cc)&&(lc=!0):13===Xs.tag&&ks(e,Xs)&&$e(Xs,cc)&&(lc=!0));var t=Xs.flags;0!=(256&t)&&hs(e,Xs),0==(512&t)||Qs||(Qs=!0,Xo(97,(function(){return Dc(),null}))),Xs=Xs.nextEffect}}function Dc(){if(90!==$s){var e=97<$s?97:$s;return $s=90,Go(e,Lc)}return!1}function xc(e,t){ec.push(t,e),Qs||(Qs=!0,Xo(97,(function(){return Dc(),null})))}function Mc(e,t){tc.push(t,e),Qs||(Qs=!0,Xo(97,(function(){return Dc(),null})))}function Lc(){if(null===Zs)return!1;var e=Zs;if(Zs=null,0!=(48&Ts))throw Error(i(331));var t=Ts;Ts|=32;var n=tc;tc=[];for(var r=0;r<n.length;r+=2){var o=n[r],a=n[r+1],s=o.destroy;if(o.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===a)throw Error(i(330));jc(a,e)}}for(n=ec,ec=[],r=0;r<n.length;r+=2){o=n[r],a=n[r+1];try{var c=o.create;o.destroy=c()}catch(e){if(null===a)throw Error(i(330));jc(a,e)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Ts=t,Jo(),!0}function Bc(e,t,n){fa(e,t=us(0,t=ss(n,t),1)),t=uc(),null!==(e=pc(e,1))&&(Vt(e,1,t),hc(e,t))}function jc(e,t){if(3===e.tag)Bc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ys||!Ys.has(r))){var o=fs(n,e=ss(t,e),1);if(fa(n,o),o=uc(),null!==(n=pc(n,1)))Vt(n,1,o),hc(n,o);else if("function"==typeof r.componentDidCatch&&(null===Ys||!Ys.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Fc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=uc(),e.pingedLanes|=e.suspendedLanes&n,Is===e&&(Ds&n)===n&&(4===Ls||3===Ls&&(62914560&Ds)===Ds&&500>Ko()-Ks?Sc(e,0):Hs|=n),hc(e,t)}function Uc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Wo()?1:2:(0===ic&&(ic=js),0===(t=Ut(62914560&~ic))&&(t=4194304))),n=uc(),null!==(e=pc(e,t))&&(Vt(e,t,n),hc(e,n))}function Hc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vc(e,t,n,r){return new Hc(e,t,n,r)}function Kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wc(e,t){var n=e.alternate;return null===n?((n=Vc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,o,a){var s=2;if(r=e,"function"==typeof e)Kc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case _:return Gc(n.children,o,a,t);case L:s=8,o|=16;break;case A:s=8,o|=1;break;case k:return(e=Vc(12,n,t,8|o)).elementType=k,e.type=k,e.lanes=a,e;case T:return(e=Vc(13,n,t,o)).type=T,e.elementType=T,e.lanes=a,e;case I:return(e=Vc(19,n,t,o)).elementType=I,e.lanes=a,e;case B:return Xc(n,o,a,t);case j:return(e=Vc(24,n,t,o)).elementType=j,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case O:s=10;break e;case P:s=9;break e;case N:s=11;break e;case R:s=14;break e;case D:s=16,r=null;break e;case x:s=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Vc(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Gc(e,t,n,r){return(e=Vc(7,e,r,t)).lanes=n,e}function Xc(e,t,n,r){return(e=Vc(23,e,r,t)).elementType=B,e.lanes=n,e}function Jc(e,t,n){return(e=Vc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=Vc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ht(0),this.expirationTimes=Ht(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ht(0),this.mutableSourceEagerHydrationData=null}function Qc(e,t,n,r){var o=t.current,a=uc(),s=fc(o);e:if(n){t:{if(qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(go(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(i(171))}if(1===n.tag){var l=n.type;if(go(l)){n=wo(n,l,c);break e}}n=c}else n=fo;return null===t.context?t.context=n:t.pendingContext=n,(t=ua(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(o,t),dc(o,s,a),s}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function el(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}function tl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yc(e,t,null!=n&&!0===n.hydrate),t=Vc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ca(t),e[$r]=n.current,Ir(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(t=r[e])._getVersion;o=o(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function nl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rl(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a._internalRoot;if("function"==typeof o){var s=o;o=function(){var e=Zc(i);s.call(e)}}Qc(t,i,e,o)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tl(e,0,t?{hydrate:!0}:void 0)}(n,r),i=a._internalRoot,"function"==typeof o){var c=o;o=function(){var e=Zc(i);c.call(e)}}bc((function(){Qc(t,i,e,o)}))}return Zc(i)}function ol(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Gs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ho.current)Li=!0;else{if(0==(n&r)){switch(Li=!1,t.tag){case 3:Gi(t),Xa();break;case 5:Ma(t);break;case 1:go(t.type)&&Eo(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;uo(Zo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Zi(e,t,n):(uo(Ba,1&Ba.current),null!==(t=rs(e,t,n))?t.sibling:null);uo(Ba,1&Ba.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return ns(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),uo(Ba,Ba.current),r)break;return null;case 23:case 24:return t.lanes=0,Hi(e,t,n)}return rs(e,t,n)}Li=0!=(16384&e.flags)}else Li=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=yo(t,po.current),aa(t,n),o=ii(null,t,r,e,o,n),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,go(r)){var a=!0;Eo(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,ca(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&ya(t,r,s,e),o.updater=ga,t.stateNode=o,o._reactInternals=t,Ea(t,r,e,n),t=zi(null,t,r,!0,a,n)}else t.tag=0,Bi(null,t,o,n),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(a=o._init)(o._payload),t.type=o,a=t.tag=function(e){if("function"==typeof e)return Kc(e)?1:0;if(null!=e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(o),e=Qo(o,e),a){case 0:t=Ki(null,t,o,e,n);break e;case 1:t=Wi(null,t,o,e,n);break e;case 11:t=ji(null,t,o,e,n);break e;case 14:t=Fi(null,t,o,Qo(o.type,e),r,n);break e}throw Error(i(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ki(e,t,r,o=t.elementType===r?o:Qo(r,o),n);case 1:return r=t.type,o=t.pendingProps,Wi(e,t,r,o=t.elementType===r?o:Qo(r,o),n);case 3:if(Gi(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,la(e,t),pa(t,r,null,n),(r=t.memoizedState.element)===o)Xa(),t=rs(e,t,n);else{if((a=(o=t.stateNode).hydrate)&&(Ua=Xr(t.stateNode.containerInfo.firstChild),Fa=t,a=Ha=!0),a){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(a=e[o])._workInProgressVersionPrimary=e[o+1],Ja.push(a);for(n=Oa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Bi(e,t,r,n),Xa();t=t.child}return t;case 5:return Ma(t),null===e&&Wa(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,Kr(r,o)?s=null:null!==a&&Kr(r,a)&&(t.flags|=16),Vi(e,t),Bi(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Zi(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ka(t,null,r,n):Bi(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ji(e,t,r,o=t.elementType===r?o:Qo(r,o),n);case 7:return Bi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Bi(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value;var c=t.type._context;if(uo(Zo,c._currentValue),c._currentValue=a,null!==s)if(c=s.value,0==(a=lr(c,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,a):1073741823))){if(s.children===o.children&&!ho.current){t=rs(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){s=c.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&a)){1===c.tag&&((u=ua(-1,n&-n)).tag=2,fa(c,u)),c.lanes|=n,null!==(u=c.alternate)&&(u.lanes|=n),oa(c.return,n),l.lanes|=n;break}u=u.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Bi(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(o=ia(o,a.unstable_observedBits)),t.flags|=1,Bi(e,t,r,n),t.child;case 14:return a=Qo(o=t.type,t.pendingProps),Fi(e,t,o,a=Qo(o.type,a),r,n);case 15:return Ui(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Qo(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,go(r)?(e=!0,Eo(t)):e=!1,aa(t,n),ba(t,r,o),Ea(t,r,o,n),zi(null,t,r,!0,e,n);case 19:return ns(e,t,n);case 23:case 24:return Hi(e,t,n)}throw Error(i(156,t.tag))},tl.prototype.render=function(e){Qc(e,this._internalRoot,null,null)},tl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Qc(null,e,null,(function(){t[$r]=null}))},et=function(e){13===e.tag&&(dc(e,4,uc()),el(e,4))},tt=function(e){13===e.tag&&(dc(e,67108864,uc()),el(e,67108864))},nt=function(e){if(13===e.tag){var t=uc(),n=fc(e);dc(e,n,t),el(e,n)}},rt=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=oo(r);if(!o)throw Error(i(90));Q(r),ne(r,o)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Re=vc,De=function(e,t,n,r,o){var a=Ts;Ts|=4;try{return Go(98,e.bind(null,t,n,r,o))}finally{0===(Ts=a)&&(zs(),Jo())}},xe=function(){0==(49&Ts)&&(function(){if(null!==nc){var e=nc;nc=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,hc(e,Ko())}))}Jo()}(),Dc())},Me=function(e,t){var n=Ts;Ts|=2;try{return e(t)}finally{0===(Ts=n)&&(zs(),Jo())}};var al={Events:[no,ro,oo,Te,Ie,Dc,{current:!1}]},il={findFiberByHostInstance:to,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},sl={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{Co=cl.inject(sl),_o=cl}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,t.createPortal=ol,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ts;if(0!=(48&n))return e(t);Ts|=1;try{if(e)return Go(99,e.bind(null,t))}finally{Ts=n,Jo()}},t.hydrate=function(e,t,n){if(!nl(t))throw Error(i(200));return rl(null,e,t,!0,n)},t.render=function(e,t,n){if(!nl(t))throw Error(i(200));return rl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nl(e))throw Error(i(40));return!!e._reactRootContainer&&(bc((function(){rl(null,null,e,!1,(function(){e._reactRootContainer=null,e[$r]=null}))})),!0)},t.unstable_batchedUpdates=vc,t.unstable_createPortal=function(e,t){return ol(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return rl(e,t,n,!1,r)},t.version="17.0.2"},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},408:(e,t,n)=>{"use strict";var r=n(418),o=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,s=60110,c=60112;t.Suspense=60113;var l=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;o=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),i=f("react.provider"),s=f("react.context"),c=f("react.forward_ref"),t.Suspense=f("react.suspense"),l=f("react.memo"),u=f("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function g(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=v.prototype=new g;b.constructor=v,r(b,y.prototype),b.isPureReactComponent=!0;var w={current:null},E=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,a={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===a[r]&&(a[r]=c[r]);return{$$typeof:o,type:e,key:i,ref:s,props:a,_owner:w.current}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case a:c=!0}}if(c)return i=i(c=e),e=""===r?"."+k(c,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(A,"$&/")+"/"),O(i,t,n,"",(function(e){return e}))):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),t.push(i)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=r+k(s=e[l],l);c+=O(s,t,n,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=O(s=s.value,t,n,u=r+k(s,l++),i);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function P(e,t,n){if(null==e)return e;var r=[],o=0;return O(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function I(){var e=T.current;if(null===e)throw Error(p(321));return e}var R={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(p(143));return e}},t.Component=y,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var a=r({},e.props),i=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=w.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!S.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];a.children=l}return{$$typeof:o,type:e.type,key:i,ref:s,props:a,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return I().useCallback(e,t)},t.useContext=function(e,t){return I().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return I().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return I().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return I().useLayoutEffect(e,t)},t.useMemo=function(e,t){return I().useMemo(e,t)},t.useReducer=function(e,t,n){return I().useReducer(e,t,n)},t.useRef=function(e){return I().useRef(e)},t.useState=function(e){return I().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{"use strict";e.exports=n(408)},53:(e,t)=>{"use strict";var n,r,o,a;if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,f=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(f,0),e}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(f,0))},r=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var h=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,y=null,g=-1,v=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,E=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();b=e+v;try{y(!0,e)?E.postMessage(null):(m=!1,y=null)}catch(e){throw E.postMessage(null),e}}else m=!1},n=function(e){y=e,m||(m=!0,E.postMessage(null))},r=function(e,n){g=d((function(){e(t.unstable_now())}),n)},o=function(){p(g),g=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<A(o,t)))break e;e[r]=t,e[n]=o,n=r}}function C(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var a=2*(r+1)-1,i=e[a],s=a+1,c=e[s];if(void 0!==i&&0>A(i,n))void 0!==c&&0>A(c,i)?(e[r]=c,e[s]=n,r=s):(e[r]=i,e[a]=n,r=a);else{if(!(void 0!==c&&0>A(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],O=[],P=1,N=null,T=3,I=!1,R=!1,D=!1;function x(e){for(var t=C(O);null!==t;){if(null===t.callback)_(O);else{if(!(t.startTime<=e))break;_(O),t.sortIndex=t.expirationTime,S(k,t)}t=C(O)}}function M(e){if(D=!1,x(e),!R)if(null!==C(k))R=!0,n(L);else{var t=C(O);null!==t&&r(M,t.startTime-e)}}function L(e,n){R=!1,D&&(D=!1,o()),I=!0;var a=T;try{for(x(n),N=C(k);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=N.callback;if("function"==typeof i){N.callback=null,T=N.priorityLevel;var s=i(N.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?N.callback=s:N===C(k)&&_(k),x(n)}else _(k);N=C(k)}if(null!==N)var c=!0;else{var l=C(O);null!==l&&r(M,l.startTime-n),c=!1}return c}finally{N=null,T=a,I=!1}}var B=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||I||(R=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return C(k)},t.unstable_next=function(e){switch(T){case 1:case 2:case 3:var t=3;break;default:t=T}var n=T;T=t;try{return e()}finally{T=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=T;T=e;try{return t()}finally{T=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?s+i:s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:P++,callback:a,priorityLevel:e,startTime:i,expirationTime:c=i+c,sortIndex:-1},i>s?(e.sortIndex=i,S(O,e),null===C(k)&&e===C(O)&&(D?o():D=!0,r(M,i-s))):(e.sortIndex=c,S(k,e),R||I||(R=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=T;return function(){var n=T;T=t;try{return e.apply(this,arguments)}finally{T=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},154:(e,t,n)=>{var r;if("function"==typeof fetch&&(r=void 0!==n.g&&n.g.fetch?n.g.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"undefined"==typeof window||void 0===window.document){var o=r||n(98);o.default&&(o=o.default),t.default=o,e.exports=t.default}}},a={};function i(e){var t=a[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var n=a[e]={exports:{}};try{var r={id:e,module:n,factory:o[e],require:i};i.i.forEach((function(e){e(r)})),n=r.module,r.factory.call(n.exports,n,n.exports,r.require)}catch(e){throw n.error=e,e}return n.exports}i.m=o,i.c=a,i.i=[],i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);i.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,i.d(o,a),o},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.hu=e=>e+"."+i.h()+".hot-update.js",i.hmrF=()=>"main."+i.h()+".hot-update.json",i.h=()=>"5d2dd93f5173a5b74ee6",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="hutch:",i.l=(e,t,o,a)=>{if(n[e])n[e].push(t);else{var s,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var f=l[u];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==r+o){s=f;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",r+o),s.src=e),n[e]=[t];var d=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t,n,r={},o=i.c,a=[],s=[],c="idle",l=0,u=[];function f(e){c=e;for(var t=[],n=0;n<s.length;n++)t[n]=s[n].call(null,e);return Promise.all(t)}function d(){0==--l&&f("ready").then((function(){if(0===l){var e=u;u=[];for(var t=0;t<e.length;t++)e[t]()}}))}function p(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return f("check").then(i.hmrM).then((function(n){return n?f("prepare").then((function(){var r=[];return t=[],Promise.all(Object.keys(i.hmrC).reduce((function(e,o){return i.hmrC[o](n.c,n.r,n.m,e,t,r),e}),[])).then((function(){return t=function(){return e?m(e):f("ready").then((function(){return r}))},0===l?t():new Promise((function(e){u.push((function(){e(t())}))}));var t}))})):f(y()?"ready":"idle").then((function(){return null}))}))}function h(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+c+")")})):m(e)}function m(e){e=e||{},y();var r=t.map((function(t){return t(e)}));t=void 0;var o=r.map((function(e){return e.error})).filter(Boolean);if(o.length>0)return f("abort").then((function(){throw o[0]}));var a=f("dispose");r.forEach((function(e){e.dispose&&e.dispose()}));var i,s=f("apply"),c=function(e){i||(i=e)},l=[];return r.forEach((function(e){if(e.apply){var t=e.apply(c);if(t)for(var n=0;n<t.length;n++)l.push(t[n])}})),Promise.all([a,s]).then((function(){return i?f("fail").then((function(){throw i})):n?m(e).then((function(e){return l.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):f("idle").then((function(){return l}))}))}function y(){if(n)return t||(t=[]),Object.keys(i.hmrI).forEach((function(e){n.forEach((function(n){i.hmrI[e](n,t)}))})),n=void 0,!0}i.hmrD=r,i.i.push((function(u){var m,y,g,v,b=u.module,w=function(t,n){var r=o[n];if(!r)return t;var i=function(i){if(r.hot.active){if(o[i]){var s=o[i].parents;-1===s.indexOf(n)&&s.push(n)}else a=[n],e=i;-1===r.children.indexOf(i)&&r.children.push(i)}else console.warn("[HMR] unexpected require("+i+") from disposed module "+n),a=[];return t(i)},s=function(e){return{configurable:!0,enumerable:!0,get:function(){return t[e]},set:function(n){t[e]=n}}};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&"e"!==u&&Object.defineProperty(i,u,s(u));return i.e=function(e){return function(e){switch(c){case"ready":f("prepare");case"prepare":return l++,e.then(d,d),e;default:return e}}(t.e(e))},i}(u.require,u.id);b.hot=(m=u.id,y=b,v={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:g=e!==m,_requireSelf:function(){a=y.parents.slice(),e=g?void 0:m,i(m)},active:!0,accept:function(e,t,n){if(void 0===e)v._selfAccepted=!0;else if("function"==typeof e)v._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)v._acceptedDependencies[e[r]]=t||function(){},v._acceptedErrorHandlers[e[r]]=n;else v._acceptedDependencies[e]=t||function(){},v._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)v._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)v._declinedDependencies[e[t]]=!0;else v._declinedDependencies[e]=!0},dispose:function(e){v._disposeHandlers.push(e)},addDisposeHandler:function(e){v._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=v._disposeHandlers.indexOf(e);t>=0&&v._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":t=[],Object.keys(i.hmrI).forEach((function(e){i.hmrI[e](m,t)})),f("ready");break;case"ready":Object.keys(i.hmrI).forEach((function(e){i.hmrI[e](m,t)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(m)}},check:p,apply:h,status:function(e){if(!e)return c;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var t=s.indexOf(e);t>=0&&s.splice(t,1)},data:r[m]},e=void 0,v),b.parents=a,b.children=[],a=[],u.require=w})),i.hmrC={},i.hmrI={}})(),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e,t,n,r,o,a=i.hmrS_jsonp=i.hmrS_jsonp||{179:0},s={};function c(t,n){return e=n,new Promise(((e,n)=>{s[t]=e;var r=i.p+i.hu(t),o=new Error;i.l(r,(e=>{if(s[t]){s[t]=void 0;var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;o.message="Loading hot update chunk "+t+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,n(o)}}))}))}function l(e){function s(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var o=r.pop(),a=o.id,s=o.chain,l=i.c[a];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(l.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var u=0;u<l.parents.length;u++){var f=l.parents[u],d=i.c[f];if(d){if(d.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([f]),moduleId:a,parentId:f};-1===t.indexOf(f)&&(d.hot._acceptedDependencies[a]?(n[f]||(n[f]=[]),c(n[f],[a])):(delete n[f],t.push(f),r.push({chain:s.concat([f]),id:f})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}i.f&&delete i.f.jsonpHmr,t=void 0;var l={},u=[],f={},d=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var p in n)if(i.o(n,p)){var h,m=n[p],y=!1,g=!1,v=!1,b="";switch((h=m?s(p):{type:"disposed",moduleId:p}).chain&&(b="\nUpdate propagation: "+h.chain.join(" -> ")),h.type){case"self-declined":e.onDeclined&&e.onDeclined(h),e.ignoreDeclined||(y=new Error("Aborted because of self decline: "+h.moduleId+b));break;case"declined":e.onDeclined&&e.onDeclined(h),e.ignoreDeclined||(y=new Error("Aborted because of declined dependency: "+h.moduleId+" in "+h.parentId+b));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(h),e.ignoreUnaccepted||(y=new Error("Aborted because "+p+" is not accepted"+b));break;case"accepted":e.onAccepted&&e.onAccepted(h),g=!0;break;case"disposed":e.onDisposed&&e.onDisposed(h),v=!0;break;default:throw new Error("Unexception type "+h.type)}if(y)return{error:y};if(g)for(p in f[p]=m,c(u,h.outdatedModules),h.outdatedDependencies)i.o(h.outdatedDependencies,p)&&(l[p]||(l[p]=[]),c(l[p],h.outdatedDependencies[p]));v&&(c(u,[h.moduleId]),f[p]=d)}n=void 0;for(var w,E=[],S=0;S<u.length;S++){var C=u[S],_=i.c[C];_&&(_.hot._selfAccepted||_.hot._main)&&f[C]!==d&&!_.hot._selfInvalidated&&E.push({module:C,require:_.hot._requireSelf,errorHandler:_.hot._selfAccepted})}return{dispose:function(){var e;r.forEach((function(e){delete a[e]})),r=void 0;for(var t,n=u.slice();n.length>0;){var o=n.pop(),s=i.c[o];if(s){var c={},f=s.hot._disposeHandlers;for(S=0;S<f.length;S++)f[S].call(null,c);for(i.hmrD[o]=c,s.hot.active=!1,delete i.c[o],delete l[o],S=0;S<s.children.length;S++){var d=i.c[s.children[S]];d&&(e=d.parents.indexOf(o))>=0&&d.parents.splice(e,1)}}}for(var p in l)if(i.o(l,p)&&(s=i.c[p]))for(w=l[p],S=0;S<w.length;S++)t=w[S],(e=s.children.indexOf(t))>=0&&s.children.splice(e,1)},apply:function(t){for(var n in f)i.o(f,n)&&(i.m[n]=f[n]);for(var r=0;r<o.length;r++)o[r](i);for(var a in l)if(i.o(l,a)){var s=i.c[a];if(s){w=l[a];for(var c=[],d=[],p=[],h=0;h<w.length;h++){var m=w[h],y=s.hot._acceptedDependencies[m],g=s.hot._acceptedErrorHandlers[m];if(y){if(-1!==c.indexOf(y))continue;c.push(y),d.push(g),p.push(m)}}for(var v=0;v<c.length;v++)try{c[v].call(null,w)}catch(n){if("function"==typeof d[v])try{d[v](n,{moduleId:a,dependencyId:p[v]})}catch(r){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:a,dependencyId:p[v],error:r,originalError:n}),e.ignoreErrored||(t(r),t(n))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:a,dependencyId:p[v],error:n}),e.ignoreErrored||t(n)}}}for(var b=0;b<E.length;b++){var S=E[b],C=S.module;try{S.require(C)}catch(n){if("function"==typeof S.errorHandler)try{S.errorHandler(n,{moduleId:C,module:i.c[C]})}catch(r){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:C,error:r,originalError:n}),e.ignoreErrored||(t(r),t(n))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:C,error:n}),e.ignoreErrored||t(n)}}return u}}}self.webpackHotUpdatehutch=(t,r,a)=>{for(var c in r)i.o(r,c)&&(n[c]=r[c],e&&e.push(c));a&&o.push(a),s[t]&&(s[t](),s[t]=void 0)},i.hmrI.jsonp=function(e,t){n||(n={},o=[],r=[],t.push(l)),i.o(n,e)||(n[e]=i.m[e])},i.hmrC.jsonp=function(e,s,u,f,d,p){d.push(l),t={},r=s,n=u.reduce((function(e,t){return e[t]=!1,e}),{}),o=[],e.forEach((function(e){i.o(a,e)&&void 0!==a[e]?(f.push(c(e,p)),t[e]=!0):t[e]=!1})),i.f&&(i.f.jsonpHmr=function(e,n){t&&i.o(t,e)&&!t[e]&&(n.push(c(e)),t[e]=!0)})},i.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(i.p+i.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),i(841)})();